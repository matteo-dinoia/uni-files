<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Big-step operational semantics | Introduction to Program Verification in Agda</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="Big-step operational semantics" />
<meta property="og:locale" content="en_US" />
<meta property="og:site_name" content="Introduction to Program Verification in Agda" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Big-step operational semantics" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","headline":"Big-step operational semantics","url":"/pages/Chapter.Imp.BigStep.html"}</script>
<!-- End Jekyll SEO tag -->

  <link rel="stylesheet" href="../assets/css/main.css">
  <link rel="stylesheet" href="../assets/css/Agda.css">
  <script src="../assets/js/mathjax.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="../assets/js/codereveal.js"></script>
  <link type="application/atom+xml" rel="alternate" href="/feed.xml" title="Introduction to Program Verification in Agda" /><!-- <script src="/assets/js/clipboard.min.js"></script> -->
  <!-- <script src="/assets/js/codeselect.js"></script> -->
</head>
<body>

<header class="site-header" role="banner">
  <div class="wrapper">
    <a class="site-title" rel="author" href="../index.html">Introduction to Program Verification in Agda</a>
    

    <nav class="site-nav">
      <a href="https://agda.readthedocs.io/en/latest/">AGDA DOCS</a>
    </nav>
  </div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">
  <ul class="menu">
  <li>
    <a href="Chapter.Imp.AexpBexp.html">‹ Arithmetic and boolean expressions</a></li>
  <li>
    <a href="Chapter.Imp.SmallStep.html">Small-step operational semantics ›</a></li>
</ul>
  <header class="post-header">
    <h1 class="post-title">Big-step operational semantics</h1>
  </header>

  <div class="post-content">
    <!--
<pre class="Agda"><a id="117" class="Symbol">{-#</a> <a id="121" class="Keyword">OPTIONS</a> <a id="129" class="Pragma">--allow-unsolved-metas</a> <a id="152" class="Symbol">#-}</a>
</pre>-->

<pre class="Agda"><a id="170" class="Keyword">module</a> <a id="177" href="Chapter.Imp.BigStep.html" class="Module">Chapter.Imp.BigStep</a> <a id="197" class="Keyword">where</a>
</pre>
<h2 id="imports">Imports</h2>

<pre class="Agda"><a id="225" class="Keyword">open</a> <a id="230" class="Keyword">import</a> <a id="237" href="Library.Bool.html" class="Module">Library.Bool</a>
<a id="250" class="Keyword">open</a> <a id="255" class="Keyword">import</a> <a id="262" href="Library.Nat.html" class="Module">Library.Nat</a>
<a id="274" class="Keyword">open</a> <a id="279" class="Keyword">import</a> <a id="286" href="Library.Nat.Properties.html" class="Module">Library.Nat.Properties</a>
<a id="309" class="Keyword">open</a> <a id="314" class="Keyword">import</a> <a id="321" href="Library.Logic.html" class="Module">Library.Logic</a>
<a id="335" class="Keyword">open</a> <a id="340" class="Keyword">import</a> <a id="347" href="Library.Logic.Laws.html" class="Module">Library.Logic.Laws</a>
<a id="366" class="Keyword">open</a> <a id="371" class="Keyword">import</a> <a id="378" href="Library.Equality.html" class="Module">Library.Equality</a>
<a id="395" class="Keyword">open</a> <a id="400" class="Keyword">import</a> <a id="407" href="Library.Equality.Reasoning.html" class="Module">Library.Equality.Reasoning</a>

<a id="435" class="Keyword">open</a> <a id="440" class="Keyword">import</a> <a id="447" href="Chapter.Imp.AexpBexp.html" class="Module">Chapter.Imp.AexpBexp</a>

</pre>

<p>In this chapter we introduce the <strong>operational semantics</strong> of IMP, which is a method for
assagning meaning to programs by formally describing their execution. Here we adopt the rather abstract
approach based on the notion of convergence of a program when started in a given state, commonly
called <strong>big-step semantics</strong>.
In the next chapter we shall consider a different approach, based on the definition of a transition system
and called <strong>small-step semantics</strong>:
see <a href="https://en.wikipedia.org/wiki/Operational_semantics">Wikipedia - Operational semantics</a>
for a short presentation  of both semantics and for references.</p>

<h2 id="commands">Commands</h2>

<p>The syntax of <strong>commands</strong>, namely of instructions and ultimately of IMP programs, is defined by the
grammar</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  Com ∋ c, c' ::= SKIP | x := a | c :: c' | IF b THEN c ELSE c' | WHILE b DO c
</code></pre></div></div>

<p>where <code class="language-plaintext highlighter-rouge">x ∈ Vname</code>, <code class="language-plaintext highlighter-rouge">a ∈ Aexp</code> and <code class="language-plaintext highlighter-rouge">b ∈ Bexp</code>. In the same style of the formalization of
arithmetic and boolean expressions, commands are represented by the following data type <code class="language-plaintext highlighter-rouge">Com</code>:</p>

<pre class="Agda"><a id="1493" class="Keyword">data</a> <a id="Com"></a><a id="1498" href="Chapter.Imp.BigStep.html#1498" class="Datatype">Com</a> <a id="1502" class="Symbol">:</a> <a id="1504" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1508" class="Keyword">where</a>
  <a id="Com.SKIP"></a><a id="1516" href="Chapter.Imp.BigStep.html#1516" class="InductiveConstructor">SKIP</a>  <a id="1522" class="Symbol">:</a> <a id="1524" href="Chapter.Imp.BigStep.html#1498" class="Datatype">Com</a>                              <a id="1557" class="Comment">-- inaction</a>
  <a id="Com._:=_"></a><a id="1571" href="Chapter.Imp.BigStep.html#1571" class="InductiveConstructor Operator">_:=_</a>  <a id="1577" class="Symbol">:</a> <a id="1579" href="Chapter.Imp.AexpBexp.html#802" class="Datatype">Vname</a> <a id="1585" class="Symbol">→</a> <a id="1587" href="Chapter.Imp.AexpBexp.html#1770" class="Datatype">Aexp</a> <a id="1592" class="Symbol">→</a> <a id="1594" href="Chapter.Imp.BigStep.html#1498" class="Datatype">Com</a>              <a id="1611" class="Comment">-- assignment</a>
  <a id="Com._::_"></a><a id="1627" href="Chapter.Imp.BigStep.html#1627" class="InductiveConstructor Operator">_::_</a>  <a id="1633" class="Symbol">:</a> <a id="1635" href="Chapter.Imp.BigStep.html#1498" class="Datatype">Com</a> <a id="1639" class="Symbol">→</a> <a id="1641" href="Chapter.Imp.BigStep.html#1498" class="Datatype">Com</a> <a id="1645" class="Symbol">→</a> <a id="1647" href="Chapter.Imp.BigStep.html#1498" class="Datatype">Com</a>                 <a id="1667" class="Comment">-- sequence</a>
  <a id="Com.IF_THEN_ELSE_"></a><a id="1681" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">IF_THEN_ELSE_</a> <a id="1695" class="Symbol">:</a> <a id="1697" href="Chapter.Imp.AexpBexp.html#9385" class="Datatype">Bexp</a> <a id="1702" class="Symbol">→</a> <a id="1704" href="Chapter.Imp.BigStep.html#1498" class="Datatype">Com</a> <a id="1708" class="Symbol">→</a> <a id="1710" href="Chapter.Imp.BigStep.html#1498" class="Datatype">Com</a> <a id="1714" class="Symbol">→</a> <a id="1716" href="Chapter.Imp.BigStep.html#1498" class="Datatype">Com</a>  <a id="1721" class="Comment">-- conditional</a>
  <a id="Com.WHILE_DO_"></a><a id="1738" href="Chapter.Imp.BigStep.html#1738" class="InductiveConstructor Operator">WHILE_DO_</a>     <a id="1752" class="Symbol">:</a> <a id="1754" href="Chapter.Imp.AexpBexp.html#9385" class="Datatype">Bexp</a> <a id="1759" class="Symbol">→</a> <a id="1761" href="Chapter.Imp.BigStep.html#1498" class="Datatype">Com</a> <a id="1765" class="Symbol">→</a> <a id="1767" href="Chapter.Imp.BigStep.html#1498" class="Datatype">Com</a>         <a id="1779" class="Comment">-- iteration</a>
</pre>
<p>As suggested by the comments in the definition above and by the similarities with
actual programming languages like C and Pascal, commands encode step by step
transformations of the state, that starting with an initial state may reach
a final one in case of termination, or it may run forever.</p>

<p>The command <code class="language-plaintext highlighter-rouge">SKIP</code> does nothing leaving the state unchanged and roughly corresponds to
the empty block <code class="language-plaintext highlighter-rouge">{}</code> in C; nonetheless it is usefull to express the one way conditional
<code class="language-plaintext highlighter-rouge">IF b THEN c</code> written as <code class="language-plaintext highlighter-rouge">IF b THEN c ELSE SKIP</code> or to represent a terminated program.</p>

<p>The meaning of assignment <code class="language-plaintext highlighter-rouge">x := a</code>, conditional <code class="language-plaintext highlighter-rouge">IF b THEN c ELSE c'</code> and iteration
<code class="language-plaintext highlighter-rouge">WHILE b DO c</code> is as expected; the same holds of sequential composition
<code class="language-plaintext highlighter-rouge">c :: c'</code> where the unfamiliar symbol :: replaces the semicolon which is not accepted
in operator definitions in Agda.</p>

<h2 id="the-convergence-predicate">The convergence predicate</h2>

<p>To reason about IMP programs the informal explanation above has to be transformed into
a formal definition. To this aim and following ideas originally due to Gill Kahn
and widely adopted in the literature under the names of <strong>convergence predicate</strong> and
<strong>big-step operational semantics</strong>, we introduce the relation
<code class="language-plaintext highlighter-rouge">⦅ c , s ⦆ ⇒ t</code> whose intended meaning is that the execution of <code class="language-plaintext highlighter-rouge">c</code> when started in the
state <code class="language-plaintext highlighter-rouge">s</code> terminates with the final state <code class="language-plaintext highlighter-rouge">t</code>; in general this requires several steps
that are summarised by a single <em>big-step</em>, hence the name.</p>

<p>Let us call <strong>configuration</strong> any pair <code class="language-plaintext highlighter-rouge">⦅ c , s ⦆</code> of a command <code class="language-plaintext highlighter-rouge">c</code> and a state <code class="language-plaintext highlighter-rouge">s</code>:</p>
<pre class="Agda"><a id="3301" class="Keyword">data</a> <a id="Config"></a><a id="3306" href="Chapter.Imp.BigStep.html#3306" class="Datatype">Config</a> <a id="3313" class="Symbol">:</a> <a id="3315" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="3319" class="Keyword">where</a>
    <a id="Config.⦅_,_⦆"></a><a id="3329" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦅_,_⦆</a> <a id="3335" class="Symbol">:</a> <a id="3337" href="Chapter.Imp.BigStep.html#1498" class="Datatype">Com</a> <a id="3341" class="Symbol">→</a> <a id="3343" href="Chapter.Imp.AexpBexp.html#2404" class="Function">State</a> <a id="3349" class="Symbol">→</a> <a id="3351" href="Chapter.Imp.BigStep.html#3306" class="Datatype">Config</a>
</pre>
<p>Then we define a binary relation <code class="language-plaintext highlighter-rouge">_⇒_</code> among <code class="language-plaintext highlighter-rouge">Config</code> and <code class="language-plaintext highlighter-rouge">State</code> by 
a formal system that we encode as a data type in Agda following
Wadler’s trick in PLFA book
(see e.g. the chapter <a href="https://plfa.github.io/Relations/">Relations</a>)
to make the Adga definition looking as a formal system,
where constructors play the role of rules and in each of them the comment
<code class="language-plaintext highlighter-rouge">-------</code> represents the line separating the premises from the conclusion.</p>

<pre class="Agda"><a id="3805" class="Keyword">data</a> <a id="_⇒_"></a><a id="3810" href="Chapter.Imp.BigStep.html#3810" class="Datatype Operator">_⇒_</a> <a id="3814" class="Symbol">:</a> <a id="3816" href="Chapter.Imp.BigStep.html#3306" class="Datatype">Config</a> <a id="3823" class="Symbol">→</a> <a id="3825" href="Chapter.Imp.AexpBexp.html#2404" class="Function">State</a> <a id="3831" class="Symbol">→</a> <a id="3833" href="Agda.Primitive.html#326" class="Primitive">Set</a>  <a id="3838" class="Keyword">where</a>

    <a id="_⇒_.Skip"></a><a id="3849" href="Chapter.Imp.BigStep.html#3849" class="InductiveConstructor">Skip</a> <a id="3854" class="Symbol">:</a> <a id="3856" class="Symbol">∀</a> <a id="3858" class="Symbol">{</a><a id="3859" href="Chapter.Imp.BigStep.html#3859" class="Bound">s</a><a id="3860" class="Symbol">}</a>
         <a id="3871" class="Comment">----------------</a>
         <a id="3897" class="Symbol">→</a> <a id="3899" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦅</a> <a id="3901" href="Chapter.Imp.BigStep.html#1516" class="InductiveConstructor">SKIP</a> <a id="3906" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">,</a> <a id="3908" href="Chapter.Imp.BigStep.html#3859" class="Bound">s</a> <a id="3910" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦆</a> <a id="3912" href="Chapter.Imp.BigStep.html#3810" class="Datatype Operator">⇒</a> <a id="3914" href="Chapter.Imp.BigStep.html#3859" class="Bound">s</a>

    <a id="_⇒_.Loc"></a><a id="3921" href="Chapter.Imp.BigStep.html#3921" class="InductiveConstructor">Loc</a> <a id="3925" class="Symbol">:</a> <a id="3927" class="Symbol">∀{</a><a id="3929" href="Chapter.Imp.BigStep.html#3929" class="Bound">x</a> <a id="3931" href="Chapter.Imp.BigStep.html#3931" class="Bound">a</a> <a id="3933" href="Chapter.Imp.BigStep.html#3933" class="Bound">s</a><a id="3934" class="Symbol">}</a>
        <a id="3944" class="Comment">---------------------------------------</a>
        <a id="3992" class="Symbol">→</a> <a id="3994" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦅</a> <a id="3996" href="Chapter.Imp.BigStep.html#3929" class="Bound">x</a> <a id="3998" href="Chapter.Imp.BigStep.html#1571" class="InductiveConstructor Operator">:=</a> <a id="4001" href="Chapter.Imp.BigStep.html#3931" class="Bound">a</a> <a id="4003" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">,</a> <a id="4005" href="Chapter.Imp.BigStep.html#3933" class="Bound">s</a> <a id="4007" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦆</a> <a id="4009" href="Chapter.Imp.BigStep.html#3810" class="Datatype Operator">⇒</a> <a id="4011" class="Symbol">(</a><a id="4012" href="Chapter.Imp.BigStep.html#3933" class="Bound">s</a> <a id="4014" href="Chapter.Imp.AexpBexp.html#3405" class="Function Operator">[</a> <a id="4016" href="Chapter.Imp.BigStep.html#3929" class="Bound">x</a> <a id="4018" href="Chapter.Imp.AexpBexp.html#3405" class="Function Operator">::=</a> <a id="4022" href="Chapter.Imp.AexpBexp.html#3910" class="Function">aval</a> <a id="4027" href="Chapter.Imp.BigStep.html#3931" class="Bound">a</a> <a id="4029" href="Chapter.Imp.BigStep.html#3933" class="Bound">s</a> <a id="4031" href="Chapter.Imp.AexpBexp.html#3405" class="Function Operator">]</a><a id="4032" class="Symbol">)</a>

    <a id="_⇒_.Comp"></a><a id="4039" href="Chapter.Imp.BigStep.html#4039" class="InductiveConstructor">Comp</a> <a id="4044" class="Symbol">:</a> <a id="4046" class="Symbol">∀{</a><a id="4048" href="Chapter.Imp.BigStep.html#4048" class="Bound">c₁</a> <a id="4051" href="Chapter.Imp.BigStep.html#4051" class="Bound">c₂</a> <a id="4054" href="Chapter.Imp.BigStep.html#4054" class="Bound">s₁</a> <a id="4057" href="Chapter.Imp.BigStep.html#4057" class="Bound">s₂</a> <a id="4060" href="Chapter.Imp.BigStep.html#4060" class="Bound">s₃</a><a id="4062" class="Symbol">}</a>
         <a id="4073" class="Symbol">→</a> <a id="4075" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦅</a> <a id="4077" href="Chapter.Imp.BigStep.html#4048" class="Bound">c₁</a> <a id="4080" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">,</a> <a id="4082" href="Chapter.Imp.BigStep.html#4054" class="Bound">s₁</a> <a id="4085" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦆</a> <a id="4087" href="Chapter.Imp.BigStep.html#3810" class="Datatype Operator">⇒</a> <a id="4089" href="Chapter.Imp.BigStep.html#4057" class="Bound">s₂</a>
         <a id="4101" class="Symbol">→</a> <a id="4103" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦅</a> <a id="4105" href="Chapter.Imp.BigStep.html#4051" class="Bound">c₂</a> <a id="4108" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">,</a> <a id="4110" href="Chapter.Imp.BigStep.html#4057" class="Bound">s₂</a> <a id="4113" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦆</a> <a id="4115" href="Chapter.Imp.BigStep.html#3810" class="Datatype Operator">⇒</a> <a id="4117" href="Chapter.Imp.BigStep.html#4060" class="Bound">s₃</a>
           <a id="4131" class="Comment">--------------------</a>
         <a id="4161" class="Symbol">→</a> <a id="4163" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦅</a> <a id="4165" href="Chapter.Imp.BigStep.html#4048" class="Bound">c₁</a> <a id="4168" href="Chapter.Imp.BigStep.html#1627" class="InductiveConstructor Operator">::</a> <a id="4171" href="Chapter.Imp.BigStep.html#4051" class="Bound">c₂</a> <a id="4174" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">,</a> <a id="4176" href="Chapter.Imp.BigStep.html#4054" class="Bound">s₁</a> <a id="4179" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦆</a> <a id="4181" href="Chapter.Imp.BigStep.html#3810" class="Datatype Operator">⇒</a> <a id="4183" href="Chapter.Imp.BigStep.html#4060" class="Bound">s₃</a>
       
    <a id="_⇒_.IfTrue"></a><a id="4198" href="Chapter.Imp.BigStep.html#4198" class="InductiveConstructor">IfTrue</a> <a id="4205" class="Symbol">:</a> <a id="4207" class="Symbol">∀{</a><a id="4209" href="Chapter.Imp.BigStep.html#4209" class="Bound">c₁</a> <a id="4212" href="Chapter.Imp.BigStep.html#4212" class="Bound">c₂</a> <a id="4215" href="Chapter.Imp.BigStep.html#4215" class="Bound">b</a> <a id="4217" href="Chapter.Imp.BigStep.html#4217" class="Bound">s</a> <a id="4219" href="Chapter.Imp.BigStep.html#4219" class="Bound">t</a><a id="4220" class="Symbol">}</a>
           <a id="4233" class="Symbol">→</a> <a id="4235" href="Chapter.Imp.AexpBexp.html#10249" class="Function">bval</a> <a id="4240" href="Chapter.Imp.BigStep.html#4215" class="Bound">b</a> <a id="4242" href="Chapter.Imp.BigStep.html#4217" class="Bound">s</a> <a id="4244" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="4247" href="Library.Bool.html#52" class="InductiveConstructor">true</a>
           <a id="4263" class="Symbol">→</a> <a id="4265" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦅</a> <a id="4267" href="Chapter.Imp.BigStep.html#4209" class="Bound">c₁</a> <a id="4270" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">,</a> <a id="4272" href="Chapter.Imp.BigStep.html#4217" class="Bound">s</a> <a id="4274" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦆</a> <a id="4276" href="Chapter.Imp.BigStep.html#3810" class="Datatype Operator">⇒</a> <a id="4278" href="Chapter.Imp.BigStep.html#4219" class="Bound">t</a>
             <a id="4293" class="Comment">-------------------------------</a>
           <a id="4336" class="Symbol">→</a> <a id="4338" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦅</a> <a id="4340" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">IF</a> <a id="4343" href="Chapter.Imp.BigStep.html#4215" class="Bound">b</a> <a id="4345" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">THEN</a> <a id="4350" href="Chapter.Imp.BigStep.html#4209" class="Bound">c₁</a> <a id="4353" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">ELSE</a> <a id="4358" href="Chapter.Imp.BigStep.html#4212" class="Bound">c₂</a> <a id="4361" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">,</a> <a id="4363" href="Chapter.Imp.BigStep.html#4217" class="Bound">s</a> <a id="4365" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦆</a> <a id="4367" href="Chapter.Imp.BigStep.html#3810" class="Datatype Operator">⇒</a> <a id="4369" href="Chapter.Imp.BigStep.html#4219" class="Bound">t</a>
         
    <a id="_⇒_.IfFalse"></a><a id="4385" href="Chapter.Imp.BigStep.html#4385" class="InductiveConstructor">IfFalse</a> <a id="4393" class="Symbol">:</a> <a id="4395" class="Symbol">∀{</a><a id="4397" href="Chapter.Imp.BigStep.html#4397" class="Bound">c₁</a> <a id="4400" href="Chapter.Imp.BigStep.html#4400" class="Bound">c₂</a> <a id="4403" href="Chapter.Imp.BigStep.html#4403" class="Bound">b</a> <a id="4405" href="Chapter.Imp.BigStep.html#4405" class="Bound">s</a> <a id="4407" href="Chapter.Imp.BigStep.html#4407" class="Bound">t</a><a id="4408" class="Symbol">}</a>
            <a id="4422" class="Symbol">→</a> <a id="4424" href="Chapter.Imp.AexpBexp.html#10249" class="Function">bval</a> <a id="4429" href="Chapter.Imp.BigStep.html#4403" class="Bound">b</a> <a id="4431" href="Chapter.Imp.BigStep.html#4405" class="Bound">s</a> <a id="4433" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="4436" href="Library.Bool.html#57" class="InductiveConstructor">false</a>
            <a id="4454" class="Symbol">→</a> <a id="4456" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦅</a> <a id="4458" href="Chapter.Imp.BigStep.html#4400" class="Bound">c₂</a> <a id="4461" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">,</a> <a id="4463" href="Chapter.Imp.BigStep.html#4405" class="Bound">s</a> <a id="4465" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦆</a> <a id="4467" href="Chapter.Imp.BigStep.html#3810" class="Datatype Operator">⇒</a> <a id="4469" href="Chapter.Imp.BigStep.html#4407" class="Bound">t</a>
              <a id="4485" class="Comment">-------------------------------</a>
            <a id="4529" class="Symbol">→</a> <a id="4531" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦅</a> <a id="4533" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">IF</a> <a id="4536" href="Chapter.Imp.BigStep.html#4403" class="Bound">b</a> <a id="4538" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">THEN</a> <a id="4543" href="Chapter.Imp.BigStep.html#4397" class="Bound">c₁</a> <a id="4546" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">ELSE</a> <a id="4551" href="Chapter.Imp.BigStep.html#4400" class="Bound">c₂</a> <a id="4554" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">,</a> <a id="4556" href="Chapter.Imp.BigStep.html#4405" class="Bound">s</a> <a id="4558" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦆</a> <a id="4560" href="Chapter.Imp.BigStep.html#3810" class="Datatype Operator">⇒</a> <a id="4562" href="Chapter.Imp.BigStep.html#4407" class="Bound">t</a>

    <a id="_⇒_.WhileFalse"></a><a id="4569" href="Chapter.Imp.BigStep.html#4569" class="InductiveConstructor">WhileFalse</a> <a id="4580" class="Symbol">:</a> <a id="4582" class="Symbol">∀{</a><a id="4584" href="Chapter.Imp.BigStep.html#4584" class="Bound">c</a> <a id="4586" href="Chapter.Imp.BigStep.html#4586" class="Bound">b</a> <a id="4588" href="Chapter.Imp.BigStep.html#4588" class="Bound">s</a><a id="4589" class="Symbol">}</a>
               <a id="4606" class="Symbol">→</a> <a id="4608" href="Chapter.Imp.AexpBexp.html#10249" class="Function">bval</a> <a id="4613" href="Chapter.Imp.BigStep.html#4586" class="Bound">b</a> <a id="4615" href="Chapter.Imp.BigStep.html#4588" class="Bound">s</a> <a id="4617" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="4620" href="Library.Bool.html#57" class="InductiveConstructor">false</a>
                 <a id="4643" class="Comment">-----------------------</a>
               <a id="4682" class="Symbol">→</a> <a id="4684" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦅</a> <a id="4686" href="Chapter.Imp.BigStep.html#1738" class="InductiveConstructor Operator">WHILE</a> <a id="4692" href="Chapter.Imp.BigStep.html#4586" class="Bound">b</a> <a id="4694" href="Chapter.Imp.BigStep.html#1738" class="InductiveConstructor Operator">DO</a> <a id="4697" href="Chapter.Imp.BigStep.html#4584" class="Bound">c</a> <a id="4699" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">,</a> <a id="4701" href="Chapter.Imp.BigStep.html#4588" class="Bound">s</a> <a id="4703" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦆</a> <a id="4705" href="Chapter.Imp.BigStep.html#3810" class="Datatype Operator">⇒</a> <a id="4707" href="Chapter.Imp.BigStep.html#4588" class="Bound">s</a>
             
    <a id="_⇒_.WhileTrue"></a><a id="4727" href="Chapter.Imp.BigStep.html#4727" class="InductiveConstructor">WhileTrue</a>  <a id="4738" class="Symbol">:</a> <a id="4740" class="Symbol">∀{</a><a id="4742" href="Chapter.Imp.BigStep.html#4742" class="Bound">c</a> <a id="4744" href="Chapter.Imp.BigStep.html#4744" class="Bound">b</a> <a id="4746" href="Chapter.Imp.BigStep.html#4746" class="Bound">s₁</a> <a id="4749" href="Chapter.Imp.BigStep.html#4749" class="Bound">s₂</a> <a id="4752" href="Chapter.Imp.BigStep.html#4752" class="Bound">s₃</a><a id="4754" class="Symbol">}</a>
               <a id="4771" class="Symbol">→</a> <a id="4773" href="Chapter.Imp.AexpBexp.html#10249" class="Function">bval</a> <a id="4778" href="Chapter.Imp.BigStep.html#4744" class="Bound">b</a> <a id="4780" href="Chapter.Imp.BigStep.html#4746" class="Bound">s₁</a> <a id="4783" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="4786" href="Library.Bool.html#52" class="InductiveConstructor">true</a>
               <a id="4806" class="Symbol">→</a> <a id="4808" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦅</a> <a id="4810" href="Chapter.Imp.BigStep.html#4742" class="Bound">c</a> <a id="4812" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">,</a> <a id="4814" href="Chapter.Imp.BigStep.html#4746" class="Bound">s₁</a> <a id="4817" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦆</a> <a id="4819" href="Chapter.Imp.BigStep.html#3810" class="Datatype Operator">⇒</a> <a id="4821" href="Chapter.Imp.BigStep.html#4749" class="Bound">s₂</a>
               <a id="4839" class="Symbol">→</a> <a id="4841" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦅</a> <a id="4843" href="Chapter.Imp.BigStep.html#1738" class="InductiveConstructor Operator">WHILE</a> <a id="4849" href="Chapter.Imp.BigStep.html#4744" class="Bound">b</a> <a id="4851" href="Chapter.Imp.BigStep.html#1738" class="InductiveConstructor Operator">DO</a> <a id="4854" href="Chapter.Imp.BigStep.html#4742" class="Bound">c</a> <a id="4856" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">,</a> <a id="4858" href="Chapter.Imp.BigStep.html#4749" class="Bound">s₂</a> <a id="4861" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦆</a> <a id="4863" href="Chapter.Imp.BigStep.html#3810" class="Datatype Operator">⇒</a> <a id="4865" href="Chapter.Imp.BigStep.html#4752" class="Bound">s₃</a>
                 <a id="4885" class="Comment">------------------------</a>
               <a id="4925" class="Symbol">→</a> <a id="4927" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦅</a> <a id="4929" href="Chapter.Imp.BigStep.html#1738" class="InductiveConstructor Operator">WHILE</a> <a id="4935" href="Chapter.Imp.BigStep.html#4744" class="Bound">b</a> <a id="4937" href="Chapter.Imp.BigStep.html#1738" class="InductiveConstructor Operator">DO</a> <a id="4940" href="Chapter.Imp.BigStep.html#4742" class="Bound">c</a> <a id="4942" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">,</a> <a id="4944" href="Chapter.Imp.BigStep.html#4746" class="Bound">s₁</a> <a id="4947" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦆</a> <a id="4949" href="Chapter.Imp.BigStep.html#3810" class="Datatype Operator">⇒</a> <a id="4951" href="Chapter.Imp.BigStep.html#4752" class="Bound">s₃</a>

<a id="4955" class="Keyword">infix</a> <a id="4961" class="Number">10</a> <a id="4964" href="Chapter.Imp.BigStep.html#3810" class="Datatype Operator">_⇒_</a>
</pre>
<h2 id="properties">Properties</h2>

<p>First we show that the convergence predicate is non trivial, namely that
there exist commands that do not produce any final state as the result of their execution;
the simplest ones are of the shape <code class="language-plaintext highlighter-rouge">WHILE B true DO c </code>, for any <code class="language-plaintext highlighter-rouge">c ∈ Com</code>.</p>

<pre class="Agda"><a id="lemma-while-true"></a><a id="5233" href="Chapter.Imp.BigStep.html#5233" class="Function">lemma-while-true</a> <a id="5250" class="Symbol">:</a> <a id="5252" class="Symbol">∀</a> <a id="5254" class="Symbol">{</a><a id="5255" href="Chapter.Imp.BigStep.html#5255" class="Bound">c</a> <a id="5257" class="Symbol">:</a> <a id="5259" href="Chapter.Imp.BigStep.html#1498" class="Datatype">Com</a><a id="5262" class="Symbol">}</a> <a id="5264" class="Symbol">{</a><a id="5265" href="Chapter.Imp.BigStep.html#5265" class="Bound">s</a> <a id="5267" href="Chapter.Imp.BigStep.html#5267" class="Bound">t</a> <a id="5269" class="Symbol">:</a> <a id="5271" href="Chapter.Imp.AexpBexp.html#2404" class="Function">State</a><a id="5276" class="Symbol">}</a> <a id="5278" class="Symbol">→</a>
               <a id="5295" href="Library.Logic.html#1496" class="Function Operator">¬</a> <a id="5297" class="Symbol">(</a><a id="5298" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦅</a> <a id="5300" href="Chapter.Imp.BigStep.html#1738" class="InductiveConstructor Operator">WHILE</a> <a id="5306" href="Chapter.Imp.AexpBexp.html#9405" class="InductiveConstructor">B</a> <a id="5308" href="Library.Bool.html#52" class="InductiveConstructor">true</a> <a id="5313" href="Chapter.Imp.BigStep.html#1738" class="InductiveConstructor Operator">DO</a> <a id="5316" href="Chapter.Imp.BigStep.html#5255" class="Bound">c</a> <a id="5318" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">,</a> <a id="5320" href="Chapter.Imp.BigStep.html#5265" class="Bound">s</a> <a id="5322" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦆</a> <a id="5324" href="Chapter.Imp.BigStep.html#3810" class="Datatype Operator">⇒</a> <a id="5326" href="Chapter.Imp.BigStep.html#5267" class="Bound">t</a><a id="5327" class="Symbol">)</a>

<a id="5330" href="Chapter.Imp.BigStep.html#5233" class="Function">lemma-while-true</a> <a id="5347" class="Symbol">(</a><a id="5348" href="Chapter.Imp.BigStep.html#4727" class="InductiveConstructor">WhileTrue</a> <a id="5358" href="Chapter.Imp.BigStep.html#5358" class="Bound">x</a> <a id="5360" href="Chapter.Imp.BigStep.html#5360" class="Bound">hyp1</a> <a id="5365" href="Chapter.Imp.BigStep.html#5365" class="Bound">hyp2</a><a id="5369" class="Symbol">)</a> <a id="5371" class="Symbol">=</a> <a id="5373" href="Chapter.Imp.BigStep.html#5233" class="Function">lemma-while-true</a> <a id="5390" href="Chapter.Imp.BigStep.html#5365" class="Bound">hyp2</a>
</pre>
<p>The proof of this lemma is by contradiction, showing that if there were a proof of
<code class="language-plaintext highlighter-rouge">⦅ WHILE B true DO c , s ⦆ ⇒ t</code> then an absurdity would follow.
It depends on the hypotheses</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    hyp1 : ⦅ c , s ⦆ ⇒ s₂
    hyp2 : ⦅ WHILE B true DO c , s₂ ⦆ ⇒ t
</code></pre></div></div>

<p>where <code class="language-plaintext highlighter-rouge">s₂ : State</code> is automatically generated by Agda. In particular
<code class="language-plaintext highlighter-rouge">hyp2</code> is the hypothetical derivation of a statement that has exactly the same
shape of the absurd hypothesis; nonetheless the induction hypothesis</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   lemma-while-true hyp2 : ⊥
</code></pre></div></div>

<p>is perfectly legal and accepted by Agda. The reason is that the proof is not by
induction over the command <code class="language-plaintext highlighter-rouge">WHILE B true DO c </code>, rather it is on
the derivation of the absurd hypothesis. As a final remark let us observe that
this is <strong>not</strong> a <em>reductio ad absurdum</em>, which is intuitionistically invalid, but
just the proof of a negative statement <code class="language-plaintext highlighter-rouge">¬ A</code> that is an abbreviation of
the implication <code class="language-plaintext highlighter-rouge">A → ⊥</code>.</p>

<p>A more relevant property of convergence is that it is <strong>deterministic</strong>: whenever
<code class="language-plaintext highlighter-rouge">⦅ c , s ⦆ ⇒ t</code> is derivable for some <code class="language-plaintext highlighter-rouge">⦅ c , s ⦆ ∈ Config</code> and <code class="language-plaintext highlighter-rouge">t ∈ State</code> the <code class="language-plaintext highlighter-rouge">t</code> is unique.
Before proving the theorem we need two lemmas.</p>

<pre class="Agda"><a id="true-neq-false"></a><a id="6539" href="Chapter.Imp.BigStep.html#6539" class="Function">true-neq-false</a> <a id="6554" class="Symbol">:</a> <a id="6556" href="Library.Logic.html#1496" class="Function Operator">¬</a> <a id="6558" class="Symbol">(</a><a id="6559" href="Library.Bool.html#52" class="InductiveConstructor">true</a> <a id="6564" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="6567" href="Library.Bool.html#57" class="InductiveConstructor">false</a><a id="6572" class="Symbol">)</a>
<a id="6574" href="Chapter.Imp.BigStep.html#6539" class="Function">true-neq-false</a> <a id="6589" class="Symbol">=</a> <a id="6591" class="Symbol">λ</a> <a id="6593" class="Symbol">()</a>

<a id="lemma-true-neq-false"></a><a id="6597" href="Chapter.Imp.BigStep.html#6597" class="Function">lemma-true-neq-false</a> <a id="6618" class="Symbol">:</a> <a id="6620" class="Symbol">∀</a> <a id="6622" class="Symbol">{</a><a id="6623" href="Chapter.Imp.BigStep.html#6623" class="Bound">A</a> <a id="6625" class="Symbol">:</a> <a id="6627" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="6630" class="Symbol">}</a> <a id="6632" class="Symbol">→</a> <a id="6634" href="Library.Bool.html#52" class="InductiveConstructor">true</a> <a id="6639" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="6642" href="Library.Bool.html#57" class="InductiveConstructor">false</a> <a id="6648" class="Symbol">→</a> <a id="6650" href="Chapter.Imp.BigStep.html#6623" class="Bound">A</a>
<a id="6652" href="Chapter.Imp.BigStep.html#6597" class="Function">lemma-true-neq-false</a> <a id="6673" href="Chapter.Imp.BigStep.html#6673" class="Bound">x</a> <a id="6675" class="Symbol">=</a> <a id="6677" href="Library.Logic.Laws.html#173" class="Function">ex-falso</a> <a id="6686" class="Symbol">(</a><a id="6687" href="Chapter.Imp.BigStep.html#6539" class="Function">true-neq-false</a> <a id="6702" href="Chapter.Imp.BigStep.html#6673" class="Bound">x</a><a id="6703" class="Symbol">)</a>
</pre>
<p>In terms of Agda these are <em>helper functions</em> to abbreviate the proof of
the following theorem.</p>

<pre class="Agda"><a id="theorem-deterministic"></a><a id="6811" href="Chapter.Imp.BigStep.html#6811" class="Function">theorem-deterministic</a> <a id="6833" class="Symbol">:</a> <a id="6835" class="Symbol">∀</a> <a id="6837" class="Symbol">{</a><a id="6838" href="Chapter.Imp.BigStep.html#6838" class="Bound">c</a> <a id="6840" class="Symbol">:</a> <a id="6842" href="Chapter.Imp.BigStep.html#1498" class="Datatype">Com</a><a id="6845" class="Symbol">}</a> <a id="6847" class="Symbol">{</a><a id="6848" href="Chapter.Imp.BigStep.html#6848" class="Bound">s</a> <a id="6850" href="Chapter.Imp.BigStep.html#6850" class="Bound">t</a> <a id="6852" href="Chapter.Imp.BigStep.html#6852" class="Bound">t&#39;</a> <a id="6855" class="Symbol">:</a> <a id="6857" href="Chapter.Imp.AexpBexp.html#2404" class="Function">State</a><a id="6862" class="Symbol">}</a> <a id="6864" class="Symbol">→</a>
                          <a id="6892" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦅</a> <a id="6894" href="Chapter.Imp.BigStep.html#6838" class="Bound">c</a> <a id="6896" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">,</a> <a id="6898" href="Chapter.Imp.BigStep.html#6848" class="Bound">s</a> <a id="6900" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦆</a> <a id="6902" href="Chapter.Imp.BigStep.html#3810" class="Datatype Operator">⇒</a> <a id="6904" href="Chapter.Imp.BigStep.html#6850" class="Bound">t</a> <a id="6906" class="Symbol">→</a> <a id="6908" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦅</a> <a id="6910" href="Chapter.Imp.BigStep.html#6838" class="Bound">c</a> <a id="6912" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">,</a> <a id="6914" href="Chapter.Imp.BigStep.html#6848" class="Bound">s</a> <a id="6916" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦆</a> <a id="6918" href="Chapter.Imp.BigStep.html#3810" class="Datatype Operator">⇒</a> <a id="6920" href="Chapter.Imp.BigStep.html#6852" class="Bound">t&#39;</a> <a id="6923" class="Symbol">→</a> <a id="6925" href="Chapter.Imp.BigStep.html#6850" class="Bound">t</a> <a id="6927" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="6930" href="Chapter.Imp.BigStep.html#6852" class="Bound">t&#39;</a>
                          
<a id="6960" href="Chapter.Imp.BigStep.html#6811" class="Function">theorem-deterministic</a> <a id="6982" href="Chapter.Imp.BigStep.html#3849" class="InductiveConstructor">Skip</a> <a id="6987" href="Chapter.Imp.BigStep.html#3849" class="InductiveConstructor">Skip</a> <a id="6992" class="Symbol">=</a> <a id="6994" href="Library.Equality.html#125" class="InductiveConstructor">refl</a>
<a id="6999" href="Chapter.Imp.BigStep.html#6811" class="Function">theorem-deterministic</a> <a id="7021" href="Chapter.Imp.BigStep.html#3921" class="InductiveConstructor">Loc</a> <a id="7025" href="Chapter.Imp.BigStep.html#3921" class="InductiveConstructor">Loc</a> <a id="7029" class="Symbol">=</a> <a id="7031" href="Library.Equality.html#125" class="InductiveConstructor">refl</a>
<a id="7036" href="Chapter.Imp.BigStep.html#6811" class="Function">theorem-deterministic</a> <a id="7058" class="Symbol">(</a><a id="7059" href="Chapter.Imp.BigStep.html#4039" class="InductiveConstructor">Comp</a> <a id="7064" href="Chapter.Imp.BigStep.html#7064" class="Bound">hyp1</a> <a id="7069" href="Chapter.Imp.BigStep.html#7069" class="Bound">hyp3</a><a id="7073" class="Symbol">)</a> <a id="7075" class="Symbol">(</a><a id="7076" href="Chapter.Imp.BigStep.html#4039" class="InductiveConstructor">Comp</a> <a id="7081" href="Chapter.Imp.BigStep.html#7081" class="Bound">hyp2</a> <a id="7086" href="Chapter.Imp.BigStep.html#7086" class="Bound">hyp4</a><a id="7090" class="Symbol">)</a>
         <a id="7101" class="Keyword">rewrite</a> <a id="7109" href="Chapter.Imp.BigStep.html#6811" class="Function">theorem-deterministic</a> <a id="7131" href="Chapter.Imp.BigStep.html#7064" class="Bound">hyp1</a> <a id="7136" href="Chapter.Imp.BigStep.html#7081" class="Bound">hyp2</a> <a id="7141" class="Symbol">|</a>
                 <a id="7160" href="Chapter.Imp.BigStep.html#6811" class="Function">theorem-deterministic</a> <a id="7182" href="Chapter.Imp.BigStep.html#7069" class="Bound">hyp3</a> <a id="7187" href="Chapter.Imp.BigStep.html#7086" class="Bound">hyp4</a> <a id="7192" class="Symbol">=</a> <a id="7194" href="Library.Equality.html#125" class="InductiveConstructor">refl</a>
<a id="7199" href="Chapter.Imp.BigStep.html#6811" class="Function">theorem-deterministic</a> <a id="7221" class="Symbol">(</a><a id="7222" href="Chapter.Imp.BigStep.html#4198" class="InductiveConstructor">IfTrue</a> <a id="7229" href="Chapter.Imp.BigStep.html#7229" class="Bound">x</a> <a id="7231" href="Chapter.Imp.BigStep.html#7231" class="Bound">hyp1</a><a id="7235" class="Symbol">)</a> <a id="7237" class="Symbol">(</a><a id="7238" href="Chapter.Imp.BigStep.html#4198" class="InductiveConstructor">IfTrue</a> <a id="7245" href="Chapter.Imp.BigStep.html#7245" class="Bound">y</a> <a id="7247" href="Chapter.Imp.BigStep.html#7247" class="Bound">hyp2</a><a id="7251" class="Symbol">)</a>
         <a id="7262" class="Keyword">rewrite</a> <a id="7270" href="Chapter.Imp.BigStep.html#6811" class="Function">theorem-deterministic</a> <a id="7292" href="Chapter.Imp.BigStep.html#7231" class="Bound">hyp1</a> <a id="7297" href="Chapter.Imp.BigStep.html#7247" class="Bound">hyp2</a> <a id="7302" class="Symbol">=</a> <a id="7304" href="Library.Equality.html#125" class="InductiveConstructor">refl</a>
<a id="7309" href="Chapter.Imp.BigStep.html#6811" class="Function">theorem-deterministic</a> <a id="7331" class="Symbol">(</a><a id="7332" href="Chapter.Imp.BigStep.html#4198" class="InductiveConstructor">IfTrue</a> <a id="7339" href="Chapter.Imp.BigStep.html#7339" class="Bound">x</a> <a id="7341" href="Chapter.Imp.BigStep.html#7341" class="Bound">hyp1</a><a id="7345" class="Symbol">)</a> <a id="7347" class="Symbol">(</a><a id="7348" href="Chapter.Imp.BigStep.html#4385" class="InductiveConstructor">IfFalse</a> <a id="7356" href="Chapter.Imp.BigStep.html#7356" class="Bound">y</a> <a id="7358" href="Chapter.Imp.BigStep.html#7358" class="Bound">hyp2</a><a id="7362" class="Symbol">)</a>
                     <a id="7385" class="Symbol">=</a> <a id="7387" href="Chapter.Imp.BigStep.html#6597" class="Function">lemma-true-neq-false</a> <a id="7408" href="Chapter.Imp.BigStep.html#7439" class="Function">abs</a>
         <a id="7421" class="Keyword">where</a>
            <a id="7439" href="Chapter.Imp.BigStep.html#7439" class="Function">abs</a> <a id="7443" class="Symbol">:</a> <a id="7445" href="Library.Bool.html#52" class="InductiveConstructor">true</a> <a id="7450" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="7453" href="Library.Bool.html#57" class="InductiveConstructor">false</a>
            <a id="7471" href="Chapter.Imp.BigStep.html#7439" class="Function">abs</a> <a id="7475" class="Symbol">=</a> <a id="7477" href="Library.Equality.html#291" class="Function">tran</a> <a id="7482" class="Symbol">(</a><a id="7483" href="Library.Equality.html#226" class="Function">symm</a> <a id="7488" href="Chapter.Imp.BigStep.html#7339" class="Bound">x</a><a id="7489" class="Symbol">)</a> <a id="7491" href="Chapter.Imp.BigStep.html#7356" class="Bound">y</a>
<a id="7493" href="Chapter.Imp.BigStep.html#6811" class="Function">theorem-deterministic</a> <a id="7515" class="Symbol">(</a><a id="7516" href="Chapter.Imp.BigStep.html#4385" class="InductiveConstructor">IfFalse</a> <a id="7524" href="Chapter.Imp.BigStep.html#7524" class="Bound">x</a> <a id="7526" href="Chapter.Imp.BigStep.html#7526" class="Bound">hyp1</a><a id="7530" class="Symbol">)</a> <a id="7532" class="Symbol">(</a><a id="7533" href="Chapter.Imp.BigStep.html#4198" class="InductiveConstructor">IfTrue</a> <a id="7540" href="Chapter.Imp.BigStep.html#7540" class="Bound">y</a> <a id="7542" href="Chapter.Imp.BigStep.html#7542" class="Bound">hyp2</a><a id="7546" class="Symbol">)</a>
                     <a id="7569" class="Symbol">=</a> <a id="7571" href="Chapter.Imp.BigStep.html#6597" class="Function">lemma-true-neq-false</a> <a id="7592" href="Chapter.Imp.BigStep.html#7623" class="Function">abs</a>
         <a id="7605" class="Keyword">where</a>
            <a id="7623" href="Chapter.Imp.BigStep.html#7623" class="Function">abs</a> <a id="7627" class="Symbol">:</a> <a id="7629" href="Library.Bool.html#52" class="InductiveConstructor">true</a> <a id="7634" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="7637" href="Library.Bool.html#57" class="InductiveConstructor">false</a>
            <a id="7655" href="Chapter.Imp.BigStep.html#7623" class="Function">abs</a> <a id="7659" class="Symbol">=</a> <a id="7661" href="Library.Equality.html#291" class="Function">tran</a> <a id="7666" class="Symbol">(</a><a id="7667" href="Library.Equality.html#226" class="Function">symm</a> <a id="7672" href="Chapter.Imp.BigStep.html#7540" class="Bound">y</a><a id="7673" class="Symbol">)</a> <a id="7675" href="Chapter.Imp.BigStep.html#7524" class="Bound">x</a>
<a id="7677" href="Chapter.Imp.BigStep.html#6811" class="Function">theorem-deterministic</a> <a id="7699" class="Symbol">(</a><a id="7700" href="Chapter.Imp.BigStep.html#4385" class="InductiveConstructor">IfFalse</a> <a id="7708" href="Chapter.Imp.BigStep.html#7708" class="Bound">x</a> <a id="7710" href="Chapter.Imp.BigStep.html#7710" class="Bound">hyp1</a><a id="7714" class="Symbol">)</a> <a id="7716" class="Symbol">(</a><a id="7717" href="Chapter.Imp.BigStep.html#4385" class="InductiveConstructor">IfFalse</a> <a id="7725" href="Chapter.Imp.BigStep.html#7725" class="Bound">y</a> <a id="7727" href="Chapter.Imp.BigStep.html#7727" class="Bound">hyp2</a><a id="7731" class="Symbol">)</a>
         <a id="7742" class="Keyword">rewrite</a> <a id="7750" href="Chapter.Imp.BigStep.html#6811" class="Function">theorem-deterministic</a> <a id="7772" href="Chapter.Imp.BigStep.html#7710" class="Bound">hyp1</a> <a id="7777" href="Chapter.Imp.BigStep.html#7727" class="Bound">hyp2</a> <a id="7782" class="Symbol">=</a> <a id="7784" href="Library.Equality.html#125" class="InductiveConstructor">refl</a>
<a id="7789" href="Chapter.Imp.BigStep.html#6811" class="Function">theorem-deterministic</a> <a id="7811" class="Symbol">(</a><a id="7812" href="Chapter.Imp.BigStep.html#4569" class="InductiveConstructor">WhileFalse</a> <a id="7823" href="Chapter.Imp.BigStep.html#7823" class="Bound">x</a><a id="7824" class="Symbol">)</a> <a id="7826" class="Symbol">(</a><a id="7827" href="Chapter.Imp.BigStep.html#4569" class="InductiveConstructor">WhileFalse</a> <a id="7838" href="Chapter.Imp.BigStep.html#7838" class="Bound">y</a><a id="7839" class="Symbol">)</a> <a id="7841" class="Symbol">=</a> <a id="7843" href="Library.Equality.html#125" class="InductiveConstructor">refl</a>
<a id="7848" href="Chapter.Imp.BigStep.html#6811" class="Function">theorem-deterministic</a> <a id="7870" class="Symbol">(</a><a id="7871" href="Chapter.Imp.BigStep.html#4569" class="InductiveConstructor">WhileFalse</a> <a id="7882" href="Chapter.Imp.BigStep.html#7882" class="Bound">x</a><a id="7883" class="Symbol">)</a> <a id="7885" class="Symbol">(</a><a id="7886" href="Chapter.Imp.BigStep.html#4727" class="InductiveConstructor">WhileTrue</a> <a id="7896" href="Chapter.Imp.BigStep.html#7896" class="Bound">y</a> <a id="7898" href="Chapter.Imp.BigStep.html#7898" class="Bound">hyp2</a> <a id="7903" href="Chapter.Imp.BigStep.html#7903" class="Bound">hyp3</a><a id="7907" class="Symbol">)</a>
                     <a id="7930" class="Symbol">=</a> <a id="7932" href="Chapter.Imp.BigStep.html#6597" class="Function">lemma-true-neq-false</a> <a id="7953" href="Chapter.Imp.BigStep.html#7984" class="Function">abs</a>
         <a id="7966" class="Keyword">where</a>
            <a id="7984" href="Chapter.Imp.BigStep.html#7984" class="Function">abs</a> <a id="7988" class="Symbol">:</a> <a id="7990" href="Library.Bool.html#52" class="InductiveConstructor">true</a> <a id="7995" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="7998" href="Library.Bool.html#57" class="InductiveConstructor">false</a>
            <a id="8016" href="Chapter.Imp.BigStep.html#7984" class="Function">abs</a> <a id="8020" class="Symbol">=</a> <a id="8022" href="Library.Equality.html#291" class="Function">tran</a> <a id="8027" class="Symbol">(</a><a id="8028" href="Library.Equality.html#226" class="Function">symm</a> <a id="8033" href="Chapter.Imp.BigStep.html#7896" class="Bound">y</a><a id="8034" class="Symbol">)</a> <a id="8036" href="Chapter.Imp.BigStep.html#7882" class="Bound">x</a> 
<a id="8039" href="Chapter.Imp.BigStep.html#6811" class="Function">theorem-deterministic</a> <a id="8061" class="Symbol">(</a><a id="8062" href="Chapter.Imp.BigStep.html#4727" class="InductiveConstructor">WhileTrue</a> <a id="8072" href="Chapter.Imp.BigStep.html#8072" class="Bound">x</a> <a id="8074" href="Chapter.Imp.BigStep.html#8074" class="Bound">hyp1</a> <a id="8079" href="Chapter.Imp.BigStep.html#8079" class="Bound">hyp3</a><a id="8083" class="Symbol">)</a> <a id="8085" class="Symbol">(</a><a id="8086" href="Chapter.Imp.BigStep.html#4569" class="InductiveConstructor">WhileFalse</a> <a id="8097" href="Chapter.Imp.BigStep.html#8097" class="Bound">y</a><a id="8098" class="Symbol">)</a>
                     <a id="8121" class="Symbol">=</a> <a id="8123" href="Chapter.Imp.BigStep.html#6597" class="Function">lemma-true-neq-false</a> <a id="8144" href="Chapter.Imp.BigStep.html#8175" class="Function">abs</a>
         <a id="8157" class="Keyword">where</a>
            <a id="8175" href="Chapter.Imp.BigStep.html#8175" class="Function">abs</a> <a id="8179" class="Symbol">:</a> <a id="8181" href="Library.Bool.html#52" class="InductiveConstructor">true</a> <a id="8186" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="8189" href="Library.Bool.html#57" class="InductiveConstructor">false</a>
            <a id="8207" href="Chapter.Imp.BigStep.html#8175" class="Function">abs</a> <a id="8211" class="Symbol">=</a> <a id="8213" href="Library.Equality.html#291" class="Function">tran</a> <a id="8218" class="Symbol">(</a><a id="8219" href="Library.Equality.html#226" class="Function">symm</a> <a id="8224" href="Chapter.Imp.BigStep.html#8072" class="Bound">x</a><a id="8225" class="Symbol">)</a> <a id="8227" href="Chapter.Imp.BigStep.html#8097" class="Bound">y</a>
<a id="8229" href="Chapter.Imp.BigStep.html#6811" class="Function">theorem-deterministic</a> <a id="8251" class="Symbol">(</a><a id="8252" href="Chapter.Imp.BigStep.html#4727" class="InductiveConstructor">WhileTrue</a> <a id="8262" href="Chapter.Imp.BigStep.html#8262" class="Bound">x</a> <a id="8264" href="Chapter.Imp.BigStep.html#8264" class="Bound">hyp1</a> <a id="8269" href="Chapter.Imp.BigStep.html#8269" class="Bound">hyp3</a><a id="8273" class="Symbol">)</a> <a id="8275" class="Symbol">(</a><a id="8276" href="Chapter.Imp.BigStep.html#4727" class="InductiveConstructor">WhileTrue</a> <a id="8286" href="Chapter.Imp.BigStep.html#8286" class="Bound">y</a> <a id="8288" href="Chapter.Imp.BigStep.html#8288" class="Bound">hyp2</a> <a id="8293" href="Chapter.Imp.BigStep.html#8293" class="Bound">hyp4</a><a id="8297" class="Symbol">)</a>
         <a id="8308" class="Keyword">rewrite</a> <a id="8316" href="Chapter.Imp.BigStep.html#6811" class="Function">theorem-deterministic</a> <a id="8338" href="Chapter.Imp.BigStep.html#8264" class="Bound">hyp1</a> <a id="8343" href="Chapter.Imp.BigStep.html#8288" class="Bound">hyp2</a> <a id="8348" class="Symbol">|</a>
                 <a id="8367" href="Chapter.Imp.BigStep.html#6811" class="Function">theorem-deterministic</a> <a id="8389" href="Chapter.Imp.BigStep.html#8269" class="Bound">hyp3</a> <a id="8394" href="Chapter.Imp.BigStep.html#8293" class="Bound">hyp4</a> <a id="8399" class="Symbol">=</a> <a id="8401" href="Library.Equality.html#125" class="InductiveConstructor">refl</a>
</pre>
<p>In spite of its intimidating aspect, this proof is a simple symultaneous induction over
the derivations of the hypotheses <code class="language-plaintext highlighter-rouge">⦅ c , s ⦆ ⇒ t</code> and <code class="language-plaintext highlighter-rouge">⦅ c , s ⦆ ⇒ t'</code>. Whenever an induction
hypothesis is needed we use the tactic <code class="language-plaintext highlighter-rouge">rewrite</code> possibly sequencing two hypotheses by means
of the stroke <code class="language-plaintext highlighter-rouge">|</code>.
The most involved parts in the proof are when treating impossible cases. For example when we have</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     IfTrue  x hyp1 : ⦅ IF b THEN c₁ ELSE c₂ , s ⦆ ⇒ t
     IfFalse y hyp2 : ⦅ IF b THEN c₁ ELSE c₂ , s ⦆ ⇒ t'
</code></pre></div></div>

<p>it must be the case that <code class="language-plaintext highlighter-rouge">x : bval b s == true</code> and <code class="language-plaintext highlighter-rouge">y : bval b s == false</code>. But this leads
to the contradiction <code class="language-plaintext highlighter-rouge">abs : true == false</code> since <code class="language-plaintext highlighter-rouge">b ∈ Bexp</code> and <code class="language-plaintext highlighter-rouge">s ∈ State</code> are the same
in both types. Then by means of <code class="language-plaintext highlighter-rouge">true-neq-false</code> and the use of the logical law <code class="language-plaintext highlighter-rouge">ex-falso</code>
(from the library file Logic.Law.agda):</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     ex-falso : ∀ {A : Set} → ⊥ → A  -- ex falso quodlibet
     ex-falso = λ ()
</code></pre></div></div>

<p>in the proof of <code class="language-plaintext highlighter-rouge">lemma-true-neq-false</code> we can vacuously prove the thesis, as it depends
on an absurd hypothesis.</p>

<h2 id="equivalence">Equivalence</h2>

<p>We say that two commands <code class="language-plaintext highlighter-rouge">c, c' ∈ Com</code> are <strong>equivalent</strong> if for all <code class="language-plaintext highlighter-rouge">s ∈ State</code> the
computations of <code class="language-plaintext highlighter-rouge">⦅c , s⦆</code> and <code class="language-plaintext highlighter-rouge">⦅c' , s⦆</code> either both diverge (namely do not converge to any
final state) or it is <code class="language-plaintext highlighter-rouge">⦅c , s⦆ ⇒ t</code> and <code class="language-plaintext highlighter-rouge">⦅c' , s⦆ ⇒ t</code> for the same <code class="language-plaintext highlighter-rouge">t ∈ State</code>. Formally</p>

<pre class="Agda"><a id="_∼_"></a><a id="9728" href="Chapter.Imp.BigStep.html#9728" class="Function Operator">_∼_</a> <a id="9732" class="Symbol">:</a> <a id="9734" href="Chapter.Imp.BigStep.html#1498" class="Datatype">Com</a> <a id="9738" class="Symbol">→</a> <a id="9740" href="Chapter.Imp.BigStep.html#1498" class="Datatype">Com</a> <a id="9744" class="Symbol">→</a> <a id="9746" href="Agda.Primitive.html#326" class="Primitive">Set</a>     <a id="9754" class="Comment">-- the symbol ∼ is written \sim</a>

<a id="9787" href="Chapter.Imp.BigStep.html#9787" class="Bound">c</a> <a id="9789" href="Chapter.Imp.BigStep.html#9728" class="Function Operator">∼</a> <a id="9791" href="Chapter.Imp.BigStep.html#9791" class="Bound">c&#39;</a> <a id="9794" class="Symbol">=</a> <a id="9796" class="Symbol">∀{</a><a id="9798" href="Chapter.Imp.BigStep.html#9798" class="Bound">s</a> <a id="9800" href="Chapter.Imp.BigStep.html#9800" class="Bound">t</a><a id="9801" class="Symbol">}</a> <a id="9803" class="Symbol">→</a> <a id="9805" class="Symbol">(</a> <a id="9807" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦅</a> <a id="9809" href="Chapter.Imp.BigStep.html#9787" class="Bound">c</a> <a id="9811" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">,</a> <a id="9813" href="Chapter.Imp.BigStep.html#9798" class="Bound">s</a>  <a id="9816" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦆</a> <a id="9818" href="Chapter.Imp.BigStep.html#3810" class="Datatype Operator">⇒</a> <a id="9820" href="Chapter.Imp.BigStep.html#9800" class="Bound">t</a> <a id="9822" class="Symbol">→</a> <a id="9824" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦅</a> <a id="9826" href="Chapter.Imp.BigStep.html#9791" class="Bound">c&#39;</a> <a id="9829" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">,</a> <a id="9831" href="Chapter.Imp.BigStep.html#9798" class="Bound">s</a> <a id="9833" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦆</a> <a id="9835" href="Chapter.Imp.BigStep.html#3810" class="Datatype Operator">⇒</a> <a id="9837" href="Chapter.Imp.BigStep.html#9800" class="Bound">t</a> <a id="9839" class="Symbol">)</a> <a id="9841" href="Library.Logic.html#1349" class="Function Operator">∧</a>
                  <a id="9861" class="Symbol">(</a> <a id="9863" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦅</a> <a id="9865" href="Chapter.Imp.BigStep.html#9791" class="Bound">c&#39;</a> <a id="9868" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">,</a> <a id="9870" href="Chapter.Imp.BigStep.html#9798" class="Bound">s</a>  <a id="9873" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦆</a> <a id="9875" href="Chapter.Imp.BigStep.html#3810" class="Datatype Operator">⇒</a> <a id="9877" href="Chapter.Imp.BigStep.html#9800" class="Bound">t</a> <a id="9879" class="Symbol">→</a> <a id="9881" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦅</a> <a id="9883" href="Chapter.Imp.BigStep.html#9787" class="Bound">c</a> <a id="9885" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">,</a> <a id="9887" href="Chapter.Imp.BigStep.html#9798" class="Bound">s</a> <a id="9889" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦆</a> <a id="9891" href="Chapter.Imp.BigStep.html#3810" class="Datatype Operator">⇒</a> <a id="9893" href="Chapter.Imp.BigStep.html#9800" class="Bound">t</a> <a id="9895" class="Symbol">)</a>

<a id="9898" class="Keyword">infixl</a> <a id="9905" class="Number">19</a> <a id="9908" href="Chapter.Imp.BigStep.html#9728" class="Function Operator">_∼_</a>
</pre>
<p>Command equivalence is useful when optimizing code, by replacing redundant or inefficient
parts by shorter or more efficient ones. In this section we show some examples; the first
one justifies the simplification of <code class="language-plaintext highlighter-rouge">IF B true THEN c ELSE c'</code> by <code class="language-plaintext highlighter-rouge">c</code>.</p>

<pre class="Agda"><a id="lemma-if-true"></a><a id="10173" href="Chapter.Imp.BigStep.html#10173" class="Function">lemma-if-true</a> <a id="10187" class="Symbol">:</a> <a id="10189" class="Symbol">∀</a> <a id="10191" class="Symbol">(</a><a id="10192" href="Chapter.Imp.BigStep.html#10192" class="Bound">c</a> <a id="10194" href="Chapter.Imp.BigStep.html#10194" class="Bound">c&#39;</a> <a id="10197" class="Symbol">:</a> <a id="10199" href="Chapter.Imp.BigStep.html#1498" class="Datatype">Com</a><a id="10202" class="Symbol">)</a> <a id="10204" class="Symbol">→</a>
                <a id="10222" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">IF</a> <a id="10225" href="Chapter.Imp.AexpBexp.html#9405" class="InductiveConstructor">B</a> <a id="10227" href="Library.Bool.html#52" class="InductiveConstructor">true</a> <a id="10232" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">THEN</a> <a id="10237" href="Chapter.Imp.BigStep.html#10192" class="Bound">c</a> <a id="10239" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">ELSE</a> <a id="10244" href="Chapter.Imp.BigStep.html#10194" class="Bound">c&#39;</a> <a id="10247" href="Chapter.Imp.BigStep.html#9728" class="Function Operator">∼</a> <a id="10249" href="Chapter.Imp.BigStep.html#10192" class="Bound">c</a>
                
<a id="10268" href="Chapter.Imp.BigStep.html#10173" class="Function">lemma-if-true</a> <a id="10282" href="Chapter.Imp.BigStep.html#10282" class="Bound">c</a> <a id="10284" href="Chapter.Imp.BigStep.html#10284" class="Bound">c&#39;</a> <a id="10287" class="Symbol">{</a><a id="10288" href="Chapter.Imp.BigStep.html#10288" class="Bound">s</a><a id="10289" class="Symbol">}</a> <a id="10291" class="Symbol">{</a><a id="10292" href="Chapter.Imp.BigStep.html#10292" class="Bound">t</a><a id="10293" class="Symbol">}</a> <a id="10295" class="Symbol">=</a> <a id="10297" href="Chapter.Imp.BigStep.html#10341" class="Function">only-if-part</a> <a id="10310" href="Library.Logic.html#271" class="InductiveConstructor Operator">,</a> <a id="10312" href="Chapter.Imp.BigStep.html#10463" class="Function">if-part</a>
      <a id="10326" class="Keyword">where</a>
         <a id="10341" href="Chapter.Imp.BigStep.html#10341" class="Function">only-if-part</a> <a id="10354" class="Symbol">:</a>  <a id="10357" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦅</a> <a id="10359" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">IF</a> <a id="10362" href="Chapter.Imp.AexpBexp.html#9405" class="InductiveConstructor">B</a> <a id="10364" href="Library.Bool.html#52" class="InductiveConstructor">true</a> <a id="10369" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">THEN</a> <a id="10374" href="Chapter.Imp.BigStep.html#10282" class="Bound">c</a> <a id="10376" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">ELSE</a> <a id="10381" href="Chapter.Imp.BigStep.html#10284" class="Bound">c&#39;</a> <a id="10384" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">,</a> <a id="10386" href="Chapter.Imp.BigStep.html#10288" class="Bound">s</a> <a id="10388" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦆</a> <a id="10390" href="Chapter.Imp.BigStep.html#3810" class="Datatype Operator">⇒</a> <a id="10392" href="Chapter.Imp.BigStep.html#10292" class="Bound">t</a> <a id="10394" class="Symbol">→</a> <a id="10396" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦅</a> <a id="10398" href="Chapter.Imp.BigStep.html#10282" class="Bound">c</a> <a id="10400" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">,</a> <a id="10402" href="Chapter.Imp.BigStep.html#10288" class="Bound">s</a> <a id="10404" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦆</a> <a id="10406" href="Chapter.Imp.BigStep.html#3810" class="Datatype Operator">⇒</a> <a id="10408" href="Chapter.Imp.BigStep.html#10292" class="Bound">t</a>
         <a id="10419" href="Chapter.Imp.BigStep.html#10341" class="Function">only-if-part</a> <a id="10432" class="Symbol">(</a><a id="10433" href="Chapter.Imp.BigStep.html#4198" class="InductiveConstructor">IfTrue</a> <a id="10440" href="Chapter.Imp.BigStep.html#10440" class="Bound">x</a> <a id="10442" href="Chapter.Imp.BigStep.html#10442" class="Bound">hyp</a><a id="10445" class="Symbol">)</a> <a id="10447" class="Symbol">=</a> <a id="10449" href="Chapter.Imp.BigStep.html#10442" class="Bound">hyp</a>

         <a id="10463" href="Chapter.Imp.BigStep.html#10463" class="Function">if-part</a> <a id="10471" class="Symbol">:</a> <a id="10473" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦅</a> <a id="10475" href="Chapter.Imp.BigStep.html#10282" class="Bound">c</a> <a id="10477" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">,</a> <a id="10479" href="Chapter.Imp.BigStep.html#10288" class="Bound">s</a> <a id="10481" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦆</a> <a id="10483" href="Chapter.Imp.BigStep.html#3810" class="Datatype Operator">⇒</a> <a id="10485" href="Chapter.Imp.BigStep.html#10292" class="Bound">t</a> <a id="10487" class="Symbol">→</a> <a id="10489" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦅</a> <a id="10491" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">IF</a> <a id="10494" href="Chapter.Imp.AexpBexp.html#9405" class="InductiveConstructor">B</a> <a id="10496" href="Library.Bool.html#52" class="InductiveConstructor">true</a> <a id="10501" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">THEN</a> <a id="10506" href="Chapter.Imp.BigStep.html#10282" class="Bound">c</a> <a id="10508" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">ELSE</a> <a id="10513" href="Chapter.Imp.BigStep.html#10284" class="Bound">c&#39;</a> <a id="10516" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">,</a> <a id="10518" href="Chapter.Imp.BigStep.html#10288" class="Bound">s</a> <a id="10520" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦆</a> <a id="10522" href="Chapter.Imp.BigStep.html#3810" class="Datatype Operator">⇒</a> <a id="10524" href="Chapter.Imp.BigStep.html#10292" class="Bound">t</a>
         <a id="10535" href="Chapter.Imp.BigStep.html#10463" class="Function">if-part</a> <a id="10543" href="Chapter.Imp.BigStep.html#10543" class="Bound">hyp</a> <a id="10547" class="Symbol">=</a> <a id="10549" href="Chapter.Imp.BigStep.html#4198" class="InductiveConstructor">IfTrue</a> <a id="10556" href="Library.Equality.html#125" class="InductiveConstructor">refl</a> <a id="10561" href="Chapter.Imp.BigStep.html#10543" class="Bound">hyp</a>
</pre>
<p>A slightly more complex example is the proof that whenever the branches
of a conditional are the same, the conditional itself can be removed:</p>

<pre class="Agda"><a id="lemma-if-c-c"></a><a id="10717" href="Chapter.Imp.BigStep.html#10717" class="Function">lemma-if-c-c</a> <a id="10730" class="Symbol">:</a> <a id="10732" class="Symbol">∀</a> <a id="10734" class="Symbol">(</a><a id="10735" href="Chapter.Imp.BigStep.html#10735" class="Bound">b</a> <a id="10737" class="Symbol">:</a> <a id="10739" href="Chapter.Imp.AexpBexp.html#9385" class="Datatype">Bexp</a><a id="10743" class="Symbol">)</a> <a id="10745" class="Symbol">(</a><a id="10746" href="Chapter.Imp.BigStep.html#10746" class="Bound">c</a> <a id="10748" class="Symbol">:</a> <a id="10750" href="Chapter.Imp.BigStep.html#1498" class="Datatype">Com</a><a id="10753" class="Symbol">)</a> <a id="10755" class="Symbol">→</a>
               <a id="10772" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">IF</a> <a id="10775" href="Chapter.Imp.BigStep.html#10735" class="Bound">b</a> <a id="10777" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">THEN</a> <a id="10782" href="Chapter.Imp.BigStep.html#10746" class="Bound">c</a> <a id="10784" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">ELSE</a> <a id="10789" href="Chapter.Imp.BigStep.html#10746" class="Bound">c</a> <a id="10791" href="Chapter.Imp.BigStep.html#9728" class="Function Operator">∼</a> <a id="10793" href="Chapter.Imp.BigStep.html#10746" class="Bound">c</a>

<a id="10796" href="Chapter.Imp.BigStep.html#10717" class="Function">lemma-if-c-c</a> <a id="10809" href="Chapter.Imp.BigStep.html#10809" class="Bound">b</a> <a id="10811" href="Chapter.Imp.BigStep.html#10811" class="Bound">c</a> <a id="10813" class="Symbol">{</a><a id="10814" href="Chapter.Imp.BigStep.html#10814" class="Bound">s</a><a id="10815" class="Symbol">}</a> <a id="10817" class="Symbol">{</a><a id="10818" href="Chapter.Imp.BigStep.html#10818" class="Bound">t</a><a id="10819" class="Symbol">}</a> <a id="10821" class="Symbol">=</a> <a id="10823" href="Chapter.Imp.BigStep.html#10867" class="Function">only-if-part</a> <a id="10836" href="Library.Logic.html#271" class="InductiveConstructor Operator">,</a> <a id="10838" href="Chapter.Imp.BigStep.html#11027" class="Function">if-part</a>
      <a id="10852" class="Keyword">where</a>
         <a id="10867" href="Chapter.Imp.BigStep.html#10867" class="Function">only-if-part</a> <a id="10880" class="Symbol">:</a> <a id="10882" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦅</a> <a id="10884" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">IF</a> <a id="10887" href="Chapter.Imp.BigStep.html#10809" class="Bound">b</a> <a id="10889" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">THEN</a> <a id="10894" href="Chapter.Imp.BigStep.html#10811" class="Bound">c</a> <a id="10896" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">ELSE</a> <a id="10901" href="Chapter.Imp.BigStep.html#10811" class="Bound">c</a> <a id="10903" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">,</a> <a id="10905" href="Chapter.Imp.BigStep.html#10814" class="Bound">s</a> <a id="10907" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦆</a> <a id="10909" href="Chapter.Imp.BigStep.html#3810" class="Datatype Operator">⇒</a> <a id="10911" href="Chapter.Imp.BigStep.html#10818" class="Bound">t</a> <a id="10913" class="Symbol">→</a> <a id="10915" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦅</a> <a id="10917" href="Chapter.Imp.BigStep.html#10811" class="Bound">c</a> <a id="10919" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">,</a> <a id="10921" href="Chapter.Imp.BigStep.html#10814" class="Bound">s</a> <a id="10923" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦆</a> <a id="10925" href="Chapter.Imp.BigStep.html#3810" class="Datatype Operator">⇒</a> <a id="10927" href="Chapter.Imp.BigStep.html#10818" class="Bound">t</a>
         <a id="10938" href="Chapter.Imp.BigStep.html#10867" class="Function">only-if-part</a> <a id="10951" class="Symbol">(</a><a id="10952" href="Chapter.Imp.BigStep.html#4198" class="InductiveConstructor">IfTrue</a>  <a id="10960" href="Chapter.Imp.BigStep.html#10960" class="Bound">x</a> <a id="10962" href="Chapter.Imp.BigStep.html#10962" class="Bound">hyp</a><a id="10965" class="Symbol">)</a> <a id="10967" class="Symbol">=</a> <a id="10969" href="Chapter.Imp.BigStep.html#10962" class="Bound">hyp</a>
         <a id="10982" href="Chapter.Imp.BigStep.html#10867" class="Function">only-if-part</a> <a id="10995" class="Symbol">(</a><a id="10996" href="Chapter.Imp.BigStep.html#4385" class="InductiveConstructor">IfFalse</a> <a id="11004" href="Chapter.Imp.BigStep.html#11004" class="Bound">x</a> <a id="11006" href="Chapter.Imp.BigStep.html#11006" class="Bound">hyp</a><a id="11009" class="Symbol">)</a> <a id="11011" class="Symbol">=</a> <a id="11013" href="Chapter.Imp.BigStep.html#11006" class="Bound">hyp</a>

         <a id="11027" href="Chapter.Imp.BigStep.html#11027" class="Function">if-part</a> <a id="11035" class="Symbol">:</a>  <a id="11038" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦅</a> <a id="11040" href="Chapter.Imp.BigStep.html#10811" class="Bound">c</a> <a id="11042" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">,</a> <a id="11044" href="Chapter.Imp.BigStep.html#10814" class="Bound">s</a> <a id="11046" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦆</a> <a id="11048" href="Chapter.Imp.BigStep.html#3810" class="Datatype Operator">⇒</a> <a id="11050" href="Chapter.Imp.BigStep.html#10818" class="Bound">t</a> <a id="11052" class="Symbol">→</a> <a id="11054" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦅</a> <a id="11056" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">IF</a> <a id="11059" href="Chapter.Imp.BigStep.html#10809" class="Bound">b</a> <a id="11061" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">THEN</a> <a id="11066" href="Chapter.Imp.BigStep.html#10811" class="Bound">c</a> <a id="11068" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">ELSE</a> <a id="11073" href="Chapter.Imp.BigStep.html#10811" class="Bound">c</a> <a id="11075" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">,</a> <a id="11077" href="Chapter.Imp.BigStep.html#10814" class="Bound">s</a> <a id="11079" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦆</a> <a id="11081" href="Chapter.Imp.BigStep.html#3810" class="Datatype Operator">⇒</a> <a id="11083" href="Chapter.Imp.BigStep.html#10818" class="Bound">t</a>
         <a id="11094" href="Chapter.Imp.BigStep.html#11027" class="Function">if-part</a> <a id="11102" href="Chapter.Imp.BigStep.html#11102" class="Bound">hyp</a> <a id="11106" class="Keyword">with</a> <a id="11111" href="Chapter.Imp.AexpBexp.html#11537" class="Function">lemma-bval-tot</a> <a id="11126" href="Chapter.Imp.BigStep.html#10809" class="Bound">b</a> <a id="11128" href="Chapter.Imp.BigStep.html#10814" class="Bound">s</a>
         <a id="11139" class="Symbol">...</a> <a id="11143" class="Symbol">|</a> <a id="11145" href="Library.Logic.html#1446" class="InductiveConstructor">inl</a> <a id="11149" href="Chapter.Imp.BigStep.html#11149" class="Bound">x</a> <a id="11151" class="Symbol">=</a> <a id="11153" href="Chapter.Imp.BigStep.html#4198" class="InductiveConstructor">IfTrue</a> <a id="11160" href="Chapter.Imp.BigStep.html#11149" class="Bound">x</a> <a id="11162" class="Bound">hyp</a>
         <a id="11175" class="Symbol">...</a> <a id="11179" class="Symbol">|</a> <a id="11181" href="Library.Logic.html#1465" class="InductiveConstructor">inr</a> <a id="11185" href="Chapter.Imp.BigStep.html#11185" class="Bound">x</a> <a id="11187" class="Symbol">=</a> <a id="11189" href="Chapter.Imp.BigStep.html#4385" class="InductiveConstructor">IfFalse</a> <a id="11197" href="Chapter.Imp.BigStep.html#11185" class="Bound">x</a> <a id="11199" class="Bound">hyp</a>
</pre>
<p>In the proof of the if-part we use the lemma</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  lemma-bval-tot : ∀ (b : Bexp) (s : State) →
                   bval b s == true ∨ bval b s == false
</code></pre></div></div>

<p>from the chapter 
<a href="/pages/Chapter.Imp.AexpBexp.html">Arithmetic and boolean expressions</a> 
(see the solution of exercise 2) stating that given any
<code class="language-plaintext highlighter-rouge">s ∈ State</code> the value of <code class="language-plaintext highlighter-rouge">b ∈ Bexp</code> is always computable and it is either <code class="language-plaintext highlighter-rouge">true</code> or
<code class="language-plaintext highlighter-rouge">false</code>; then we can select the proper rule among <code class="language-plaintext highlighter-rouge">IfTrue</code> and <code class="language-plaintext highlighter-rouge">IfFalse</code> to derive
<code class="language-plaintext highlighter-rouge">⦅ IF b THEN c ELSE c , s ⦆ ⇒ t</code> from <code class="language-plaintext highlighter-rouge">hyp</code>
Notice that <code class="language-plaintext highlighter-rouge">lemma-bval-tot b s</code> is a proof of a disjunction, which
explains the alternative cases in the <code class="language-plaintext highlighter-rouge">with</code> clause.</p>

<h2 id="exercises">Exercises</h2>

<ol>
  <li>
    <p>Prove the lemma</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  lemma-if-false : ∀ (c c' : Com) → IF B false THEN c ELSE c' ∼ c'
</code></pre></div>    </div>
  </li>
  <li>
    <p>Prove the lemma</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  lemma-while-false-skip : ∀ {c} → WHILE B false DO c ∼ SKIP
</code></pre></div>    </div>
  </li>
  <li>
    <p>Prove the lemma</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  lemma-while-if : ∀ (b : Bexp) (c : Com) →
         (WHILE b DO c) ∼ (IF b THEN (c :: (WHILE b DO c)) ELSE SKIP)
</code></pre></div>    </div>
  </li>
</ol>

<p>Hint: you might use implicit arguments in the proofs as in the previous lemmas.</p>

<pre class="Agda solution"><a id="12302" class="Comment">-- EXERCISE 1</a>

<a id="lemma-if-false"></a><a id="12317" href="Chapter.Imp.BigStep.html#12317" class="Function">lemma-if-false</a> <a id="12332" class="Symbol">:</a> <a id="12334" class="Symbol">∀</a> <a id="12336" class="Symbol">(</a><a id="12337" href="Chapter.Imp.BigStep.html#12337" class="Bound">c</a> <a id="12339" href="Chapter.Imp.BigStep.html#12339" class="Bound">c&#39;</a> <a id="12342" class="Symbol">:</a> <a id="12344" href="Chapter.Imp.BigStep.html#1498" class="Datatype">Com</a><a id="12347" class="Symbol">)</a> <a id="12349" class="Symbol">→</a>
                <a id="12367" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">IF</a> <a id="12370" href="Chapter.Imp.AexpBexp.html#9405" class="InductiveConstructor">B</a> <a id="12372" href="Library.Bool.html#57" class="InductiveConstructor">false</a> <a id="12378" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">THEN</a> <a id="12383" href="Chapter.Imp.BigStep.html#12337" class="Bound">c</a> <a id="12385" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">ELSE</a> <a id="12390" href="Chapter.Imp.BigStep.html#12339" class="Bound">c&#39;</a> <a id="12393" href="Chapter.Imp.BigStep.html#9728" class="Function Operator">∼</a> <a id="12395" href="Chapter.Imp.BigStep.html#12339" class="Bound">c&#39;</a>

<a id="12399" href="Chapter.Imp.BigStep.html#12317" class="Function">lemma-if-false</a> <a id="12414" href="Chapter.Imp.BigStep.html#12414" class="Bound">c</a> <a id="12416" href="Chapter.Imp.BigStep.html#12416" class="Bound">c&#39;</a> <a id="12419" class="Symbol">{</a><a id="12420" href="Chapter.Imp.BigStep.html#12420" class="Bound">s</a><a id="12421" class="Symbol">}</a> <a id="12423" class="Symbol">{</a><a id="12424" href="Chapter.Imp.BigStep.html#12424" class="Bound">t</a><a id="12425" class="Symbol">}</a> <a id="12427" class="Symbol">=</a> <a id="12429" href="Chapter.Imp.BigStep.html#12473" class="Function">only-if-part</a> <a id="12442" href="Library.Logic.html#271" class="InductiveConstructor Operator">,</a> <a id="12444" href="Chapter.Imp.BigStep.html#12597" class="Function">if-part</a>
      <a id="12458" class="Keyword">where</a>
         <a id="12473" href="Chapter.Imp.BigStep.html#12473" class="Function">only-if-part</a> <a id="12486" class="Symbol">:</a> <a id="12488" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦅</a> <a id="12490" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">IF</a> <a id="12493" href="Chapter.Imp.AexpBexp.html#9405" class="InductiveConstructor">B</a> <a id="12495" href="Library.Bool.html#57" class="InductiveConstructor">false</a> <a id="12501" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">THEN</a> <a id="12506" href="Chapter.Imp.BigStep.html#12414" class="Bound">c</a> <a id="12508" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">ELSE</a> <a id="12513" href="Chapter.Imp.BigStep.html#12416" class="Bound">c&#39;</a> <a id="12516" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">,</a> <a id="12518" href="Chapter.Imp.BigStep.html#12420" class="Bound">s</a> <a id="12520" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦆</a> <a id="12522" href="Chapter.Imp.BigStep.html#3810" class="Datatype Operator">⇒</a> <a id="12524" href="Chapter.Imp.BigStep.html#12424" class="Bound">t</a> <a id="12526" class="Symbol">→</a> <a id="12528" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦅</a> <a id="12530" href="Chapter.Imp.BigStep.html#12416" class="Bound">c&#39;</a> <a id="12533" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">,</a> <a id="12535" href="Chapter.Imp.BigStep.html#12420" class="Bound">s</a> <a id="12537" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦆</a> <a id="12539" href="Chapter.Imp.BigStep.html#3810" class="Datatype Operator">⇒</a> <a id="12541" href="Chapter.Imp.BigStep.html#12424" class="Bound">t</a>
         <a id="12552" href="Chapter.Imp.BigStep.html#12473" class="Function">only-if-part</a> <a id="12565" class="Symbol">(</a><a id="12566" href="Chapter.Imp.BigStep.html#4385" class="InductiveConstructor">IfFalse</a> <a id="12574" href="Chapter.Imp.BigStep.html#12574" class="Bound">x</a> <a id="12576" href="Chapter.Imp.BigStep.html#12576" class="Bound">hyp</a><a id="12579" class="Symbol">)</a> <a id="12581" class="Symbol">=</a> <a id="12583" href="Chapter.Imp.BigStep.html#12576" class="Bound">hyp</a>

         <a id="12597" href="Chapter.Imp.BigStep.html#12597" class="Function">if-part</a> <a id="12605" class="Symbol">:</a> <a id="12607" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦅</a> <a id="12609" href="Chapter.Imp.BigStep.html#12416" class="Bound">c&#39;</a> <a id="12612" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">,</a> <a id="12614" href="Chapter.Imp.BigStep.html#12420" class="Bound">s</a> <a id="12616" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦆</a> <a id="12618" href="Chapter.Imp.BigStep.html#3810" class="Datatype Operator">⇒</a> <a id="12620" href="Chapter.Imp.BigStep.html#12424" class="Bound">t</a> <a id="12622" class="Symbol">→</a> <a id="12624" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦅</a> <a id="12626" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">IF</a> <a id="12629" href="Chapter.Imp.AexpBexp.html#9405" class="InductiveConstructor">B</a> <a id="12631" href="Library.Bool.html#57" class="InductiveConstructor">false</a> <a id="12637" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">THEN</a> <a id="12642" href="Chapter.Imp.BigStep.html#12414" class="Bound">c</a> <a id="12644" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">ELSE</a> <a id="12649" href="Chapter.Imp.BigStep.html#12416" class="Bound">c&#39;</a> <a id="12652" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">,</a> <a id="12654" href="Chapter.Imp.BigStep.html#12420" class="Bound">s</a> <a id="12656" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦆</a> <a id="12658" href="Chapter.Imp.BigStep.html#3810" class="Datatype Operator">⇒</a> <a id="12660" href="Chapter.Imp.BigStep.html#12424" class="Bound">t</a>
         <a id="12671" href="Chapter.Imp.BigStep.html#12597" class="Function">if-part</a> <a id="12679" href="Chapter.Imp.BigStep.html#12679" class="Bound">hyp</a> <a id="12683" class="Symbol">=</a> <a id="12685" href="Chapter.Imp.BigStep.html#4385" class="InductiveConstructor">IfFalse</a> <a id="12693" href="Library.Equality.html#125" class="InductiveConstructor">refl</a> <a id="12698" href="Chapter.Imp.BigStep.html#12679" class="Bound">hyp</a>


<a id="12704" class="Comment">-- EXERCISE 2</a>

<a id="lemma-while-false-skip"></a><a id="12719" href="Chapter.Imp.BigStep.html#12719" class="Function">lemma-while-false-skip</a> <a id="12742" class="Symbol">:</a> <a id="12744" class="Symbol">∀</a> <a id="12746" class="Symbol">{</a><a id="12747" href="Chapter.Imp.BigStep.html#12747" class="Bound">c</a><a id="12748" class="Symbol">}</a> <a id="12750" class="Symbol">→</a> <a id="12752" href="Chapter.Imp.BigStep.html#1738" class="InductiveConstructor Operator">WHILE</a> <a id="12758" href="Chapter.Imp.AexpBexp.html#9405" class="InductiveConstructor">B</a> <a id="12760" href="Library.Bool.html#57" class="InductiveConstructor">false</a> <a id="12766" href="Chapter.Imp.BigStep.html#1738" class="InductiveConstructor Operator">DO</a> <a id="12769" href="Chapter.Imp.BigStep.html#12747" class="Bound">c</a> <a id="12771" href="Chapter.Imp.BigStep.html#9728" class="Function Operator">∼</a> <a id="12773" href="Chapter.Imp.BigStep.html#1516" class="InductiveConstructor">SKIP</a>

<a id="12779" href="Chapter.Imp.BigStep.html#12719" class="Function">lemma-while-false-skip</a> <a id="12802" class="Symbol">{</a><a id="12803" href="Chapter.Imp.BigStep.html#12803" class="Bound">c</a><a id="12804" class="Symbol">}</a> <a id="12806" class="Symbol">{</a><a id="12807" href="Chapter.Imp.BigStep.html#12807" class="Bound">s</a><a id="12808" class="Symbol">}</a> <a id="12810" class="Symbol">{</a><a id="12811" href="Chapter.Imp.BigStep.html#12811" class="Bound">t</a><a id="12812" class="Symbol">}</a> <a id="12814" class="Symbol">=</a> <a id="12816" href="Chapter.Imp.BigStep.html#12860" class="Function">only-if-part</a> <a id="12829" href="Library.Logic.html#271" class="InductiveConstructor Operator">,</a> <a id="12831" href="Chapter.Imp.BigStep.html#12979" class="Function">if-part</a>
      <a id="12845" class="Keyword">where</a>
         <a id="12860" href="Chapter.Imp.BigStep.html#12860" class="Function">only-if-part</a> <a id="12873" class="Symbol">:</a> <a id="12875" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦅</a> <a id="12877" href="Chapter.Imp.BigStep.html#1738" class="InductiveConstructor Operator">WHILE</a> <a id="12883" href="Chapter.Imp.AexpBexp.html#9405" class="InductiveConstructor">B</a> <a id="12885" href="Library.Bool.html#57" class="InductiveConstructor">false</a> <a id="12891" href="Chapter.Imp.BigStep.html#1738" class="InductiveConstructor Operator">DO</a> <a id="12894" href="Chapter.Imp.BigStep.html#12803" class="Bound">c</a> <a id="12896" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">,</a> <a id="12898" href="Chapter.Imp.BigStep.html#12807" class="Bound">s</a> <a id="12900" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦆</a> <a id="12902" href="Chapter.Imp.BigStep.html#3810" class="Datatype Operator">⇒</a> <a id="12904" href="Chapter.Imp.BigStep.html#12811" class="Bound">t</a> <a id="12906" class="Symbol">→</a> <a id="12908" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦅</a> <a id="12910" href="Chapter.Imp.BigStep.html#1516" class="InductiveConstructor">SKIP</a> <a id="12915" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">,</a> <a id="12917" href="Chapter.Imp.BigStep.html#12807" class="Bound">s</a> <a id="12919" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦆</a> <a id="12921" href="Chapter.Imp.BigStep.html#3810" class="Datatype Operator">⇒</a> <a id="12923" href="Chapter.Imp.BigStep.html#12811" class="Bound">t</a>
         <a id="12934" href="Chapter.Imp.BigStep.html#12860" class="Function">only-if-part</a> <a id="12947" class="Symbol">(</a><a id="12948" href="Chapter.Imp.BigStep.html#4569" class="InductiveConstructor">WhileFalse</a> <a id="12959" href="Chapter.Imp.BigStep.html#12959" class="Bound">x</a><a id="12960" class="Symbol">)</a> <a id="12962" class="Symbol">=</a> <a id="12964" href="Chapter.Imp.BigStep.html#3849" class="InductiveConstructor">Skip</a>

         <a id="12979" href="Chapter.Imp.BigStep.html#12979" class="Function">if-part</a> <a id="12987" class="Symbol">:</a> <a id="12989" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦅</a> <a id="12991" href="Chapter.Imp.BigStep.html#1516" class="InductiveConstructor">SKIP</a> <a id="12996" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">,</a> <a id="12998" href="Chapter.Imp.BigStep.html#12807" class="Bound">s</a> <a id="13000" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦆</a> <a id="13002" href="Chapter.Imp.BigStep.html#3810" class="Datatype Operator">⇒</a> <a id="13004" href="Chapter.Imp.BigStep.html#12811" class="Bound">t</a> <a id="13006" class="Symbol">→</a> <a id="13008" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦅</a> <a id="13010" href="Chapter.Imp.BigStep.html#1738" class="InductiveConstructor Operator">WHILE</a> <a id="13016" href="Chapter.Imp.AexpBexp.html#9405" class="InductiveConstructor">B</a> <a id="13018" href="Library.Bool.html#57" class="InductiveConstructor">false</a> <a id="13024" href="Chapter.Imp.BigStep.html#1738" class="InductiveConstructor Operator">DO</a> <a id="13027" href="Chapter.Imp.BigStep.html#12803" class="Bound">c</a> <a id="13029" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">,</a> <a id="13031" href="Chapter.Imp.BigStep.html#12807" class="Bound">s</a> <a id="13033" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦆</a> <a id="13035" href="Chapter.Imp.BigStep.html#3810" class="Datatype Operator">⇒</a> <a id="13037" href="Chapter.Imp.BigStep.html#12811" class="Bound">t</a> 
         <a id="13049" href="Chapter.Imp.BigStep.html#12979" class="Function">if-part</a> <a id="13057" href="Chapter.Imp.BigStep.html#3849" class="InductiveConstructor">Skip</a> <a id="13062" class="Symbol">=</a> <a id="13064" href="Chapter.Imp.BigStep.html#4569" class="InductiveConstructor">WhileFalse</a> <a id="13075" href="Library.Equality.html#125" class="InductiveConstructor">refl</a>

<a id="13081" class="Comment">-- EXERCISE 3</a>

<a id="lemma-while-if"></a><a id="13096" href="Chapter.Imp.BigStep.html#13096" class="Function">lemma-while-if</a> <a id="13111" class="Symbol">:</a> <a id="13113" class="Symbol">∀</a> <a id="13115" class="Symbol">(</a><a id="13116" href="Chapter.Imp.BigStep.html#13116" class="Bound">b</a> <a id="13118" class="Symbol">:</a> <a id="13120" href="Chapter.Imp.AexpBexp.html#9385" class="Datatype">Bexp</a><a id="13124" class="Symbol">)</a> <a id="13126" class="Symbol">(</a><a id="13127" href="Chapter.Imp.BigStep.html#13127" class="Bound">c</a> <a id="13129" class="Symbol">:</a> <a id="13131" href="Chapter.Imp.BigStep.html#1498" class="Datatype">Com</a><a id="13134" class="Symbol">)</a> <a id="13136" class="Symbol">→</a>
                <a id="13154" class="Symbol">(</a><a id="13155" href="Chapter.Imp.BigStep.html#1738" class="InductiveConstructor Operator">WHILE</a> <a id="13161" href="Chapter.Imp.BigStep.html#13116" class="Bound">b</a> <a id="13163" href="Chapter.Imp.BigStep.html#1738" class="InductiveConstructor Operator">DO</a> <a id="13166" href="Chapter.Imp.BigStep.html#13127" class="Bound">c</a><a id="13167" class="Symbol">)</a> <a id="13169" href="Chapter.Imp.BigStep.html#9728" class="Function Operator">∼</a> <a id="13171" class="Symbol">(</a><a id="13172" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">IF</a> <a id="13175" href="Chapter.Imp.BigStep.html#13116" class="Bound">b</a> <a id="13177" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">THEN</a> <a id="13182" class="Symbol">(</a><a id="13183" href="Chapter.Imp.BigStep.html#13127" class="Bound">c</a> <a id="13185" href="Chapter.Imp.BigStep.html#1627" class="InductiveConstructor Operator">::</a> <a id="13188" class="Symbol">(</a><a id="13189" href="Chapter.Imp.BigStep.html#1738" class="InductiveConstructor Operator">WHILE</a> <a id="13195" href="Chapter.Imp.BigStep.html#13116" class="Bound">b</a> <a id="13197" href="Chapter.Imp.BigStep.html#1738" class="InductiveConstructor Operator">DO</a> <a id="13200" href="Chapter.Imp.BigStep.html#13127" class="Bound">c</a><a id="13201" class="Symbol">))</a> <a id="13204" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">ELSE</a> <a id="13209" href="Chapter.Imp.BigStep.html#1516" class="InductiveConstructor">SKIP</a><a id="13213" class="Symbol">)</a>
                
<a id="13232" href="Chapter.Imp.BigStep.html#13096" class="Function">lemma-while-if</a> <a id="13247" href="Chapter.Imp.BigStep.html#13247" class="Bound">b</a> <a id="13249" href="Chapter.Imp.BigStep.html#13249" class="Bound">c</a> <a id="13251" class="Symbol">{</a><a id="13252" href="Chapter.Imp.BigStep.html#13252" class="Bound">s</a><a id="13253" class="Symbol">}</a> <a id="13255" class="Symbol">{</a><a id="13256" href="Chapter.Imp.BigStep.html#13256" class="Bound">t</a><a id="13257" class="Symbol">}</a> <a id="13259" class="Symbol">=</a> <a id="13261" href="Chapter.Imp.BigStep.html#13305" class="Function">only-if-part</a> <a id="13274" href="Library.Logic.html#271" class="InductiveConstructor Operator">,</a> <a id="13276" href="Chapter.Imp.BigStep.html#13572" class="Function">if-part</a>
      <a id="13290" class="Keyword">where</a>
         <a id="13305" href="Chapter.Imp.BigStep.html#13305" class="Function">only-if-part</a> <a id="13318" class="Symbol">:</a>
                 <a id="13337" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦅</a> <a id="13339" href="Chapter.Imp.BigStep.html#1738" class="InductiveConstructor Operator">WHILE</a> <a id="13345" href="Chapter.Imp.BigStep.html#13247" class="Bound">b</a> <a id="13347" href="Chapter.Imp.BigStep.html#1738" class="InductiveConstructor Operator">DO</a> <a id="13350" href="Chapter.Imp.BigStep.html#13249" class="Bound">c</a> <a id="13352" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">,</a> <a id="13354" href="Chapter.Imp.BigStep.html#13252" class="Bound">s</a> <a id="13356" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦆</a> <a id="13358" href="Chapter.Imp.BigStep.html#3810" class="Datatype Operator">⇒</a> <a id="13360" href="Chapter.Imp.BigStep.html#13256" class="Bound">t</a> <a id="13362" class="Symbol">→</a>
                 <a id="13381" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦅</a> <a id="13383" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">IF</a> <a id="13386" href="Chapter.Imp.BigStep.html#13247" class="Bound">b</a> <a id="13388" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">THEN</a> <a id="13393" href="Chapter.Imp.BigStep.html#13249" class="Bound">c</a> <a id="13395" href="Chapter.Imp.BigStep.html#1627" class="InductiveConstructor Operator">::</a> <a id="13398" class="Symbol">(</a><a id="13399" href="Chapter.Imp.BigStep.html#1738" class="InductiveConstructor Operator">WHILE</a> <a id="13405" href="Chapter.Imp.BigStep.html#13247" class="Bound">b</a> <a id="13407" href="Chapter.Imp.BigStep.html#1738" class="InductiveConstructor Operator">DO</a> <a id="13410" href="Chapter.Imp.BigStep.html#13249" class="Bound">c</a><a id="13411" class="Symbol">)</a> <a id="13413" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">ELSE</a> <a id="13418" href="Chapter.Imp.BigStep.html#1516" class="InductiveConstructor">SKIP</a> <a id="13423" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">,</a> <a id="13425" href="Chapter.Imp.BigStep.html#13252" class="Bound">s</a> <a id="13427" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦆</a> <a id="13429" href="Chapter.Imp.BigStep.html#3810" class="Datatype Operator">⇒</a> <a id="13431" href="Chapter.Imp.BigStep.html#13256" class="Bound">t</a>

         <a id="13443" href="Chapter.Imp.BigStep.html#13305" class="Function">only-if-part</a> <a id="13456" class="Symbol">(</a><a id="13457" href="Chapter.Imp.BigStep.html#4569" class="InductiveConstructor">WhileFalse</a> <a id="13468" href="Chapter.Imp.BigStep.html#13468" class="Bound">x</a><a id="13469" class="Symbol">)</a> <a id="13471" class="Symbol">=</a> <a id="13473" href="Chapter.Imp.BigStep.html#4385" class="InductiveConstructor">IfFalse</a> <a id="13481" href="Chapter.Imp.BigStep.html#13468" class="Bound">x</a> <a id="13483" href="Chapter.Imp.BigStep.html#3849" class="InductiveConstructor">Skip</a>
         <a id="13497" href="Chapter.Imp.BigStep.html#13305" class="Function">only-if-part</a> <a id="13510" class="Symbol">(</a><a id="13511" href="Chapter.Imp.BigStep.html#4727" class="InductiveConstructor">WhileTrue</a> <a id="13521" href="Chapter.Imp.BigStep.html#13521" class="Bound">x</a> <a id="13523" href="Chapter.Imp.BigStep.html#13523" class="Bound">hyp1</a> <a id="13528" href="Chapter.Imp.BigStep.html#13528" class="Bound">hyp2</a><a id="13532" class="Symbol">)</a> <a id="13534" class="Symbol">=</a> <a id="13536" href="Chapter.Imp.BigStep.html#4198" class="InductiveConstructor">IfTrue</a> <a id="13543" href="Chapter.Imp.BigStep.html#13521" class="Bound">x</a> <a id="13545" class="Symbol">(</a><a id="13546" href="Chapter.Imp.BigStep.html#4039" class="InductiveConstructor">Comp</a> <a id="13551" href="Chapter.Imp.BigStep.html#13523" class="Bound">hyp1</a> <a id="13556" href="Chapter.Imp.BigStep.html#13528" class="Bound">hyp2</a><a id="13560" class="Symbol">)</a>

         <a id="13572" href="Chapter.Imp.BigStep.html#13572" class="Function">if-part</a> <a id="13580" class="Symbol">:</a>
                 <a id="13599" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦅</a> <a id="13601" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">IF</a> <a id="13604" href="Chapter.Imp.BigStep.html#13247" class="Bound">b</a> <a id="13606" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">THEN</a> <a id="13611" href="Chapter.Imp.BigStep.html#13249" class="Bound">c</a> <a id="13613" href="Chapter.Imp.BigStep.html#1627" class="InductiveConstructor Operator">::</a> <a id="13616" class="Symbol">(</a><a id="13617" href="Chapter.Imp.BigStep.html#1738" class="InductiveConstructor Operator">WHILE</a> <a id="13623" href="Chapter.Imp.BigStep.html#13247" class="Bound">b</a> <a id="13625" href="Chapter.Imp.BigStep.html#1738" class="InductiveConstructor Operator">DO</a> <a id="13628" href="Chapter.Imp.BigStep.html#13249" class="Bound">c</a><a id="13629" class="Symbol">)</a> <a id="13631" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">ELSE</a> <a id="13636" href="Chapter.Imp.BigStep.html#1516" class="InductiveConstructor">SKIP</a> <a id="13641" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">,</a> <a id="13643" href="Chapter.Imp.BigStep.html#13252" class="Bound">s</a> <a id="13645" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦆</a> <a id="13647" href="Chapter.Imp.BigStep.html#3810" class="Datatype Operator">⇒</a> <a id="13649" href="Chapter.Imp.BigStep.html#13256" class="Bound">t</a> <a id="13651" class="Symbol">→</a>
                 <a id="13670" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦅</a> <a id="13672" href="Chapter.Imp.BigStep.html#1738" class="InductiveConstructor Operator">WHILE</a> <a id="13678" href="Chapter.Imp.BigStep.html#13247" class="Bound">b</a> <a id="13680" href="Chapter.Imp.BigStep.html#1738" class="InductiveConstructor Operator">DO</a> <a id="13683" href="Chapter.Imp.BigStep.html#13249" class="Bound">c</a> <a id="13685" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">,</a> <a id="13687" href="Chapter.Imp.BigStep.html#13252" class="Bound">s</a> <a id="13689" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦆</a> <a id="13691" href="Chapter.Imp.BigStep.html#3810" class="Datatype Operator">⇒</a> <a id="13693" href="Chapter.Imp.BigStep.html#13256" class="Bound">t</a>
         <a id="13704" href="Chapter.Imp.BigStep.html#13572" class="Function">if-part</a> <a id="13712" class="Symbol">(</a><a id="13713" href="Chapter.Imp.BigStep.html#4198" class="InductiveConstructor">IfTrue</a> <a id="13720" href="Chapter.Imp.BigStep.html#13720" class="Bound">x</a> <a id="13722" class="Symbol">(</a><a id="13723" href="Chapter.Imp.BigStep.html#4039" class="InductiveConstructor">Comp</a> <a id="13728" href="Chapter.Imp.BigStep.html#13728" class="Bound">hyp1</a> <a id="13733" href="Chapter.Imp.BigStep.html#13733" class="Bound">hyp2</a><a id="13737" class="Symbol">))</a> <a id="13740" class="Symbol">=</a> <a id="13742" href="Chapter.Imp.BigStep.html#4727" class="InductiveConstructor">WhileTrue</a> <a id="13752" href="Chapter.Imp.BigStep.html#13720" class="Bound">x</a> <a id="13754" href="Chapter.Imp.BigStep.html#13728" class="Bound">hyp1</a> <a id="13759" href="Chapter.Imp.BigStep.html#13733" class="Bound">hyp2</a>
         <a id="13773" href="Chapter.Imp.BigStep.html#13572" class="Function">if-part</a> <a id="13781" class="Symbol">(</a><a id="13782" href="Chapter.Imp.BigStep.html#4385" class="InductiveConstructor">IfFalse</a> <a id="13790" href="Chapter.Imp.BigStep.html#13790" class="Bound">x</a> <a id="13792" href="Chapter.Imp.BigStep.html#3849" class="InductiveConstructor">Skip</a><a id="13796" class="Symbol">)</a> <a id="13798" class="Symbol">=</a> <a id="13800" href="Chapter.Imp.BigStep.html#4569" class="InductiveConstructor">WhileFalse</a> <a id="13811" href="Chapter.Imp.BigStep.html#13790" class="Bound">x</a>
</pre>

  </div>
  <ul class="menu">
  <li>
    <a href="Chapter.Imp.AexpBexp.html">‹ Arithmetic and boolean expressions</a></li>
  <li>
    <a href="Chapter.Imp.SmallStep.html">Small-step operational semantics ›</a></li>
</ul>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>
  <div class="wrapper">
    <!-- <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/"> -->
    <!--   <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/4.0/88x31.png"/> -->
    <!-- </a> -->
    2022-2023
    <a href="https://boystrange.github.io">Luca Padovani</a>
    and <a href="http://www.di.unito.it/~deligu/">Ugo de'Liguoro</a>.
    Page generated on 20 Sep 2023.
  </div>
</footer>
</body>

</html>
