<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Relative Completeness of Hoare Logic | Introduction to Program Verification in Agda</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="Relative Completeness of Hoare Logic" />
<meta property="og:locale" content="en_US" />
<meta property="og:site_name" content="Introduction to Program Verification in Agda" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Relative Completeness of Hoare Logic" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","headline":"Relative Completeness of Hoare Logic","url":"/pages/Chapter.Imp.HoareLogicCompleteness.html"}</script>
<!-- End Jekyll SEO tag -->

  <link rel="stylesheet" href="../assets/css/main.css">
  <link rel="stylesheet" href="../assets/css/Agda.css">
  <script src="../assets/js/mathjax.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="../assets/js/codereveal.js"></script>
  <link type="application/atom+xml" rel="alternate" href="/feed.xml" title="Introduction to Program Verification in Agda" /><!-- <script src="/assets/js/clipboard.min.js"></script> -->
  <!-- <script src="/assets/js/codeselect.js"></script> -->
</head>
<body>

<header class="site-header" role="banner">
  <div class="wrapper">
    <a class="site-title" rel="author" href="../index.html">Introduction to Program Verification in Agda</a>
    

    <nav class="site-nav">
      <a href="https://agda.readthedocs.io/en/latest/">AGDA DOCS</a>
    </nav>
  </div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">
  <ul class="menu">
  <li>
    <a href="Chapter.Imp.HoareLogicSoundness.html">‹ Soundness of Hoare Logic</a></li>
  <li>
    <a href="Chapter.Imp.VerificationConditions.html">Verification Conditions ›</a></li>
</ul>
  <header class="post-header">
    <h1 class="post-title">Relative Completeness of Hoare Logic</h1>
  </header>

  <div class="post-content">
    <pre class="Agda"><a id="144" class="Keyword">module</a> <a id="151" href="Chapter.Imp.HoareLogicCompleteness.html" class="Module">Chapter.Imp.HoareLogicCompleteness</a> <a id="186" class="Keyword">where</a>
</pre>
<h2 id="imports">Imports</h2>

<pre class="Agda"><a id="214" class="Keyword">open</a> <a id="219" class="Keyword">import</a> <a id="226" href="Library.Bool.html" class="Module">Library.Bool</a>
<a id="239" class="Keyword">open</a> <a id="244" class="Keyword">import</a> <a id="251" href="Library.Nat.html" class="Module">Library.Nat</a>
<a id="263" class="Keyword">open</a> <a id="268" class="Keyword">import</a> <a id="275" href="Library.Nat.Properties.html" class="Module">Library.Nat.Properties</a>
<a id="298" class="Keyword">open</a> <a id="303" class="Keyword">import</a> <a id="310" href="Library.Logic.html" class="Module">Library.Logic</a>
<a id="324" class="Keyword">open</a> <a id="329" class="Keyword">import</a> <a id="336" href="Library.Logic.Laws.html" class="Module">Library.Logic.Laws</a>
<a id="355" class="Keyword">open</a> <a id="360" class="Keyword">import</a> <a id="367" href="Library.Equality.html" class="Module">Library.Equality</a>
<a id="384" class="Keyword">open</a> <a id="389" class="Keyword">import</a> <a id="396" href="Library.Equality.Reasoning.html" class="Module">Library.Equality.Reasoning</a>

<a id="424" class="Keyword">open</a> <a id="429" class="Keyword">import</a> <a id="436" href="Chapter.Imp.AexpBexp.html" class="Module">Chapter.Imp.AexpBexp</a>
<a id="457" class="Keyword">open</a> <a id="462" class="Keyword">import</a> <a id="469" href="Chapter.Imp.BigStep.html" class="Module">Chapter.Imp.BigStep</a>
<a id="489" class="Keyword">open</a> <a id="494" class="Keyword">import</a> <a id="501" href="Chapter.Imp.HoareLogic.html" class="Module">Chapter.Imp.HoareLogic</a>
<a id="524" class="Keyword">open</a> <a id="529" class="Keyword">import</a> <a id="536" href="Chapter.Imp.HoareLogicSoundness.html" class="Module">Chapter.Imp.HoareLogicSoundness</a>
</pre>
<p>The opposite implication to soundness is <em>completeness</em>, namely the claim that all valid triples are derivable
in Hoare Logic; in symbols</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>|= [ P ] c [ Q ] ==&gt; |- [ P ] c [ Q ]
</code></pre></div></div>

<p>However it is easy to see that <code class="language-plaintext highlighter-rouge">|= P</code>, namely <code class="language-plaintext highlighter-rouge">∀ s → P s</code>, holds if and only if
<code class="language-plaintext highlighter-rouge">|= [ ⊤' ] SKIP [ P ]</code>; but assertions are fomulas of first order arithmetic, hence
were Hoare logic complete we would have a complete axiomatization of arithmetic, contradicting the
(first) Goedel’s incompleteness theorem. Also we would have a decision method to check whether
the triple <code class="language-plaintext highlighter-rouge">[ ⊤' ] c [ ⊥' ]</code>, where <code class="language-plaintext highlighter-rouge">⊥'</code> is the assertion that never holds, is valid for any command
<code class="language-plaintext highlighter-rouge">c</code>; but such a triple is valid if and only if for all <code class="language-plaintext highlighter-rouge">s : State</code> there exists no <code class="language-plaintext highlighter-rouge">t</code> such that
<code class="language-plaintext highlighter-rouge">⦅ c , s ⦆ ⇒ t</code>, which is known to be undecidable from computability theory. See Winskel’s book, chapter 7.</p>

<p>In contrast, in his famous 1978 paper Stephen A. Cook proved that Hoare logic is relative complete,
that is Hoare logic is complete if have an oracle deciding assertions. In our formulation such an oracle
exists: it is Agda itself. More precisely, Hoare logic is complete with respect to the assertions that
are provable by Agda: here there is no contradiction with Goedel’s theorem, as Agda
necessarily embodies an incomplete axiomatization of arithmetic.</p>

<h2 id="weakest-preconditions">Weakest preconditions</h2>

<p>The proof of the relative completeness theorem relies on Djikstra’s notion of <em>weakest precondition</em>.
Let us define:</p>

<pre class="Agda"><a id="wp"></a><a id="2027" href="Chapter.Imp.HoareLogicCompleteness.html#2027" class="Function">wp</a> <a id="2030" class="Symbol">:</a> <a id="2032" href="Chapter.Imp.BigStep.html#1498" class="Datatype">Com</a> <a id="2036" class="Symbol">-&gt;</a> <a id="2039" href="Chapter.Imp.HoareLogic.html#2499" class="Function">Assn</a> <a id="2044" class="Symbol">-&gt;</a> <a id="2047" href="Chapter.Imp.HoareLogic.html#2499" class="Function">Assn</a>
<a id="2052" href="Chapter.Imp.HoareLogicCompleteness.html#2027" class="Function">wp</a> <a id="2055" href="Chapter.Imp.HoareLogicCompleteness.html#2055" class="Bound">c</a> <a id="2057" href="Chapter.Imp.HoareLogicCompleteness.html#2057" class="Bound">Q</a> <a id="2059" href="Chapter.Imp.HoareLogicCompleteness.html#2059" class="Bound">s</a> <a id="2061" class="Symbol">=</a> <a id="2063" class="Symbol">∀</a> <a id="2065" href="Chapter.Imp.HoareLogicCompleteness.html#2065" class="Bound">t</a> <a id="2067" class="Symbol">-&gt;</a> <a id="2070" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦅</a> <a id="2072" href="Chapter.Imp.HoareLogicCompleteness.html#2055" class="Bound">c</a> <a id="2074" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">,</a> <a id="2076" href="Chapter.Imp.HoareLogicCompleteness.html#2059" class="Bound">s</a> <a id="2078" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦆</a> <a id="2080" href="Chapter.Imp.BigStep.html#3810" class="Datatype Operator">⇒</a> <a id="2082" href="Chapter.Imp.HoareLogicCompleteness.html#2065" class="Bound">t</a> <a id="2084" class="Symbol">-&gt;</a> <a id="2087" href="Chapter.Imp.HoareLogicCompleteness.html#2057" class="Bound">Q</a> <a id="2089" href="Chapter.Imp.HoareLogicCompleteness.html#2065" class="Bound">t</a>
</pre>
<p>Then an immediate consequence of the definition is the following:</p>

<pre class="Agda"><a id="Fact"></a><a id="2166" href="Chapter.Imp.HoareLogicCompleteness.html#2166" class="Function">Fact</a> <a id="2171" class="Symbol">:</a> <a id="2173" class="Symbol">∀</a> <a id="2175" class="Symbol">{</a><a id="2176" href="Chapter.Imp.HoareLogicCompleteness.html#2176" class="Bound">P</a> <a id="2178" href="Chapter.Imp.HoareLogicCompleteness.html#2178" class="Bound">c</a> <a id="2180" href="Chapter.Imp.HoareLogicCompleteness.html#2180" class="Bound">Q</a><a id="2181" class="Symbol">}</a> <a id="2183" class="Symbol">-&gt;</a> <a id="2186" href="Chapter.Imp.HoareLogicSoundness.html#785" class="Function Operator">|=</a> <a id="2189" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="2191" href="Chapter.Imp.HoareLogicCompleteness.html#2176" class="Bound">P</a> <a id="2193" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a> <a id="2195" href="Chapter.Imp.HoareLogicCompleteness.html#2178" class="Bound">c</a> <a id="2197" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="2199" href="Chapter.Imp.HoareLogicCompleteness.html#2180" class="Bound">Q</a> <a id="2201" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a> <a id="2203" class="Symbol">-&gt;</a> <a id="2206" class="Symbol">(∀</a> <a id="2209" href="Chapter.Imp.HoareLogicCompleteness.html#2209" class="Bound">s</a> <a id="2211" class="Symbol">-&gt;</a> <a id="2214" href="Chapter.Imp.HoareLogicCompleteness.html#2176" class="Bound">P</a> <a id="2216" href="Chapter.Imp.HoareLogicCompleteness.html#2209" class="Bound">s</a> <a id="2218" class="Symbol">-&gt;</a> <a id="2221" href="Chapter.Imp.HoareLogicCompleteness.html#2027" class="Function">wp</a> <a id="2224" href="Chapter.Imp.HoareLogicCompleteness.html#2178" class="Bound">c</a> <a id="2226" href="Chapter.Imp.HoareLogicCompleteness.html#2180" class="Bound">Q</a> <a id="2228" href="Chapter.Imp.HoareLogicCompleteness.html#2209" class="Bound">s</a><a id="2229" class="Symbol">)</a>
<a id="2231" href="Chapter.Imp.HoareLogicCompleteness.html#2166" class="Function">Fact</a> <a id="2236" class="Symbol">{</a><a id="2237" href="Chapter.Imp.HoareLogicCompleteness.html#2237" class="Bound">P</a><a id="2238" class="Symbol">}</a> <a id="2240" class="Symbol">{</a><a id="2241" href="Chapter.Imp.HoareLogicCompleteness.html#2241" class="Bound">c</a><a id="2242" class="Symbol">}</a> <a id="2244" class="Symbol">{</a><a id="2245" href="Chapter.Imp.HoareLogicCompleteness.html#2245" class="Bound">Q</a><a id="2246" class="Symbol">}</a> <a id="2248" class="Symbol">=</a> <a id="2250" href="Chapter.Imp.HoareLogicCompleteness.html#2270" class="Function">only-if</a>
  <a id="2260" class="Keyword">where</a>
    <a id="2270" href="Chapter.Imp.HoareLogicCompleteness.html#2270" class="Function">only-if</a> <a id="2278" class="Symbol">:</a> <a id="2280" class="Symbol">({</a><a id="2282" href="Chapter.Imp.HoareLogicCompleteness.html#2282" class="Bound">s</a> <a id="2284" href="Chapter.Imp.HoareLogicCompleteness.html#2284" class="Bound">t</a> <a id="2286" class="Symbol">:</a> <a id="2288" href="Chapter.Imp.AexpBexp.html#2404" class="Function">State</a><a id="2293" class="Symbol">}</a> <a id="2295" class="Symbol">-&gt;</a> <a id="2298" href="Chapter.Imp.HoareLogicCompleteness.html#2237" class="Bound">P</a> <a id="2300" href="Chapter.Imp.HoareLogicCompleteness.html#2282" class="Bound">s</a> <a id="2302" class="Symbol">-&gt;</a> <a id="2305" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦅</a> <a id="2307" href="Chapter.Imp.HoareLogicCompleteness.html#2241" class="Bound">c</a> <a id="2309" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">,</a> <a id="2311" href="Chapter.Imp.HoareLogicCompleteness.html#2282" class="Bound">s</a> <a id="2313" href="Chapter.Imp.BigStep.html#3329" class="InductiveConstructor Operator">⦆</a> <a id="2315" href="Chapter.Imp.BigStep.html#3810" class="Datatype Operator">⇒</a> <a id="2317" href="Chapter.Imp.HoareLogicCompleteness.html#2284" class="Bound">t</a> <a id="2319" class="Symbol">-&gt;</a> <a id="2322" href="Chapter.Imp.HoareLogicCompleteness.html#2245" class="Bound">Q</a> <a id="2324" href="Chapter.Imp.HoareLogicCompleteness.html#2284" class="Bound">t</a><a id="2325" class="Symbol">)</a> <a id="2327" class="Symbol">-&gt;</a>
                            <a id="2358" class="Symbol">((</a><a id="2360" href="Chapter.Imp.HoareLogicCompleteness.html#2360" class="Bound">s</a> <a id="2362" class="Symbol">:</a> <a id="2364" href="Chapter.Imp.AexpBexp.html#2404" class="Function">State</a><a id="2369" class="Symbol">)</a> <a id="2371" class="Symbol">-&gt;</a> <a id="2374" href="Chapter.Imp.HoareLogicCompleteness.html#2237" class="Bound">P</a> <a id="2376" href="Chapter.Imp.HoareLogicCompleteness.html#2360" class="Bound">s</a> <a id="2378" class="Symbol">-&gt;</a> <a id="2381" href="Chapter.Imp.HoareLogicCompleteness.html#2027" class="Function">wp</a> <a id="2384" href="Chapter.Imp.HoareLogicCompleteness.html#2241" class="Bound">c</a> <a id="2386" href="Chapter.Imp.HoareLogicCompleteness.html#2245" class="Bound">Q</a> <a id="2388" href="Chapter.Imp.HoareLogicCompleteness.html#2360" class="Bound">s</a><a id="2389" class="Symbol">)</a>
    <a id="2395" href="Chapter.Imp.HoareLogicCompleteness.html#2270" class="Function">only-if</a> <a id="2403" href="Chapter.Imp.HoareLogicCompleteness.html#2403" class="Bound">hyp1</a> <a id="2408" href="Chapter.Imp.HoareLogicCompleteness.html#2408" class="Bound">s</a> <a id="2410" href="Chapter.Imp.HoareLogicCompleteness.html#2410" class="Bound">hyp2</a> <a id="2415" href="Chapter.Imp.HoareLogicCompleteness.html#2415" class="Bound">t</a> <a id="2417" class="Symbol">=</a> <a id="2419" href="Chapter.Imp.HoareLogicCompleteness.html#2403" class="Bound">hyp1</a> <a id="2424" href="Chapter.Imp.HoareLogicCompleteness.html#2410" class="Bound">hyp2</a>
</pre>
<p>If we identify an assertion <code class="language-plaintext highlighter-rouge">P</code>, that is a predicate of states <code class="language-plaintext highlighter-rouge">P : State → Set</code>, with the set
<code class="language-plaintext highlighter-rouge">⟦P⟧ = {s : State ∣ P s}</code> i.e. the set of states of which <code class="language-plaintext highlighter-rouge">P</code> holds, the larger is <code class="language-plaintext highlighter-rouge">⟦P⟧</code> the weaker
are the requirements for a state <code class="language-plaintext highlighter-rouge">s</code> to satisfy <code class="language-plaintext highlighter-rouge">P</code>. On the other hand implication is equivalent
to subset inclusion:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> ∀ s → P s → P' s  &lt;==&gt; ⟦P⟧ ⊆ ⟦P'⟧
</code></pre></div></div>

<p>Now, unravelling the statement <code class="language-plaintext highlighter-rouge">Fact</code> we have that if <code class="language-plaintext highlighter-rouge">|= [ P ] c [ Q ]</code> then <code class="language-plaintext highlighter-rouge">⟦P⟧ ⊆ ⟦wp c Q⟧</code>,
so that <code class="language-plaintext highlighter-rouge">wp c Q</code> is <em>weaker</em> then any precondition <code class="language-plaintext highlighter-rouge">P</code> of <code class="language-plaintext highlighter-rouge">c</code> with respect to <code class="language-plaintext highlighter-rouge">Q</code>. It remains to show
that <code class="language-plaintext highlighter-rouge">wp c Q</code> is itself a precondition of <code class="language-plaintext highlighter-rouge">c</code> and <code class="language-plaintext highlighter-rouge">Q</code> namely its <em>weakest precondition</em>,
which is the content of the next lemma.</p>

<pre class="Agda"><a id="wp-lemma"></a><a id="3119" href="Chapter.Imp.HoareLogicCompleteness.html#3119" class="Function">wp-lemma</a> <a id="3128" class="Symbol">:</a> <a id="3130" class="Symbol">∀</a> <a id="3132" href="Chapter.Imp.HoareLogicCompleteness.html#3132" class="Bound">c</a> <a id="3134" class="Symbol">{</a><a id="3135" href="Chapter.Imp.HoareLogicCompleteness.html#3135" class="Bound">Q</a> <a id="3137" class="Symbol">:</a> <a id="3139" href="Chapter.Imp.HoareLogic.html#2499" class="Function">Assn</a><a id="3143" class="Symbol">}</a> <a id="3145" class="Symbol">-&gt;</a> <a id="3148" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="3151" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="3153" href="Chapter.Imp.HoareLogicCompleteness.html#2027" class="Function">wp</a> <a id="3156" href="Chapter.Imp.HoareLogicCompleteness.html#3132" class="Bound">c</a> <a id="3158" href="Chapter.Imp.HoareLogicCompleteness.html#3135" class="Bound">Q</a> <a id="3160" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a> <a id="3162" href="Chapter.Imp.HoareLogicCompleteness.html#3132" class="Bound">c</a> <a id="3164" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="3166" href="Chapter.Imp.HoareLogicCompleteness.html#3135" class="Bound">Q</a> <a id="3168" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>

<a id="3171" href="Chapter.Imp.HoareLogicCompleteness.html#3119" class="Function">wp-lemma</a> <a id="3180" href="Chapter.Imp.BigStep.html#1516" class="InductiveConstructor">SKIP</a> <a id="3185" class="Symbol">{</a><a id="3186" href="Chapter.Imp.HoareLogicCompleteness.html#3186" class="Bound">Q</a><a id="3187" class="Symbol">}</a> <a id="3189" class="Symbol">=</a> <a id="3191" href="Chapter.Imp.HoareLogic.html#7072" class="Function">H-Str</a> <a id="3197" href="Chapter.Imp.HoareLogicCompleteness.html#3229" class="Function">left-premise</a> <a id="3210" href="Chapter.Imp.HoareLogic.html#4051" class="InductiveConstructor">H-Skip</a>
  <a id="3219" class="Keyword">where</a>
    <a id="3229" href="Chapter.Imp.HoareLogicCompleteness.html#3229" class="Function">left-premise</a> <a id="3242" class="Symbol">:</a> <a id="3244" class="Symbol">∀</a> <a id="3246" href="Chapter.Imp.HoareLogicCompleteness.html#3246" class="Bound">s</a> <a id="3248" class="Symbol">-&gt;</a> <a id="3251" href="Chapter.Imp.HoareLogicCompleteness.html#2027" class="Function">wp</a> <a id="3254" href="Chapter.Imp.BigStep.html#1516" class="InductiveConstructor">SKIP</a> <a id="3259" href="Chapter.Imp.HoareLogicCompleteness.html#3186" class="Bound">Q</a> <a id="3261" href="Chapter.Imp.HoareLogicCompleteness.html#3246" class="Bound">s</a> <a id="3263" class="Symbol">-&gt;</a> <a id="3266" href="Chapter.Imp.HoareLogicCompleteness.html#3186" class="Bound">Q</a> <a id="3268" href="Chapter.Imp.HoareLogicCompleteness.html#3246" class="Bound">s</a>
    <a id="3274" href="Chapter.Imp.HoareLogicCompleteness.html#3229" class="Function">left-premise</a> <a id="3287" href="Chapter.Imp.HoareLogicCompleteness.html#3287" class="Bound">s</a> <a id="3289" href="Chapter.Imp.HoareLogicCompleteness.html#3289" class="Bound">hyp</a> <a id="3293" class="Symbol">=</a> <a id="3295" href="Chapter.Imp.HoareLogicCompleteness.html#3289" class="Bound">hyp</a> <a id="3299" href="Chapter.Imp.HoareLogicCompleteness.html#3287" class="Bound">s</a> <a id="3301" href="Chapter.Imp.BigStep.html#3849" class="InductiveConstructor">Skip</a>

<a id="3307" class="Comment">-- hyp : wp SKIP Q s ≡ ∀ t -&gt; ⦅ SKIP , s ⦆ ⇒ t -&gt; Q t</a>
<a id="3361" class="Comment">-- hyp s : ⦅ SKIP , s ⦆ ⇒ s -&gt; Q s</a>
<a id="3396" class="Comment">-- Skip :  ⦅ SKIP , s ⦆ ⇒ s</a>
<a id="3424" class="Comment">-- hyp s Skip : Q s</a>

<a id="3445" href="Chapter.Imp.HoareLogicCompleteness.html#3119" class="Function">wp-lemma</a> <a id="3454" class="Symbol">(</a><a id="3455" href="Chapter.Imp.HoareLogicCompleteness.html#3455" class="Bound">x</a> <a id="3457" href="Chapter.Imp.BigStep.html#1571" class="InductiveConstructor Operator">:=</a> <a id="3460" href="Chapter.Imp.HoareLogicCompleteness.html#3460" class="Bound">a</a><a id="3461" class="Symbol">)</a> <a id="3463" class="Symbol">{</a><a id="3464" href="Chapter.Imp.HoareLogicCompleteness.html#3464" class="Bound">Q</a><a id="3465" class="Symbol">}</a> <a id="3467" class="Symbol">=</a> <a id="3469" href="Chapter.Imp.HoareLogic.html#7072" class="Function">H-Str</a> <a id="3475" href="Chapter.Imp.HoareLogicCompleteness.html#3506" class="Function">left-premise</a> <a id="3488" href="Chapter.Imp.HoareLogic.html#4136" class="InductiveConstructor">H-Loc</a>
  <a id="3496" class="Keyword">where</a>
    <a id="3506" href="Chapter.Imp.HoareLogicCompleteness.html#3506" class="Function">left-premise</a> <a id="3519" class="Symbol">:</a> <a id="3521" class="Symbol">∀</a> <a id="3523" href="Chapter.Imp.HoareLogicCompleteness.html#3523" class="Bound">s</a> <a id="3525" class="Symbol">-&gt;</a> <a id="3528" href="Chapter.Imp.HoareLogicCompleteness.html#2027" class="Function">wp</a> <a id="3531" class="Symbol">(</a><a id="3532" href="Chapter.Imp.HoareLogicCompleteness.html#3455" class="Bound">x</a> <a id="3534" href="Chapter.Imp.BigStep.html#1571" class="InductiveConstructor Operator">:=</a> <a id="3537" href="Chapter.Imp.HoareLogicCompleteness.html#3460" class="Bound">a</a><a id="3538" class="Symbol">)</a> <a id="3540" href="Chapter.Imp.HoareLogicCompleteness.html#3464" class="Bound">Q</a> <a id="3542" href="Chapter.Imp.HoareLogicCompleteness.html#3523" class="Bound">s</a> <a id="3544" class="Symbol">-&gt;</a> <a id="3547" href="Chapter.Imp.HoareLogicCompleteness.html#3464" class="Bound">Q</a> <a id="3549" class="Symbol">(</a><a id="3550" href="Chapter.Imp.HoareLogicCompleteness.html#3523" class="Bound">s</a> <a id="3552" href="Chapter.Imp.AexpBexp.html#3405" class="Function Operator">[</a> <a id="3554" href="Chapter.Imp.HoareLogicCompleteness.html#3455" class="Bound">x</a> <a id="3556" href="Chapter.Imp.AexpBexp.html#3405" class="Function Operator">::=</a> <a id="3560" href="Chapter.Imp.AexpBexp.html#3910" class="Function">aval</a> <a id="3565" href="Chapter.Imp.HoareLogicCompleteness.html#3460" class="Bound">a</a> <a id="3567" href="Chapter.Imp.HoareLogicCompleteness.html#3523" class="Bound">s</a> <a id="3569" href="Chapter.Imp.AexpBexp.html#3405" class="Function Operator">]</a><a id="3570" class="Symbol">)</a>
    <a id="3576" href="Chapter.Imp.HoareLogicCompleteness.html#3506" class="Function">left-premise</a> <a id="3589" href="Chapter.Imp.HoareLogicCompleteness.html#3589" class="Bound">s</a> <a id="3591" href="Chapter.Imp.HoareLogicCompleteness.html#3591" class="Bound">hyp</a> <a id="3595" class="Symbol">=</a> <a id="3597" href="Chapter.Imp.HoareLogicCompleteness.html#3591" class="Bound">hyp</a> <a id="3601" class="Symbol">(</a><a id="3602" href="Chapter.Imp.HoareLogicCompleteness.html#3589" class="Bound">s</a> <a id="3604" href="Chapter.Imp.AexpBexp.html#3405" class="Function Operator">[</a> <a id="3606" href="Chapter.Imp.HoareLogicCompleteness.html#3455" class="Bound">x</a> <a id="3608" href="Chapter.Imp.AexpBexp.html#3405" class="Function Operator">::=</a> <a id="3612" href="Chapter.Imp.AexpBexp.html#3910" class="Function">aval</a> <a id="3617" href="Chapter.Imp.HoareLogicCompleteness.html#3460" class="Bound">a</a> <a id="3619" href="Chapter.Imp.HoareLogicCompleteness.html#3589" class="Bound">s</a> <a id="3621" href="Chapter.Imp.AexpBexp.html#3405" class="Function Operator">]</a><a id="3622" class="Symbol">)</a> <a id="3624" href="Chapter.Imp.BigStep.html#3921" class="InductiveConstructor">Loc</a>

<a id="3629" class="Comment">-- hyp : wp (x := a) Q s ≡ ∀ t -&gt; ⦅ x := a , s ⦆ ⇒ t -&gt; Q t</a>
<a id="3689" class="Comment">-- hyp (s [ x ::= aval a s ]) : ⦅ x := a , s ⦆ ⇒ (s [ x ::= aval a s ])</a>
<a id="3761" class="Comment">--                                             -&gt; Q (s [ x ::= aval a s ])</a>
<a id="3836" class="Comment">-- Loc : ⦅ x := a , s ⦆ ⇒ (s [ x ::= aval a s ])</a>
<a id="3885" class="Comment">-- hyp (s [ x ::= aval a s ]) Loc : Q (s [ x ::= aval a s ])</a>

<a id="3947" href="Chapter.Imp.HoareLogicCompleteness.html#3119" class="Function">wp-lemma</a> <a id="3956" class="Symbol">(</a><a id="3957" href="Chapter.Imp.HoareLogicCompleteness.html#3957" class="Bound">c₁</a> <a id="3960" href="Chapter.Imp.BigStep.html#1627" class="InductiveConstructor Operator">::</a> <a id="3963" href="Chapter.Imp.HoareLogicCompleteness.html#3963" class="Bound">c₂</a><a id="3965" class="Symbol">)</a> <a id="3967" class="Symbol">{</a><a id="3968" href="Chapter.Imp.HoareLogicCompleteness.html#3968" class="Bound">Q</a><a id="3969" class="Symbol">}</a> <a id="3971" class="Symbol">=</a> <a id="3973" href="Chapter.Imp.HoareLogic.html#7072" class="Function">H-Str</a> <a id="3979" href="Chapter.Imp.HoareLogicCompleteness.html#4163" class="Function">left-premise</a> <a id="3992" class="Symbol">(</a><a id="3993" href="Chapter.Imp.HoareLogic.html#4297" class="InductiveConstructor">H-Comp</a> <a id="4000" href="Chapter.Imp.HoareLogicCompleteness.html#4021" class="Function">IH1</a> <a id="4004" href="Chapter.Imp.HoareLogicCompleteness.html#4102" class="Function">IH2</a><a id="4007" class="Symbol">)</a>
  <a id="4011" class="Keyword">where</a>
    <a id="4021" href="Chapter.Imp.HoareLogicCompleteness.html#4021" class="Function">IH1</a> <a id="4025" class="Symbol">:</a> <a id="4027" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="4030" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="4032" href="Chapter.Imp.HoareLogicCompleteness.html#2027" class="Function">wp</a> <a id="4035" href="Chapter.Imp.HoareLogicCompleteness.html#3957" class="Bound">c₁</a> <a id="4038" class="Symbol">(</a><a id="4039" href="Chapter.Imp.HoareLogicCompleteness.html#2027" class="Function">wp</a> <a id="4042" href="Chapter.Imp.HoareLogicCompleteness.html#3963" class="Bound">c₂</a> <a id="4045" href="Chapter.Imp.HoareLogicCompleteness.html#3968" class="Bound">Q</a><a id="4046" class="Symbol">)</a> <a id="4048" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a> <a id="4050" href="Chapter.Imp.HoareLogicCompleteness.html#3957" class="Bound">c₁</a> <a id="4053" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="4055" href="Chapter.Imp.HoareLogicCompleteness.html#2027" class="Function">wp</a> <a id="4058" href="Chapter.Imp.HoareLogicCompleteness.html#3963" class="Bound">c₂</a> <a id="4061" href="Chapter.Imp.HoareLogicCompleteness.html#3968" class="Bound">Q</a> <a id="4063" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
    <a id="4069" href="Chapter.Imp.HoareLogicCompleteness.html#4021" class="Function">IH1</a> <a id="4073" class="Symbol">=</a> <a id="4075" href="Chapter.Imp.HoareLogicCompleteness.html#3119" class="Function">wp-lemma</a> <a id="4084" href="Chapter.Imp.HoareLogicCompleteness.html#3957" class="Bound">c₁</a> <a id="4087" class="Symbol">{</a><a id="4088" href="Chapter.Imp.HoareLogicCompleteness.html#2027" class="Function">wp</a> <a id="4091" href="Chapter.Imp.HoareLogicCompleteness.html#3963" class="Bound">c₂</a> <a id="4094" href="Chapter.Imp.HoareLogicCompleteness.html#3968" class="Bound">Q</a><a id="4095" class="Symbol">}</a>

    <a id="4102" href="Chapter.Imp.HoareLogicCompleteness.html#4102" class="Function">IH2</a> <a id="4106" class="Symbol">:</a> <a id="4108" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="4111" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="4113" href="Chapter.Imp.HoareLogicCompleteness.html#2027" class="Function">wp</a> <a id="4116" href="Chapter.Imp.HoareLogicCompleteness.html#3963" class="Bound">c₂</a> <a id="4119" href="Chapter.Imp.HoareLogicCompleteness.html#3968" class="Bound">Q</a> <a id="4121" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a> <a id="4123" href="Chapter.Imp.HoareLogicCompleteness.html#3963" class="Bound">c₂</a> <a id="4126" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="4128" href="Chapter.Imp.HoareLogicCompleteness.html#3968" class="Bound">Q</a> <a id="4130" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
    <a id="4136" href="Chapter.Imp.HoareLogicCompleteness.html#4102" class="Function">IH2</a> <a id="4140" class="Symbol">=</a> <a id="4142" href="Chapter.Imp.HoareLogicCompleteness.html#3119" class="Function">wp-lemma</a> <a id="4151" href="Chapter.Imp.HoareLogicCompleteness.html#3963" class="Bound">c₂</a> <a id="4154" class="Symbol">{</a><a id="4155" href="Chapter.Imp.HoareLogicCompleteness.html#3968" class="Bound">Q</a><a id="4156" class="Symbol">}</a>

    <a id="4163" href="Chapter.Imp.HoareLogicCompleteness.html#4163" class="Function">left-premise</a> <a id="4176" class="Symbol">:</a> <a id="4178" class="Symbol">∀</a> <a id="4180" href="Chapter.Imp.HoareLogicCompleteness.html#4180" class="Bound">s</a> <a id="4182" class="Symbol">-&gt;</a> <a id="4185" href="Chapter.Imp.HoareLogicCompleteness.html#2027" class="Function">wp</a> <a id="4188" class="Symbol">(</a><a id="4189" href="Chapter.Imp.HoareLogicCompleteness.html#3957" class="Bound">c₁</a> <a id="4192" href="Chapter.Imp.BigStep.html#1627" class="InductiveConstructor Operator">::</a> <a id="4195" href="Chapter.Imp.HoareLogicCompleteness.html#3963" class="Bound">c₂</a><a id="4197" class="Symbol">)</a> <a id="4199" href="Chapter.Imp.HoareLogicCompleteness.html#3968" class="Bound">Q</a> <a id="4201" href="Chapter.Imp.HoareLogicCompleteness.html#4180" class="Bound">s</a> <a id="4203" class="Symbol">-&gt;</a> <a id="4206" href="Chapter.Imp.HoareLogicCompleteness.html#2027" class="Function">wp</a> <a id="4209" href="Chapter.Imp.HoareLogicCompleteness.html#3957" class="Bound">c₁</a> <a id="4212" class="Symbol">(</a><a id="4213" href="Chapter.Imp.HoareLogicCompleteness.html#2027" class="Function">wp</a> <a id="4216" href="Chapter.Imp.HoareLogicCompleteness.html#3963" class="Bound">c₂</a> <a id="4219" href="Chapter.Imp.HoareLogicCompleteness.html#3968" class="Bound">Q</a><a id="4220" class="Symbol">)</a> <a id="4222" href="Chapter.Imp.HoareLogicCompleteness.html#4180" class="Bound">s</a>
    <a id="4228" href="Chapter.Imp.HoareLogicCompleteness.html#4163" class="Function">left-premise</a> <a id="4241" href="Chapter.Imp.HoareLogicCompleteness.html#4241" class="Bound">s</a> <a id="4243" href="Chapter.Imp.HoareLogicCompleteness.html#4243" class="Bound">hyp1</a> <a id="4248" href="Chapter.Imp.HoareLogicCompleteness.html#4248" class="Bound">r</a> <a id="4250" href="Chapter.Imp.HoareLogicCompleteness.html#4250" class="Bound">hyp2</a> <a id="4255" href="Chapter.Imp.HoareLogicCompleteness.html#4255" class="Bound">t</a> <a id="4257" href="Chapter.Imp.HoareLogicCompleteness.html#4257" class="Bound">hyp3</a> <a id="4262" class="Symbol">=</a> <a id="4264" href="Chapter.Imp.HoareLogicCompleteness.html#4243" class="Bound">hyp1</a> <a id="4269" href="Chapter.Imp.HoareLogicCompleteness.html#4255" class="Bound">t</a> <a id="4271" class="Symbol">(</a><a id="4272" href="Chapter.Imp.BigStep.html#4039" class="InductiveConstructor">Comp</a> <a id="4277" href="Chapter.Imp.HoareLogicCompleteness.html#4250" class="Bound">hyp2</a> <a id="4282" href="Chapter.Imp.HoareLogicCompleteness.html#4257" class="Bound">hyp3</a><a id="4286" class="Symbol">)</a>

<a id="4289" class="Comment">-- hyp1 : wp (c₁ :: c₂) Q s ≡ ∀ t -&gt; ⦅ c₁ :: c₂ , s ⦆ ⇒ t -&gt; Q t</a>
<a id="4354" class="Comment">-- hyp2 : ⦅ c₁ , s ⦆ ⇒ r</a>
<a id="4379" class="Comment">-- hyp3 : ⦅ c₂ , r ⦆ ⇒ t</a>
<a id="4404" class="Comment">-- Comp hyp2 hyp3 : ⦅ c₁ :: c₂ , s ⦆ ⇒ t</a>

<a id="4446" href="Chapter.Imp.HoareLogicCompleteness.html#3119" class="Function">wp-lemma</a> <a id="4455" class="Symbol">(</a><a id="4456" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">IF</a> <a id="4459" href="Chapter.Imp.HoareLogicCompleteness.html#4459" class="Bound">b</a> <a id="4461" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">THEN</a> <a id="4466" href="Chapter.Imp.HoareLogicCompleteness.html#4466" class="Bound">c₁</a> <a id="4469" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">ELSE</a> <a id="4474" href="Chapter.Imp.HoareLogicCompleteness.html#4474" class="Bound">c₂</a><a id="4476" class="Symbol">)</a> <a id="4478" class="Symbol">{</a><a id="4479" href="Chapter.Imp.HoareLogicCompleteness.html#4479" class="Bound">Q</a><a id="4480" class="Symbol">}</a> <a id="4482" class="Symbol">=</a> <a id="4484" href="Chapter.Imp.HoareLogic.html#4462" class="InductiveConstructor">H-If</a> <a id="4489" href="Chapter.Imp.HoareLogicCompleteness.html#4933" class="Function">true-premise</a> <a id="4502" href="Chapter.Imp.HoareLogicCompleteness.html#5419" class="Function">false-premise</a>
  <a id="4518" class="Keyword">where</a>
    <a id="4528" href="Chapter.Imp.HoareLogicCompleteness.html#4528" class="Function">P</a> <a id="4530" class="Symbol">=</a> <a id="4532" href="Chapter.Imp.HoareLogicCompleteness.html#2027" class="Function">wp</a> <a id="4535" class="Symbol">(</a><a id="4536" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">IF</a> <a id="4539" href="Chapter.Imp.HoareLogicCompleteness.html#4459" class="Bound">b</a> <a id="4541" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">THEN</a> <a id="4546" href="Chapter.Imp.HoareLogicCompleteness.html#4466" class="Bound">c₁</a> <a id="4549" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">ELSE</a> <a id="4554" href="Chapter.Imp.HoareLogicCompleteness.html#4474" class="Bound">c₂</a><a id="4556" class="Symbol">)</a> <a id="4558" href="Chapter.Imp.HoareLogicCompleteness.html#4479" class="Bound">Q</a>

    <a id="4565" href="Chapter.Imp.HoareLogicCompleteness.html#4565" class="Function">IH1</a> <a id="4569" class="Symbol">:</a> <a id="4571" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="4574" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="4576" href="Chapter.Imp.HoareLogicCompleteness.html#2027" class="Function">wp</a> <a id="4579" href="Chapter.Imp.HoareLogicCompleteness.html#4466" class="Bound">c₁</a> <a id="4582" href="Chapter.Imp.HoareLogicCompleteness.html#4479" class="Bound">Q</a> <a id="4584" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a> <a id="4586" href="Chapter.Imp.HoareLogicCompleteness.html#4466" class="Bound">c₁</a> <a id="4589" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="4591" href="Chapter.Imp.HoareLogicCompleteness.html#4479" class="Bound">Q</a> <a id="4593" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
    <a id="4599" href="Chapter.Imp.HoareLogicCompleteness.html#4565" class="Function">IH1</a> <a id="4603" class="Symbol">=</a> <a id="4605" href="Chapter.Imp.HoareLogicCompleteness.html#3119" class="Function">wp-lemma</a> <a id="4614" href="Chapter.Imp.HoareLogicCompleteness.html#4466" class="Bound">c₁</a> <a id="4617" class="Symbol">{</a><a id="4618" href="Chapter.Imp.HoareLogicCompleteness.html#4479" class="Bound">Q</a><a id="4619" class="Symbol">}</a>

    <a id="4626" href="Chapter.Imp.HoareLogicCompleteness.html#4626" class="Function">left-premise-true</a> <a id="4644" class="Symbol">:</a> <a id="4646" class="Symbol">∀</a> <a id="4648" href="Chapter.Imp.HoareLogicCompleteness.html#4648" class="Bound">s</a> <a id="4650" class="Symbol">-&gt;</a> <a id="4653" href="Chapter.Imp.HoareLogicCompleteness.html#4528" class="Function">P</a> <a id="4655" href="Chapter.Imp.HoareLogicCompleteness.html#4648" class="Bound">s</a> <a id="4657" href="Library.Logic.html#1349" class="Function Operator">∧</a> <a id="4659" href="Chapter.Imp.AexpBexp.html#10249" class="Function">bval</a> <a id="4664" href="Chapter.Imp.HoareLogicCompleteness.html#4459" class="Bound">b</a> <a id="4666" href="Chapter.Imp.HoareLogicCompleteness.html#4648" class="Bound">s</a> <a id="4668" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="4671" href="Library.Bool.html#52" class="InductiveConstructor">true</a> <a id="4676" class="Symbol">-&gt;</a> <a id="4679" href="Chapter.Imp.HoareLogicCompleteness.html#2027" class="Function">wp</a> <a id="4682" href="Chapter.Imp.HoareLogicCompleteness.html#4466" class="Bound">c₁</a> <a id="4685" href="Chapter.Imp.HoareLogicCompleteness.html#4479" class="Bound">Q</a> <a id="4687" href="Chapter.Imp.HoareLogicCompleteness.html#4648" class="Bound">s</a>
    <a id="4693" href="Chapter.Imp.HoareLogicCompleteness.html#4626" class="Function">left-premise-true</a> <a id="4711" href="Chapter.Imp.HoareLogicCompleteness.html#4711" class="Bound">s</a> <a id="4713" class="Symbol">(</a><a id="4714" href="Chapter.Imp.HoareLogicCompleteness.html#4714" class="Bound">Ps</a> <a id="4717" href="Library.Logic.html#271" class="InductiveConstructor Operator">,</a> <a id="4719" href="Chapter.Imp.HoareLogicCompleteness.html#4719" class="Bound">b=true</a><a id="4725" class="Symbol">)</a> <a id="4727" href="Chapter.Imp.HoareLogicCompleteness.html#4727" class="Bound">t</a> <a id="4729" href="Chapter.Imp.HoareLogicCompleteness.html#4729" class="Bound">hyp</a> <a id="4733" class="Symbol">=</a> <a id="4735" href="Chapter.Imp.HoareLogicCompleteness.html#4714" class="Bound">Ps</a> <a id="4738" href="Chapter.Imp.HoareLogicCompleteness.html#4727" class="Bound">t</a> <a id="4740" class="Symbol">(</a><a id="4741" href="Chapter.Imp.BigStep.html#4198" class="InductiveConstructor">IfTrue</a> <a id="4748" href="Chapter.Imp.HoareLogicCompleteness.html#4719" class="Bound">b=true</a> <a id="4755" href="Chapter.Imp.HoareLogicCompleteness.html#4729" class="Bound">hyp</a><a id="4758" class="Symbol">)</a>

<a id="4761" class="Comment">-- Ps t : P s t ≡ ⦅ IF b THEN c₁ ELSE c₂ , s ⦆ ⇒ t -&gt; Q t</a>
<a id="4819" class="Comment">-- hyp : ⦅ c₁ , s ⦆ ⇒ t</a>
<a id="4843" class="Comment">-- b=true : bval b s == true</a>
<a id="4872" class="Comment">-- IfTrue b=true hyp : ⦅ IF b THEN c₁ ELSE c₂ , s ⦆ ⇒ t</a>

    <a id="4933" href="Chapter.Imp.HoareLogicCompleteness.html#4933" class="Function">true-premise</a> <a id="4946" class="Symbol">:</a> <a id="4948" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a>  <a id="4952" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="4954" class="Symbol">(λ</a> <a id="4957" href="Chapter.Imp.HoareLogicCompleteness.html#4957" class="Bound">s</a> <a id="4959" class="Symbol">-&gt;</a> <a id="4962" href="Chapter.Imp.HoareLogicCompleteness.html#4528" class="Function">P</a> <a id="4964" href="Chapter.Imp.HoareLogicCompleteness.html#4957" class="Bound">s</a> <a id="4966" href="Library.Logic.html#1349" class="Function Operator">∧</a> <a id="4968" href="Chapter.Imp.AexpBexp.html#10249" class="Function">bval</a> <a id="4973" href="Chapter.Imp.HoareLogicCompleteness.html#4459" class="Bound">b</a> <a id="4975" href="Chapter.Imp.HoareLogicCompleteness.html#4957" class="Bound">s</a> <a id="4977" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="4980" href="Library.Bool.html#52" class="InductiveConstructor">true</a><a id="4984" class="Symbol">)</a> <a id="4986" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a> <a id="4988" href="Chapter.Imp.HoareLogicCompleteness.html#4466" class="Bound">c₁</a> <a id="4991" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="4993" href="Chapter.Imp.HoareLogicCompleteness.html#4479" class="Bound">Q</a> <a id="4995" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
    <a id="5001" href="Chapter.Imp.HoareLogicCompleteness.html#4933" class="Function">true-premise</a> <a id="5014" class="Symbol">=</a> <a id="5016" href="Chapter.Imp.HoareLogic.html#7072" class="Function">H-Str</a> <a id="5022" href="Chapter.Imp.HoareLogicCompleteness.html#4626" class="Function">left-premise-true</a> <a id="5040" href="Chapter.Imp.HoareLogicCompleteness.html#4565" class="Function">IH1</a>

    <a id="5049" href="Chapter.Imp.HoareLogicCompleteness.html#5049" class="Function">IH2</a> <a id="5053" class="Symbol">:</a> <a id="5055" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="5058" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="5060" href="Chapter.Imp.HoareLogicCompleteness.html#2027" class="Function">wp</a> <a id="5063" href="Chapter.Imp.HoareLogicCompleteness.html#4474" class="Bound">c₂</a> <a id="5066" href="Chapter.Imp.HoareLogicCompleteness.html#4479" class="Bound">Q</a> <a id="5068" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a> <a id="5070" href="Chapter.Imp.HoareLogicCompleteness.html#4474" class="Bound">c₂</a> <a id="5073" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="5075" href="Chapter.Imp.HoareLogicCompleteness.html#4479" class="Bound">Q</a> <a id="5077" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
    <a id="5083" href="Chapter.Imp.HoareLogicCompleteness.html#5049" class="Function">IH2</a> <a id="5087" class="Symbol">=</a> <a id="5089" href="Chapter.Imp.HoareLogicCompleteness.html#3119" class="Function">wp-lemma</a> <a id="5098" href="Chapter.Imp.HoareLogicCompleteness.html#4474" class="Bound">c₂</a> <a id="5101" class="Symbol">{</a><a id="5102" href="Chapter.Imp.HoareLogicCompleteness.html#4479" class="Bound">Q</a><a id="5103" class="Symbol">}</a>

    <a id="5110" href="Chapter.Imp.HoareLogicCompleteness.html#5110" class="Function">left-premise-false</a> <a id="5129" class="Symbol">:</a> <a id="5131" class="Symbol">∀</a> <a id="5133" href="Chapter.Imp.HoareLogicCompleteness.html#5133" class="Bound">s</a> <a id="5135" class="Symbol">-&gt;</a> <a id="5138" href="Chapter.Imp.HoareLogicCompleteness.html#4528" class="Function">P</a> <a id="5140" href="Chapter.Imp.HoareLogicCompleteness.html#5133" class="Bound">s</a> <a id="5142" href="Library.Logic.html#1349" class="Function Operator">∧</a> <a id="5144" href="Chapter.Imp.AexpBexp.html#10249" class="Function">bval</a> <a id="5149" href="Chapter.Imp.HoareLogicCompleteness.html#4459" class="Bound">b</a> <a id="5151" href="Chapter.Imp.HoareLogicCompleteness.html#5133" class="Bound">s</a> <a id="5153" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="5156" href="Library.Bool.html#57" class="InductiveConstructor">false</a> <a id="5162" class="Symbol">-&gt;</a> <a id="5165" href="Chapter.Imp.HoareLogicCompleteness.html#2027" class="Function">wp</a> <a id="5168" href="Chapter.Imp.HoareLogicCompleteness.html#4474" class="Bound">c₂</a> <a id="5171" href="Chapter.Imp.HoareLogicCompleteness.html#4479" class="Bound">Q</a> <a id="5173" href="Chapter.Imp.HoareLogicCompleteness.html#5133" class="Bound">s</a>
    <a id="5179" href="Chapter.Imp.HoareLogicCompleteness.html#5110" class="Function">left-premise-false</a> <a id="5198" href="Chapter.Imp.HoareLogicCompleteness.html#5198" class="Bound">s</a> <a id="5200" class="Symbol">(</a><a id="5201" href="Chapter.Imp.HoareLogicCompleteness.html#5201" class="Bound">Ps</a> <a id="5204" href="Library.Logic.html#271" class="InductiveConstructor Operator">,</a> <a id="5206" href="Chapter.Imp.HoareLogicCompleteness.html#5206" class="Bound">b=false</a><a id="5213" class="Symbol">)</a> <a id="5215" href="Chapter.Imp.HoareLogicCompleteness.html#5215" class="Bound">t</a> <a id="5217" href="Chapter.Imp.HoareLogicCompleteness.html#5217" class="Bound">hyp</a> <a id="5221" class="Symbol">=</a> <a id="5223" href="Chapter.Imp.HoareLogicCompleteness.html#5201" class="Bound">Ps</a> <a id="5226" href="Chapter.Imp.HoareLogicCompleteness.html#5215" class="Bound">t</a> <a id="5228" class="Symbol">(</a><a id="5229" href="Chapter.Imp.BigStep.html#4385" class="InductiveConstructor">IfFalse</a> <a id="5237" href="Chapter.Imp.HoareLogicCompleteness.html#5206" class="Bound">b=false</a> <a id="5245" href="Chapter.Imp.HoareLogicCompleteness.html#5217" class="Bound">hyp</a><a id="5248" class="Symbol">)</a>

<a id="5251" class="Comment">-- Ps t : ⦅ IF b THEN c₁ ELSE c₂ , s ⦆ ⇒ t -&gt; Q t</a>
<a id="5301" class="Comment">-- hyp : ⦅ c₂ , s ⦆ ⇒ t</a>
<a id="5325" class="Comment">-- b=false : bval b s == false</a>
<a id="5356" class="Comment">-- IfFalse b=false hyp : ⦅ IF b THEN c₁ ELSE c₂ , s ⦆ ⇒ t</a>

    <a id="5419" href="Chapter.Imp.HoareLogicCompleteness.html#5419" class="Function">false-premise</a> <a id="5433" class="Symbol">:</a> <a id="5435" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="5438" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="5440" class="Symbol">(λ</a> <a id="5443" href="Chapter.Imp.HoareLogicCompleteness.html#5443" class="Bound">s</a> <a id="5445" class="Symbol">-&gt;</a> <a id="5448" href="Chapter.Imp.HoareLogicCompleteness.html#4528" class="Function">P</a> <a id="5450" href="Chapter.Imp.HoareLogicCompleteness.html#5443" class="Bound">s</a> <a id="5452" href="Library.Logic.html#1349" class="Function Operator">∧</a> <a id="5454" href="Chapter.Imp.AexpBexp.html#10249" class="Function">bval</a> <a id="5459" href="Chapter.Imp.HoareLogicCompleteness.html#4459" class="Bound">b</a> <a id="5461" href="Chapter.Imp.HoareLogicCompleteness.html#5443" class="Bound">s</a> <a id="5463" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="5466" href="Library.Bool.html#57" class="InductiveConstructor">false</a><a id="5471" class="Symbol">)</a> <a id="5473" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a> <a id="5475" href="Chapter.Imp.HoareLogicCompleteness.html#4474" class="Bound">c₂</a> <a id="5478" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="5480" href="Chapter.Imp.HoareLogicCompleteness.html#4479" class="Bound">Q</a> <a id="5482" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
    <a id="5488" href="Chapter.Imp.HoareLogicCompleteness.html#5419" class="Function">false-premise</a> <a id="5502" class="Symbol">=</a> <a id="5504" href="Chapter.Imp.HoareLogic.html#7072" class="Function">H-Str</a> <a id="5510" href="Chapter.Imp.HoareLogicCompleteness.html#5110" class="Function">left-premise-false</a> <a id="5529" href="Chapter.Imp.HoareLogicCompleteness.html#5049" class="Function">IH2</a>

<a id="5534" href="Chapter.Imp.HoareLogicCompleteness.html#3119" class="Function">wp-lemma</a> <a id="5543" class="Symbol">(</a><a id="5544" href="Chapter.Imp.BigStep.html#1738" class="InductiveConstructor Operator">WHILE</a> <a id="5550" href="Chapter.Imp.HoareLogicCompleteness.html#5550" class="Bound">b</a> <a id="5552" href="Chapter.Imp.BigStep.html#1738" class="InductiveConstructor Operator">DO</a> <a id="5555" href="Chapter.Imp.HoareLogicCompleteness.html#5555" class="Bound">c</a><a id="5556" class="Symbol">)</a> <a id="5558" class="Symbol">{</a><a id="5559" href="Chapter.Imp.HoareLogicCompleteness.html#5559" class="Bound">Q</a><a id="5560" class="Symbol">}</a> <a id="5562" class="Symbol">=</a> <a id="5564" href="Chapter.Imp.HoareLogic.html#7346" class="Function">H-Weak</a> <a id="5571" href="Chapter.Imp.HoareLogicCompleteness.html#6142" class="Function">claim2</a> <a id="5578" href="Chapter.Imp.HoareLogicCompleteness.html#6243" class="Function">weak-premise</a>
  <a id="5593" class="Keyword">where</a>
    <a id="5603" href="Chapter.Imp.HoareLogicCompleteness.html#5603" class="Function">P</a> <a id="5605" class="Symbol">=</a> <a id="5607" href="Chapter.Imp.HoareLogicCompleteness.html#2027" class="Function">wp</a> <a id="5610" class="Symbol">(</a><a id="5611" href="Chapter.Imp.BigStep.html#1738" class="InductiveConstructor Operator">WHILE</a> <a id="5617" href="Chapter.Imp.HoareLogicCompleteness.html#5550" class="Bound">b</a> <a id="5619" href="Chapter.Imp.BigStep.html#1738" class="InductiveConstructor Operator">DO</a> <a id="5622" href="Chapter.Imp.HoareLogicCompleteness.html#5555" class="Bound">c</a><a id="5623" class="Symbol">)</a> <a id="5625" href="Chapter.Imp.HoareLogicCompleteness.html#5559" class="Bound">Q</a>

    <a id="5632" href="Chapter.Imp.HoareLogicCompleteness.html#5632" class="Function">IH</a> <a id="5635" class="Symbol">:</a> <a id="5637" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="5640" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="5642" href="Chapter.Imp.HoareLogicCompleteness.html#2027" class="Function">wp</a> <a id="5645" href="Chapter.Imp.HoareLogicCompleteness.html#5555" class="Bound">c</a> <a id="5647" href="Chapter.Imp.HoareLogicCompleteness.html#5603" class="Function">P</a> <a id="5649" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a> <a id="5651" href="Chapter.Imp.HoareLogicCompleteness.html#5555" class="Bound">c</a> <a id="5653" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="5655" href="Chapter.Imp.HoareLogicCompleteness.html#5603" class="Function">P</a> <a id="5657" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
    <a id="5663" href="Chapter.Imp.HoareLogicCompleteness.html#5632" class="Function">IH</a> <a id="5666" class="Symbol">=</a> <a id="5668" href="Chapter.Imp.HoareLogicCompleteness.html#3119" class="Function">wp-lemma</a> <a id="5677" href="Chapter.Imp.HoareLogicCompleteness.html#5555" class="Bound">c</a> <a id="5679" class="Symbol">{</a><a id="5680" href="Chapter.Imp.HoareLogicCompleteness.html#5603" class="Function">P</a><a id="5681" class="Symbol">}</a>

    <a id="5688" href="Chapter.Imp.HoareLogicCompleteness.html#5688" class="Function">str-premise</a> <a id="5700" class="Symbol">:</a> <a id="5702" class="Symbol">∀</a> <a id="5704" href="Chapter.Imp.HoareLogicCompleteness.html#5704" class="Bound">s</a> <a id="5706" class="Symbol">-&gt;</a> <a id="5709" href="Chapter.Imp.HoareLogicCompleteness.html#5603" class="Function">P</a> <a id="5711" href="Chapter.Imp.HoareLogicCompleteness.html#5704" class="Bound">s</a> <a id="5713" href="Library.Logic.html#1349" class="Function Operator">∧</a> <a id="5715" href="Chapter.Imp.AexpBexp.html#10249" class="Function">bval</a> <a id="5720" href="Chapter.Imp.HoareLogicCompleteness.html#5550" class="Bound">b</a> <a id="5722" href="Chapter.Imp.HoareLogicCompleteness.html#5704" class="Bound">s</a> <a id="5724" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="5727" href="Library.Bool.html#52" class="InductiveConstructor">true</a> <a id="5732" class="Symbol">-&gt;</a> <a id="5735" href="Chapter.Imp.HoareLogicCompleteness.html#2027" class="Function">wp</a> <a id="5738" href="Chapter.Imp.HoareLogicCompleteness.html#5555" class="Bound">c</a> <a id="5740" href="Chapter.Imp.HoareLogicCompleteness.html#5603" class="Function">P</a> <a id="5742" href="Chapter.Imp.HoareLogicCompleteness.html#5704" class="Bound">s</a>
    <a id="5748" href="Chapter.Imp.HoareLogicCompleteness.html#5688" class="Function">str-premise</a> <a id="5760" href="Chapter.Imp.HoareLogicCompleteness.html#5760" class="Bound">s</a> <a id="5762" class="Symbol">(</a><a id="5763" href="Chapter.Imp.HoareLogicCompleteness.html#5763" class="Bound">Ps</a> <a id="5766" href="Library.Logic.html#271" class="InductiveConstructor Operator">,</a> <a id="5768" href="Chapter.Imp.HoareLogicCompleteness.html#5768" class="Bound">b=true</a><a id="5774" class="Symbol">)</a> <a id="5776" href="Chapter.Imp.HoareLogicCompleteness.html#5776" class="Bound">t</a> <a id="5778" href="Chapter.Imp.HoareLogicCompleteness.html#5778" class="Bound">hyp</a> <a id="5782" href="Chapter.Imp.HoareLogicCompleteness.html#5782" class="Bound">r</a> <a id="5784" href="Chapter.Imp.HoareLogicCompleteness.html#5784" class="Bound">w</a> <a id="5786" class="Symbol">=</a> 
                              <a id="5819" href="Chapter.Imp.HoareLogicCompleteness.html#5763" class="Bound">Ps</a> <a id="5822" href="Chapter.Imp.HoareLogicCompleteness.html#5782" class="Bound">r</a> <a id="5824" class="Symbol">(</a><a id="5825" href="Chapter.Imp.BigStep.html#4727" class="InductiveConstructor">WhileTrue</a> <a id="5835" href="Chapter.Imp.HoareLogicCompleteness.html#5768" class="Bound">b=true</a> <a id="5842" href="Chapter.Imp.HoareLogicCompleteness.html#5778" class="Bound">hyp</a> <a id="5846" href="Chapter.Imp.HoareLogicCompleteness.html#5784" class="Bound">w</a><a id="5847" class="Symbol">)</a>

<a id="5850" class="Comment">-- Ps r : ⦅ WHILE b DO c , s ⦆ ⇒ r -&gt; Q r</a>
<a id="5892" class="Comment">-- w : ⦅ WHILE b DO c , t ⦆ ⇒ r</a>
<a id="5924" class="Comment">-- hyp : ⦅ c , s ⦆ ⇒ t</a>
<a id="5947" class="Comment">-- b=true : bval b s == true</a>
<a id="5976" class="Comment">-- WhileTrue b=true hyp w : ⦅ WHILE b DO c , s ⦆ ⇒ r</a>
<a id="6029" class="Comment">-- Goal: Q r</a>

    <a id="6047" href="Chapter.Imp.HoareLogicCompleteness.html#6047" class="Function">claim1</a> <a id="6054" class="Symbol">:</a> <a id="6056" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="6059" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="6061" class="Symbol">(λ</a> <a id="6064" href="Chapter.Imp.HoareLogicCompleteness.html#6064" class="Bound">s</a> <a id="6066" class="Symbol">-&gt;</a> <a id="6069" href="Chapter.Imp.HoareLogicCompleteness.html#5603" class="Function">P</a> <a id="6071" href="Chapter.Imp.HoareLogicCompleteness.html#6064" class="Bound">s</a> <a id="6073" href="Library.Logic.html#1349" class="Function Operator">∧</a> <a id="6075" href="Chapter.Imp.AexpBexp.html#10249" class="Function">bval</a> <a id="6080" href="Chapter.Imp.HoareLogicCompleteness.html#5550" class="Bound">b</a> <a id="6082" href="Chapter.Imp.HoareLogicCompleteness.html#6064" class="Bound">s</a> <a id="6084" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="6087" href="Library.Bool.html#52" class="InductiveConstructor">true</a><a id="6091" class="Symbol">)</a> <a id="6093" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a> <a id="6095" href="Chapter.Imp.HoareLogicCompleteness.html#5555" class="Bound">c</a> <a id="6097" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="6099" href="Chapter.Imp.HoareLogicCompleteness.html#5603" class="Function">P</a> <a id="6101" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
    <a id="6107" href="Chapter.Imp.HoareLogicCompleteness.html#6047" class="Function">claim1</a> <a id="6114" class="Symbol">=</a> <a id="6116" href="Chapter.Imp.HoareLogic.html#7072" class="Function">H-Str</a> <a id="6122" href="Chapter.Imp.HoareLogicCompleteness.html#5688" class="Function">str-premise</a> <a id="6134" href="Chapter.Imp.HoareLogicCompleteness.html#5632" class="Function">IH</a>

    <a id="6142" href="Chapter.Imp.HoareLogicCompleteness.html#6142" class="Function">claim2</a> <a id="6149" class="Symbol">:</a> <a id="6151" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="6154" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="6156" href="Chapter.Imp.HoareLogicCompleteness.html#5603" class="Function">P</a> <a id="6158" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a> <a id="6160" href="Chapter.Imp.BigStep.html#1738" class="InductiveConstructor Operator">WHILE</a> <a id="6166" href="Chapter.Imp.HoareLogicCompleteness.html#5550" class="Bound">b</a> <a id="6168" href="Chapter.Imp.BigStep.html#1738" class="InductiveConstructor Operator">DO</a> <a id="6171" href="Chapter.Imp.HoareLogicCompleteness.html#5555" class="Bound">c</a> <a id="6173" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="6175" class="Symbol">(λ</a> <a id="6178" href="Chapter.Imp.HoareLogicCompleteness.html#6178" class="Bound">s</a> <a id="6180" class="Symbol">-&gt;</a> <a id="6183" href="Chapter.Imp.HoareLogicCompleteness.html#5603" class="Function">P</a> <a id="6185" href="Chapter.Imp.HoareLogicCompleteness.html#6178" class="Bound">s</a> <a id="6187" href="Library.Logic.html#1349" class="Function Operator">∧</a> <a id="6189" href="Chapter.Imp.AexpBexp.html#10249" class="Function">bval</a> <a id="6194" href="Chapter.Imp.HoareLogicCompleteness.html#5550" class="Bound">b</a> <a id="6196" href="Chapter.Imp.HoareLogicCompleteness.html#6178" class="Bound">s</a> <a id="6198" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="6201" href="Library.Bool.html#57" class="InductiveConstructor">false</a><a id="6206" class="Symbol">)</a> <a id="6208" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
    <a id="6214" href="Chapter.Imp.HoareLogicCompleteness.html#6142" class="Function">claim2</a> <a id="6221" class="Symbol">=</a> <a id="6223" href="Chapter.Imp.HoareLogic.html#4726" class="InductiveConstructor">H-While</a> <a id="6231" href="Chapter.Imp.HoareLogicCompleteness.html#6047" class="Function">claim1</a>

    <a id="6243" href="Chapter.Imp.HoareLogicCompleteness.html#6243" class="Function">weak-premise</a> <a id="6256" class="Symbol">:</a> <a id="6258" class="Symbol">∀</a> <a id="6260" href="Chapter.Imp.HoareLogicCompleteness.html#6260" class="Bound">s</a> <a id="6262" class="Symbol">-&gt;</a> <a id="6265" href="Chapter.Imp.HoareLogicCompleteness.html#5603" class="Function">P</a> <a id="6267" href="Chapter.Imp.HoareLogicCompleteness.html#6260" class="Bound">s</a> <a id="6269" href="Library.Logic.html#1349" class="Function Operator">∧</a> <a id="6271" href="Chapter.Imp.AexpBexp.html#10249" class="Function">bval</a> <a id="6276" href="Chapter.Imp.HoareLogicCompleteness.html#5550" class="Bound">b</a> <a id="6278" href="Chapter.Imp.HoareLogicCompleteness.html#6260" class="Bound">s</a> <a id="6280" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="6283" href="Library.Bool.html#57" class="InductiveConstructor">false</a> <a id="6289" class="Symbol">-&gt;</a> <a id="6292" href="Chapter.Imp.HoareLogicCompleteness.html#5559" class="Bound">Q</a> <a id="6294" href="Chapter.Imp.HoareLogicCompleteness.html#6260" class="Bound">s</a>
    <a id="6300" href="Chapter.Imp.HoareLogicCompleteness.html#6243" class="Function">weak-premise</a> <a id="6313" href="Chapter.Imp.HoareLogicCompleteness.html#6313" class="Bound">s</a> <a id="6315" class="Symbol">(</a><a id="6316" href="Chapter.Imp.HoareLogicCompleteness.html#6316" class="Bound">Ps</a> <a id="6319" href="Library.Logic.html#271" class="InductiveConstructor Operator">,</a> <a id="6321" href="Chapter.Imp.HoareLogicCompleteness.html#6321" class="Bound">b=false</a><a id="6328" class="Symbol">)</a> <a id="6330" class="Symbol">=</a> <a id="6332" href="Chapter.Imp.HoareLogicCompleteness.html#6316" class="Bound">Ps</a> <a id="6335" href="Chapter.Imp.HoareLogicCompleteness.html#6313" class="Bound">s</a> <a id="6337" class="Symbol">(</a><a id="6338" href="Chapter.Imp.BigStep.html#4569" class="InductiveConstructor">WhileFalse</a> <a id="6349" href="Chapter.Imp.HoareLogicCompleteness.html#6321" class="Bound">b=false</a><a id="6356" class="Symbol">)</a>

<a id="6359" class="Comment">-- Ps s : ⦅ WHILE b DO c , s ⦆ ⇒ s -&gt; Q s</a>
<a id="6401" class="Comment">-- b=false : bval b s == false</a>
<a id="6432" class="Comment">-- WhileFalse b=false : ⦅ WHILE b DO c , s ⦆ ⇒ s</a>
</pre>
<p>Eventually, we can prove the (relative) completeness theorem of Hoare logic
using rule <code class="language-plaintext highlighter-rouge">H-Str</code> with <code class="language-plaintext highlighter-rouge">Fact</code> and <code class="language-plaintext highlighter-rouge">wp-lemma</code> as premises.</p>

<pre class="Agda"><a id="completeness"></a><a id="6625" href="Chapter.Imp.HoareLogicCompleteness.html#6625" class="Function">completeness</a> <a id="6638" class="Symbol">:</a> <a id="6640" class="Symbol">∀</a> <a id="6642" class="Symbol">(</a><a id="6643" href="Chapter.Imp.HoareLogicCompleteness.html#6643" class="Bound">c</a> <a id="6645" class="Symbol">:</a> <a id="6647" href="Chapter.Imp.BigStep.html#1498" class="Datatype">Com</a><a id="6650" class="Symbol">)</a> <a id="6652" class="Symbol">{</a><a id="6653" href="Chapter.Imp.HoareLogicCompleteness.html#6653" class="Bound">P</a> <a id="6655" href="Chapter.Imp.HoareLogicCompleteness.html#6655" class="Bound">Q</a> <a id="6657" class="Symbol">:</a> <a id="6659" href="Chapter.Imp.HoareLogic.html#2499" class="Function">Assn</a><a id="6663" class="Symbol">}</a> <a id="6665" class="Symbol">-&gt;</a> <a id="6668" href="Chapter.Imp.HoareLogicSoundness.html#785" class="Function Operator">|=</a> <a id="6671" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="6673" href="Chapter.Imp.HoareLogicCompleteness.html#6653" class="Bound">P</a> <a id="6675" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a> <a id="6677" href="Chapter.Imp.HoareLogicCompleteness.html#6643" class="Bound">c</a> <a id="6679" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="6681" href="Chapter.Imp.HoareLogicCompleteness.html#6655" class="Bound">Q</a> <a id="6683" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a> <a id="6685" class="Symbol">-&gt;</a> <a id="6688" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a>  <a id="6692" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="6694" href="Chapter.Imp.HoareLogicCompleteness.html#6653" class="Bound">P</a> <a id="6696" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a> <a id="6698" href="Chapter.Imp.HoareLogicCompleteness.html#6643" class="Bound">c</a> <a id="6700" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="6702" href="Chapter.Imp.HoareLogicCompleteness.html#6655" class="Bound">Q</a> <a id="6704" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
<a id="6706" href="Chapter.Imp.HoareLogicCompleteness.html#6625" class="Function">completeness</a> <a id="6719" href="Chapter.Imp.HoareLogicCompleteness.html#6719" class="Bound">c</a> <a id="6721" class="Symbol">{</a><a id="6722" href="Chapter.Imp.HoareLogicCompleteness.html#6722" class="Bound">P</a><a id="6723" class="Symbol">}</a> <a id="6725" class="Symbol">{</a><a id="6726" href="Chapter.Imp.HoareLogicCompleteness.html#6726" class="Bound">Q</a><a id="6727" class="Symbol">}</a> <a id="6729" href="Chapter.Imp.HoareLogicCompleteness.html#6729" class="Bound">hyp</a> <a id="6733" class="Symbol">=</a> <a id="6735" href="Chapter.Imp.HoareLogic.html#7072" class="Function">H-Str</a> <a id="6741" href="Chapter.Imp.HoareLogicCompleteness.html#6775" class="Function">str-left</a> <a id="6750" class="Symbol">(</a><a id="6751" href="Chapter.Imp.HoareLogicCompleteness.html#3119" class="Function">wp-lemma</a> <a id="6760" href="Chapter.Imp.HoareLogicCompleteness.html#6719" class="Bound">c</a><a id="6761" class="Symbol">)</a>
  <a id="6765" class="Keyword">where</a>
    <a id="6775" href="Chapter.Imp.HoareLogicCompleteness.html#6775" class="Function">str-left</a> <a id="6784" class="Symbol">:</a> <a id="6786" class="Symbol">∀</a> <a id="6788" href="Chapter.Imp.HoareLogicCompleteness.html#6788" class="Bound">s</a> <a id="6790" class="Symbol">-&gt;</a> <a id="6793" href="Chapter.Imp.HoareLogicCompleteness.html#6722" class="Bound">P</a> <a id="6795" href="Chapter.Imp.HoareLogicCompleteness.html#6788" class="Bound">s</a> <a id="6797" class="Symbol">-&gt;</a> <a id="6800" href="Chapter.Imp.HoareLogicCompleteness.html#2027" class="Function">wp</a> <a id="6803" href="Chapter.Imp.HoareLogicCompleteness.html#6719" class="Bound">c</a> <a id="6805" href="Chapter.Imp.HoareLogicCompleteness.html#6726" class="Bound">Q</a> <a id="6807" href="Chapter.Imp.HoareLogicCompleteness.html#6788" class="Bound">s</a>
    <a id="6813" href="Chapter.Imp.HoareLogicCompleteness.html#6775" class="Function">str-left</a> <a id="6822" class="Symbol">=</a> <a id="6824" href="Chapter.Imp.HoareLogicCompleteness.html#2166" class="Function">Fact</a> <a id="6829" class="Symbol">{</a><a id="6830" href="Chapter.Imp.HoareLogicCompleteness.html#6722" class="Bound">P</a><a id="6831" class="Symbol">}</a> <a id="6833" class="Symbol">{</a><a id="6834" href="Chapter.Imp.HoareLogicCompleteness.html#6719" class="Bound">c</a><a id="6835" class="Symbol">}</a> <a id="6837" class="Symbol">{</a><a id="6838" href="Chapter.Imp.HoareLogicCompleteness.html#6726" class="Bound">Q</a><a id="6839" class="Symbol">}</a> <a id="6841" href="Chapter.Imp.HoareLogicCompleteness.html#6729" class="Bound">hyp</a>
</pre>
<h2 id="exercise">Exercise</h2>

<p>Prove the converse implication of <code class="language-plaintext highlighter-rouge">Fact</code>, namely that</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> ∀ {P c Q} -&gt; (∀ s -&gt; P s -&gt; wp c Q s) -&gt; |= [ P ] c [ Q ]
</code></pre></div></div>

<pre class="Agda solution"><a id="6986" class="Comment">-- EXERCISE</a>

<a id="Inv-Fact"></a><a id="6999" href="Chapter.Imp.HoareLogicCompleteness.html#6999" class="Function">Inv-Fact</a> <a id="7008" class="Symbol">:</a> <a id="7010" class="Symbol">∀</a> <a id="7012" class="Symbol">{</a><a id="7013" href="Chapter.Imp.HoareLogicCompleteness.html#7013" class="Bound">P</a> <a id="7015" href="Chapter.Imp.HoareLogicCompleteness.html#7015" class="Bound">c</a> <a id="7017" href="Chapter.Imp.HoareLogicCompleteness.html#7017" class="Bound">Q</a><a id="7018" class="Symbol">}</a> <a id="7020" class="Symbol">-&gt;</a> <a id="7023" class="Symbol">(∀</a> <a id="7026" href="Chapter.Imp.HoareLogicCompleteness.html#7026" class="Bound">s</a> <a id="7028" class="Symbol">-&gt;</a> <a id="7031" href="Chapter.Imp.HoareLogicCompleteness.html#7013" class="Bound">P</a> <a id="7033" href="Chapter.Imp.HoareLogicCompleteness.html#7026" class="Bound">s</a> <a id="7035" class="Symbol">-&gt;</a> <a id="7038" href="Chapter.Imp.HoareLogicCompleteness.html#2027" class="Function">wp</a> <a id="7041" href="Chapter.Imp.HoareLogicCompleteness.html#7015" class="Bound">c</a> <a id="7043" href="Chapter.Imp.HoareLogicCompleteness.html#7017" class="Bound">Q</a> <a id="7045" href="Chapter.Imp.HoareLogicCompleteness.html#7026" class="Bound">s</a><a id="7046" class="Symbol">)</a> <a id="7048" class="Symbol">-&gt;</a> <a id="7051" href="Chapter.Imp.HoareLogicSoundness.html#785" class="Function Operator">|=</a> <a id="7054" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="7056" href="Chapter.Imp.HoareLogicCompleteness.html#7013" class="Bound">P</a> <a id="7058" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a> <a id="7060" href="Chapter.Imp.HoareLogicCompleteness.html#7015" class="Bound">c</a> <a id="7062" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="7064" href="Chapter.Imp.HoareLogicCompleteness.html#7017" class="Bound">Q</a> <a id="7066" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
<a id="7068" href="Chapter.Imp.HoareLogicCompleteness.html#6999" class="Function">Inv-Fact</a> <a id="7077" href="Chapter.Imp.HoareLogicCompleteness.html#7077" class="Bound">hyp1</a> <a id="7082" class="Symbol">{</a><a id="7083" href="Chapter.Imp.HoareLogicCompleteness.html#7083" class="Bound">s</a><a id="7084" class="Symbol">}</a> <a id="7086" class="Symbol">{</a><a id="7087" href="Chapter.Imp.HoareLogicCompleteness.html#7087" class="Bound">t</a><a id="7088" class="Symbol">}</a> <a id="7090" href="Chapter.Imp.HoareLogicCompleteness.html#7090" class="Bound">hyp2</a> <a id="7095" href="Chapter.Imp.HoareLogicCompleteness.html#7095" class="Bound">hyp3</a> <a id="7100" class="Symbol">=</a> <a id="7102" href="Chapter.Imp.HoareLogicCompleteness.html#7077" class="Bound">hyp1</a> <a id="7107" href="Chapter.Imp.HoareLogicCompleteness.html#7083" class="Bound">s</a> <a id="7109" href="Chapter.Imp.HoareLogicCompleteness.html#7090" class="Bound">hyp2</a> <a id="7114" href="Chapter.Imp.HoareLogicCompleteness.html#7087" class="Bound">t</a> <a id="7116" href="Chapter.Imp.HoareLogicCompleteness.html#7095" class="Bound">hyp3</a>
</pre>


  </div>
  <ul class="menu">
  <li>
    <a href="Chapter.Imp.HoareLogicSoundness.html">‹ Soundness of Hoare Logic</a></li>
  <li>
    <a href="Chapter.Imp.VerificationConditions.html">Verification Conditions ›</a></li>
</ul>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>
  <div class="wrapper">
    <!-- <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/"> -->
    <!--   <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/4.0/88x31.png"/> -->
    <!-- </a> -->
    2022-2023
    <a href="https://boystrange.github.io">Luca Padovani</a>
    and <a href="http://www.di.unito.it/~deligu/">Ugo de'Liguoro</a>.
    Page generated on 20 Sep 2023.
  </div>
</footer>
</body>

</html>
