<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Specification of a sorting algorithm | Introduction to Program Verification in Agda</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="Specification of a sorting algorithm" />
<meta property="og:locale" content="en_US" />
<meta property="og:site_name" content="Introduction to Program Verification in Agda" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Specification of a sorting algorithm" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","headline":"Specification of a sorting algorithm","url":"/pages/Chapter.Fun.SortedLists.html"}</script>
<!-- End Jekyll SEO tag -->

  <link rel="stylesheet" href="../assets/css/main.css">
  <link rel="stylesheet" href="../assets/css/Agda.css">
  <script src="../assets/js/mathjax.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="../assets/js/codereveal.js"></script>
  <link type="application/atom+xml" rel="alternate" href="/feed.xml" title="Introduction to Program Verification in Agda" /><!-- <script src="/assets/js/clipboard.min.js"></script> -->
  <!-- <script src="/assets/js/codeselect.js"></script> -->
</head>
<body>

<header class="site-header" role="banner">
  <div class="wrapper">
    <a class="site-title" rel="author" href="../index.html">Introduction to Program Verification in Agda</a>
    

    <nav class="site-nav">
      <a href="https://agda.readthedocs.io/en/latest/">AGDA DOCS</a>
    </nav>
  </div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">
  <ul class="menu">
  <li><a href="Main.html">‹ Table of contents</a></li>
  <li>
    <a href="Chapter.Fun.ExtrinsicInsertionSort.html">Extrinsic verification of insertion sort ›</a></li>
</ul>
  <header class="post-header">
    <h1 class="post-title">Specification of a sorting algorithm</h1>
  </header>

  <div class="post-content">
    <pre class="Agda"><a id="100" class="Keyword">module</a> <a id="107" href="Chapter.Fun.SortedLists.html" class="Module">Chapter.Fun.SortedLists</a> <a id="131" class="Keyword">where</a>
</pre>
<p>In this chapter we address the problem of specifying the type of a
<em>sorting algorithm</em> on lists. This specification will be
instrumental in the following chapters, where we will verify the
correctness of some sorting algorithms. For the sake of simplicity
we will specify and verify sorting algorithms that work on lists of
natural numbers, but the Agda code can be easily generalized to work
with lists of arbitrary elements, provided that such elements are
equipped with a total order.</p>

<h2 id="imports">Imports</h2>

<pre class="Agda"><a id="647" class="Keyword">open</a> <a id="652" class="Keyword">import</a> <a id="659" href="Library.Fun.html" class="Module">Library.Fun</a>
<a id="671" class="Keyword">open</a> <a id="676" class="Keyword">import</a> <a id="683" href="Library.Nat.html" class="Module">Library.Nat</a>
<a id="695" class="Keyword">open</a> <a id="700" class="Keyword">import</a> <a id="707" href="Library.LessThan.html" class="Module">Library.LessThan</a>
<a id="724" class="Keyword">open</a> <a id="729" class="Keyword">import</a> <a id="736" href="Library.Logic.html" class="Module">Library.Logic</a>
<a id="750" class="Keyword">open</a> <a id="755" class="Keyword">import</a> <a id="762" href="Library.Equality.html" class="Module">Library.Equality</a>
<a id="779" class="Keyword">open</a> <a id="784" class="Keyword">import</a> <a id="791" href="Library.List.html" class="Module">Library.List</a> <a id="804" class="Keyword">using</a> <a id="810" class="Symbol">(</a><a id="811" href="Library.List.html#84" class="Datatype">List</a><a id="815" class="Symbol">;</a> <a id="817" href="Library.List.html#113" class="InductiveConstructor">[]</a><a id="819" class="Symbol">;</a> <a id="821" href="Library.List.html#129" class="InductiveConstructor Operator">_::_</a><a id="825" class="Symbol">;</a> <a id="827" href="Library.List.html#159" class="Function Operator">[_]</a><a id="830" class="Symbol">;</a> <a id="832" href="Library.List.html#432" class="Function">reverse</a><a id="839" class="Symbol">;</a> <a id="841" href="Library.List.html#208" class="Function Operator">_++_</a><a id="845" class="Symbol">)</a>
<a id="847" class="Keyword">open</a> <a id="852" class="Keyword">import</a> <a id="859" href="Library.List.Properties.html" class="Module">Library.List.Properties</a>
</pre>
<h2 id="what-is-a-sorting-function">What is a sorting function?</h2>

<p>There are various levels at which we can specify the type of a
sorting function. The most basic - and less informative -
specification is that of a function from lists to lists:</p>

<ul>
  <li>A sorting function takes a list of elements of type <code class="language-plaintext highlighter-rouge">ℕ</code> and
returns a list of elements of type <code class="language-plaintext highlighter-rouge">ℕ</code>.</li>
</ul>

<p>This specification is very imprecise, as it characterizes many
functions that have nothing to do with sorting. For example, both
the identity function and the constant function that always yields
<code class="language-plaintext highlighter-rouge">[]</code> satisfy this specification. We can refine this specification
stating that the resulting list should be sorted:</p>

<ul>
  <li>A sorting function takes a list of elements of type <code class="language-plaintext highlighter-rouge">ℕ</code> and
returns a <em>sorted</em> list of elements of type <code class="language-plaintext highlighter-rouge">ℕ</code>.</li>
</ul>

<p>A function satisfying this property is guaranteed to return a sorted
list, but the specification is still weak. For example, the constant
function that always returns <code class="language-plaintext highlighter-rouge">[]</code> would satisfy this specification,
since <code class="language-plaintext highlighter-rouge">[]</code> is trivially sorted.</p>

<p>The final refinement of our specification takes into account the
fact that the resulting list should contain the same elements as the
original list, possibly in a different order. Technically, the
returned list should be a permutation of the original one:</p>

<ul>
  <li>A sorting function takes a list <code class="language-plaintext highlighter-rouge">xs</code> of elements of type <code class="language-plaintext highlighter-rouge">ℕ</code> and
returns a <em>sorted</em> list <code class="language-plaintext highlighter-rouge">ys</code> of elements of type <code class="language-plaintext highlighter-rouge">ℕ</code> that is a
<em>permutation</em> of <code class="language-plaintext highlighter-rouge">xs</code>.</li>
</ul>

<p>In this specification, we are somehow forced to give names to the
original and returned lists, since we want to relate them
closely. This suggests that we will make use of dependent and
existential types to formalize this specification in Agda.</p>

<p>We now proceed specifying first what it means for a list to be
sorted and then what it means for a list to be a permutation of
another list.</p>

<h2 id="sorted-lists">Sorted lists</h2>

<p>In order to define a “sorted” predicate for lists, it is useful to
define an auxiliary predicate <code class="language-plaintext highlighter-rouge">LowerBound</code> such that <code class="language-plaintext highlighter-rouge">LowerBound x
xs</code> holds if <code class="language-plaintext highlighter-rouge">x</code> is a <em>lower bound</em> for all of the elements in the
list <code class="language-plaintext highlighter-rouge">xs</code>. We can define this predicate inductively by means of the
inference system below.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>                               x &lt;= y    LowerBound x ys
lb-[] ---------------    lb-:: -------------------------
      LowerBound x []           LowerBound x (y :: ys)
</code></pre></div></div>

<p>The element <code class="language-plaintext highlighter-rouge">x</code> is always a lower bound for the empty list, no
matter what <code class="language-plaintext highlighter-rouge">x</code> is. In order for <code class="language-plaintext highlighter-rouge">x</code> to be the lower bound of a
non-empty list <code class="language-plaintext highlighter-rouge">y :: ys</code>, it must be the case that <code class="language-plaintext highlighter-rouge">x &lt;= y</code> and that
<code class="language-plaintext highlighter-rouge">x</code> is a lower bound for <code class="language-plaintext highlighter-rouge">ys</code> as well. The translation of this
inference system into an Agda data type is straightforward.</p>

<pre class="Agda"><a id="3490" class="Keyword">data</a> <a id="LowerBound"></a><a id="3495" href="Chapter.Fun.SortedLists.html#3495" class="Datatype">LowerBound</a> <a id="3506" class="Symbol">(</a><a id="3507" href="Chapter.Fun.SortedLists.html#3507" class="Bound">x</a> <a id="3509" class="Symbol">:</a> <a id="3511" href="Library.Nat.html#32" class="Datatype">ℕ</a><a id="3512" class="Symbol">)</a> <a id="3514" class="Symbol">:</a> <a id="3516" href="Library.List.html#84" class="Datatype">List</a> <a id="3521" href="Library.Nat.html#32" class="Datatype">ℕ</a> <a id="3523" class="Symbol">-&gt;</a> <a id="3526" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="3530" class="Keyword">where</a>
  <a id="LowerBound.lb-[]"></a><a id="3538" href="Chapter.Fun.SortedLists.html#3538" class="InductiveConstructor">lb-[]</a> <a id="3544" class="Symbol">:</a> <a id="3546" href="Chapter.Fun.SortedLists.html#3495" class="Datatype">LowerBound</a> <a id="3557" href="Chapter.Fun.SortedLists.html#3507" class="Bound">x</a> <a id="3559" href="Library.List.html#113" class="InductiveConstructor">[]</a>
  <a id="LowerBound.lb-::"></a><a id="3564" href="Chapter.Fun.SortedLists.html#3564" class="InductiveConstructor">lb-::</a> <a id="3570" class="Symbol">:</a> <a id="3572" class="Symbol">∀{</a><a id="3574" href="Chapter.Fun.SortedLists.html#3574" class="Bound">y</a> <a id="3576" class="Symbol">:</a> <a id="3578" href="Library.Nat.html#32" class="Datatype">ℕ</a><a id="3579" class="Symbol">}</a> <a id="3581" class="Symbol">{</a><a id="3582" href="Chapter.Fun.SortedLists.html#3582" class="Bound">ys</a> <a id="3585" class="Symbol">:</a> <a id="3587" href="Library.List.html#84" class="Datatype">List</a> <a id="3592" href="Library.Nat.html#32" class="Datatype">ℕ</a><a id="3593" class="Symbol">}</a> <a id="3595" class="Symbol">-&gt;</a> <a id="3598" href="Chapter.Fun.SortedLists.html#3507" class="Bound">x</a> <a id="3600" href="Library.LessThan.html#210" class="Datatype Operator">&lt;=</a> <a id="3603" href="Chapter.Fun.SortedLists.html#3574" class="Bound">y</a> <a id="3605" class="Symbol">-&gt;</a> <a id="3608" href="Chapter.Fun.SortedLists.html#3495" class="Datatype">LowerBound</a> <a id="3619" href="Chapter.Fun.SortedLists.html#3507" class="Bound">x</a> <a id="3621" href="Chapter.Fun.SortedLists.html#3582" class="Bound">ys</a> <a id="3624" class="Symbol">-&gt;</a>
          <a id="3637" href="Chapter.Fun.SortedLists.html#3495" class="Datatype">LowerBound</a> <a id="3648" href="Chapter.Fun.SortedLists.html#3507" class="Bound">x</a> <a id="3650" class="Symbol">(</a><a id="3651" href="Chapter.Fun.SortedLists.html#3574" class="Bound">y</a> <a id="3653" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="3656" href="Chapter.Fun.SortedLists.html#3582" class="Bound">ys</a><a id="3658" class="Symbol">)</a>
</pre>
<p>A property of <code class="language-plaintext highlighter-rouge">LowerBound</code> that will be useful in the following is
the fact that a lower bound can be further lowered.</p>

<pre class="Agda"><a id="lower-lower-bound"></a><a id="3789" href="Chapter.Fun.SortedLists.html#3789" class="Function">lower-lower-bound</a> <a id="3807" class="Symbol">:</a> <a id="3809" class="Symbol">∀{</a><a id="3811" href="Chapter.Fun.SortedLists.html#3811" class="Bound">x</a> <a id="3813" href="Chapter.Fun.SortedLists.html#3813" class="Bound">y</a> <a id="3815" class="Symbol">:</a> <a id="3817" href="Library.Nat.html#32" class="Datatype">ℕ</a><a id="3818" class="Symbol">}</a> <a id="3820" class="Symbol">{</a><a id="3821" href="Chapter.Fun.SortedLists.html#3821" class="Bound">ys</a> <a id="3824" class="Symbol">:</a> <a id="3826" href="Library.List.html#84" class="Datatype">List</a> <a id="3831" href="Library.Nat.html#32" class="Datatype">ℕ</a><a id="3832" class="Symbol">}</a> <a id="3834" class="Symbol">-&gt;</a> <a id="3837" href="Chapter.Fun.SortedLists.html#3811" class="Bound">x</a> <a id="3839" href="Library.LessThan.html#210" class="Datatype Operator">&lt;=</a> <a id="3842" href="Chapter.Fun.SortedLists.html#3813" class="Bound">y</a> <a id="3844" class="Symbol">-&gt;</a> <a id="3847" href="Chapter.Fun.SortedLists.html#3495" class="Datatype">LowerBound</a> <a id="3858" href="Chapter.Fun.SortedLists.html#3813" class="Bound">y</a> <a id="3860" href="Chapter.Fun.SortedLists.html#3821" class="Bound">ys</a> <a id="3863" class="Symbol">-&gt;</a>
                    <a id="3886" href="Chapter.Fun.SortedLists.html#3495" class="Datatype">LowerBound</a> <a id="3897" href="Chapter.Fun.SortedLists.html#3811" class="Bound">x</a> <a id="3899" href="Chapter.Fun.SortedLists.html#3821" class="Bound">ys</a>
<a id="3902" href="Chapter.Fun.SortedLists.html#3789" class="Function">lower-lower-bound</a> <a id="3920" href="Chapter.Fun.SortedLists.html#3920" class="Bound">x≤y</a> <a id="3924" href="Chapter.Fun.SortedLists.html#3538" class="InductiveConstructor">lb-[]</a> <a id="3930" class="Symbol">=</a> <a id="3932" href="Chapter.Fun.SortedLists.html#3538" class="InductiveConstructor">lb-[]</a>
<a id="3938" href="Chapter.Fun.SortedLists.html#3789" class="Function">lower-lower-bound</a> <a id="3956" href="Chapter.Fun.SortedLists.html#3956" class="Bound">x≤y</a> <a id="3960" class="Symbol">(</a><a id="3961" href="Chapter.Fun.SortedLists.html#3564" class="InductiveConstructor">lb-::</a> <a id="3967" href="Chapter.Fun.SortedLists.html#3967" class="Bound">y≤z</a> <a id="3971" href="Chapter.Fun.SortedLists.html#3971" class="Bound">y≤ys</a><a id="3975" class="Symbol">)</a> <a id="3977" class="Symbol">=</a>
  <a id="3981" href="Chapter.Fun.SortedLists.html#3564" class="InductiveConstructor">lb-::</a> <a id="3987" class="Symbol">(</a><a id="3988" href="Library.LessThan.html#615" class="Function">le-trans</a> <a id="3997" href="Chapter.Fun.SortedLists.html#3956" class="Bound">x≤y</a> <a id="4001" href="Chapter.Fun.SortedLists.html#3967" class="Bound">y≤z</a><a id="4004" class="Symbol">)</a> <a id="4006" class="Symbol">(</a><a id="4007" href="Chapter.Fun.SortedLists.html#3789" class="Function">lower-lower-bound</a> <a id="4025" href="Chapter.Fun.SortedLists.html#3956" class="Bound">x≤y</a> <a id="4029" href="Chapter.Fun.SortedLists.html#3971" class="Bound">y≤ys</a><a id="4033" class="Symbol">)</a>
</pre>
<p>We make use of <code class="language-plaintext highlighter-rouge">LowerBound</code> to define the <code class="language-plaintext highlighter-rouge">Sorted</code> predicate as
follows.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>                                 LowerBound x xs    Sorted xs
sorted-[] ---------    sorted-:: ----------------------------
          Sorted []                    Sorted (x :: xs)
</code></pre></div></div>

<p>The empty list is trivially sorted. A non-empty list <code class="language-plaintext highlighter-rouge">x :: xs</code> is
sorted provided that <code class="language-plaintext highlighter-rouge">x</code> is a lower bound for <code class="language-plaintext highlighter-rouge">xs</code> and <code class="language-plaintext highlighter-rouge">xs</code> is
sorted as well. In Agda code we obtain:</p>

<pre class="Agda"><a id="4481" class="Keyword">data</a> <a id="Sorted"></a><a id="4486" href="Chapter.Fun.SortedLists.html#4486" class="Datatype">Sorted</a> <a id="4493" class="Symbol">:</a> <a id="4495" href="Library.List.html#84" class="Datatype">List</a> <a id="4500" href="Library.Nat.html#32" class="Datatype">ℕ</a> <a id="4502" class="Symbol">-&gt;</a> <a id="4505" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="4509" class="Keyword">where</a>
  <a id="Sorted.sorted-[]"></a><a id="4517" href="Chapter.Fun.SortedLists.html#4517" class="InductiveConstructor">sorted-[]</a> <a id="4527" class="Symbol">:</a> <a id="4529" href="Chapter.Fun.SortedLists.html#4486" class="Datatype">Sorted</a> <a id="4536" href="Library.List.html#113" class="InductiveConstructor">[]</a>
  <a id="Sorted.sorted-::"></a><a id="4541" href="Chapter.Fun.SortedLists.html#4541" class="InductiveConstructor">sorted-::</a> <a id="4551" class="Symbol">:</a> <a id="4553" class="Symbol">∀{</a><a id="4555" href="Chapter.Fun.SortedLists.html#4555" class="Bound">x</a> <a id="4557" class="Symbol">:</a> <a id="4559" href="Library.Nat.html#32" class="Datatype">ℕ</a><a id="4560" class="Symbol">}</a> <a id="4562" class="Symbol">{</a><a id="4563" href="Chapter.Fun.SortedLists.html#4563" class="Bound">xs</a> <a id="4566" class="Symbol">:</a> <a id="4568" href="Library.List.html#84" class="Datatype">List</a> <a id="4573" href="Library.Nat.html#32" class="Datatype">ℕ</a><a id="4574" class="Symbol">}</a> <a id="4576" class="Symbol">-&gt;</a> <a id="4579" href="Chapter.Fun.SortedLists.html#3495" class="Datatype">LowerBound</a> <a id="4590" href="Chapter.Fun.SortedLists.html#4555" class="Bound">x</a> <a id="4592" href="Chapter.Fun.SortedLists.html#4563" class="Bound">xs</a> <a id="4595" class="Symbol">-&gt;</a> <a id="4598" href="Chapter.Fun.SortedLists.html#4486" class="Datatype">Sorted</a> <a id="4605" href="Chapter.Fun.SortedLists.html#4563" class="Bound">xs</a> <a id="4608" class="Symbol">-&gt;</a>
              <a id="4625" href="Chapter.Fun.SortedLists.html#4486" class="Datatype">Sorted</a> <a id="4632" class="Symbol">(</a><a id="4633" href="Chapter.Fun.SortedLists.html#4555" class="Bound">x</a> <a id="4635" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="4638" href="Chapter.Fun.SortedLists.html#4563" class="Bound">xs</a><a id="4640" class="Symbol">)</a>
</pre>
<p>It is easy to prove that every singleton list is sorted.</p>

<pre class="Agda"><a id="singleton-sorted"></a><a id="4709" href="Chapter.Fun.SortedLists.html#4709" class="Function">singleton-sorted</a> <a id="4726" class="Symbol">:</a> <a id="4728" class="Symbol">∀(</a><a id="4730" href="Chapter.Fun.SortedLists.html#4730" class="Bound">x</a> <a id="4732" class="Symbol">:</a> <a id="4734" href="Library.Nat.html#32" class="Datatype">ℕ</a><a id="4735" class="Symbol">)</a> <a id="4737" class="Symbol">-&gt;</a> <a id="4740" href="Chapter.Fun.SortedLists.html#4486" class="Datatype">Sorted</a> <a id="4747" href="Library.List.html#159" class="Function Operator">[</a> <a id="4749" href="Chapter.Fun.SortedLists.html#4730" class="Bound">x</a> <a id="4751" href="Library.List.html#159" class="Function Operator">]</a>
<a id="4753" href="Chapter.Fun.SortedLists.html#4709" class="Function">singleton-sorted</a> <a id="4770" class="Symbol">_</a> <a id="4772" class="Symbol">=</a> <a id="4774" href="Chapter.Fun.SortedLists.html#4541" class="InductiveConstructor">sorted-::</a> <a id="4784" href="Chapter.Fun.SortedLists.html#3538" class="InductiveConstructor">lb-[]</a> <a id="4790" href="Chapter.Fun.SortedLists.html#4517" class="InductiveConstructor">sorted-[]</a>
</pre>
<h2 id="permutations">Permutations</h2>

<p>Next we have to define a binary predicate <code class="language-plaintext highlighter-rouge">_#_</code> over lists such that
<code class="language-plaintext highlighter-rouge">xs # ys</code> holds whenever <code class="language-plaintext highlighter-rouge">xs</code> is a permutation of <code class="language-plaintext highlighter-rouge">ys</code>. We establish
that <code class="language-plaintext highlighter-rouge">ys</code> is a permutation of <code class="language-plaintext highlighter-rouge">xs</code> if <code class="language-plaintext highlighter-rouge">ys</code> is obtained by a finite
sequence of <em>swaps</em> starting from <code class="language-plaintext highlighter-rouge">xs</code>, whereby each swap exchanges
the position of two subsequent elements in a list. In the simplest
case, the swapped elements are found just at the beginning of the
list, so we start by defining the following axiom.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#swap ---------------------------
      x :: y :: xs # y :: x :: xs
</code></pre></div></div>

<p>In general, we might want to swap two subsequent elements of a list
no matter how deep they are found within the list. So we extend the
predicate with the following congruence rule.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>           xs # ys
#cong -----------------
      x :: xs # x :: ys
</code></pre></div></div>

<p>Finally, we take the reflexive and transitive closure of the swap
relation defined so far, which allows us to combine an arbitrary
number of swaps into a permutation.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>                        xs # ys     ys # zs
#refl -------    #trans -------------------
      xs # xs                 xs # zs
</code></pre></div></div>

<p>Similarly to what we have done for the “less than” relation, we
define this inference system as an Agda data type. Since the notion
of permutation of a list is unrelated to the type of its elements,
we can define a data type with one parameter <code class="language-plaintext highlighter-rouge">A</code>, the type of the
elements of the lists, and two indices which are the lists being
related.</p>

<pre class="Agda"><a id="6271" class="Keyword">infix</a>  <a id="6278" class="Number">4</a> <a id="6280" href="Chapter.Fun.SortedLists.html#6290" class="Datatype Operator">_#_</a>

<a id="6285" class="Keyword">data</a> <a id="_#_"></a><a id="6290" href="Chapter.Fun.SortedLists.html#6290" class="Datatype Operator">_#_</a> <a id="6294" class="Symbol">{</a><a id="6295" href="Chapter.Fun.SortedLists.html#6295" class="Bound">A</a> <a id="6297" class="Symbol">:</a> <a id="6299" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="6302" class="Symbol">}</a> <a id="6304" class="Symbol">:</a> <a id="6306" href="Library.List.html#84" class="Datatype">List</a> <a id="6311" href="Chapter.Fun.SortedLists.html#6295" class="Bound">A</a> <a id="6313" class="Symbol">-&gt;</a> <a id="6316" href="Library.List.html#84" class="Datatype">List</a> <a id="6321" href="Chapter.Fun.SortedLists.html#6295" class="Bound">A</a> <a id="6323" class="Symbol">-&gt;</a> <a id="6326" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="6330" class="Keyword">where</a>
  <a id="_#_.#refl"></a><a id="6338" href="Chapter.Fun.SortedLists.html#6338" class="InductiveConstructor">#refl</a>  <a id="6345" class="Symbol">:</a> <a id="6347" class="Symbol">{</a><a id="6348" href="Chapter.Fun.SortedLists.html#6348" class="Bound">xs</a> <a id="6351" class="Symbol">:</a> <a id="6353" href="Library.List.html#84" class="Datatype">List</a> <a id="6358" href="Chapter.Fun.SortedLists.html#6295" class="Bound">A</a><a id="6359" class="Symbol">}</a> <a id="6361" class="Symbol">-&gt;</a> <a id="6364" href="Chapter.Fun.SortedLists.html#6348" class="Bound">xs</a> <a id="6367" href="Chapter.Fun.SortedLists.html#6290" class="Datatype Operator">#</a> <a id="6369" href="Chapter.Fun.SortedLists.html#6348" class="Bound">xs</a>
  <a id="_#_.#swap"></a><a id="6374" href="Chapter.Fun.SortedLists.html#6374" class="InductiveConstructor">#swap</a>  <a id="6381" class="Symbol">:</a> <a id="6383" class="Symbol">{</a><a id="6384" href="Chapter.Fun.SortedLists.html#6384" class="Bound">x</a> <a id="6386" href="Chapter.Fun.SortedLists.html#6386" class="Bound">y</a> <a id="6388" class="Symbol">:</a> <a id="6390" href="Chapter.Fun.SortedLists.html#6295" class="Bound">A</a><a id="6391" class="Symbol">}</a> <a id="6393" class="Symbol">{</a><a id="6394" href="Chapter.Fun.SortedLists.html#6394" class="Bound">xs</a> <a id="6397" class="Symbol">:</a> <a id="6399" href="Library.List.html#84" class="Datatype">List</a> <a id="6404" href="Chapter.Fun.SortedLists.html#6295" class="Bound">A</a><a id="6405" class="Symbol">}</a> <a id="6407" class="Symbol">-&gt;</a> <a id="6410" href="Chapter.Fun.SortedLists.html#6384" class="Bound">x</a> <a id="6412" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="6415" href="Chapter.Fun.SortedLists.html#6386" class="Bound">y</a> <a id="6417" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="6420" href="Chapter.Fun.SortedLists.html#6394" class="Bound">xs</a> <a id="6423" href="Chapter.Fun.SortedLists.html#6290" class="Datatype Operator">#</a> <a id="6425" href="Chapter.Fun.SortedLists.html#6386" class="Bound">y</a> <a id="6427" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="6430" href="Chapter.Fun.SortedLists.html#6384" class="Bound">x</a> <a id="6432" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="6435" href="Chapter.Fun.SortedLists.html#6394" class="Bound">xs</a>
  <a id="_#_.#cong"></a><a id="6440" href="Chapter.Fun.SortedLists.html#6440" class="InductiveConstructor">#cong</a>  <a id="6447" class="Symbol">:</a> <a id="6449" class="Symbol">{</a><a id="6450" href="Chapter.Fun.SortedLists.html#6450" class="Bound">x</a> <a id="6452" class="Symbol">:</a> <a id="6454" href="Chapter.Fun.SortedLists.html#6295" class="Bound">A</a><a id="6455" class="Symbol">}</a> <a id="6457" class="Symbol">{</a><a id="6458" href="Chapter.Fun.SortedLists.html#6458" class="Bound">xs</a> <a id="6461" href="Chapter.Fun.SortedLists.html#6461" class="Bound">ys</a> <a id="6464" class="Symbol">:</a> <a id="6466" href="Library.List.html#84" class="Datatype">List</a> <a id="6471" href="Chapter.Fun.SortedLists.html#6295" class="Bound">A</a><a id="6472" class="Symbol">}</a> <a id="6474" class="Symbol">-&gt;</a> <a id="6477" href="Chapter.Fun.SortedLists.html#6458" class="Bound">xs</a> <a id="6480" href="Chapter.Fun.SortedLists.html#6290" class="Datatype Operator">#</a> <a id="6482" href="Chapter.Fun.SortedLists.html#6461" class="Bound">ys</a> <a id="6485" class="Symbol">-&gt;</a> <a id="6488" href="Chapter.Fun.SortedLists.html#6450" class="Bound">x</a> <a id="6490" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="6493" href="Chapter.Fun.SortedLists.html#6458" class="Bound">xs</a> <a id="6496" href="Chapter.Fun.SortedLists.html#6290" class="Datatype Operator">#</a> <a id="6498" href="Chapter.Fun.SortedLists.html#6450" class="Bound">x</a> <a id="6500" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="6503" href="Chapter.Fun.SortedLists.html#6461" class="Bound">ys</a>
  <a id="_#_.#trans"></a><a id="6508" href="Chapter.Fun.SortedLists.html#6508" class="InductiveConstructor">#trans</a> <a id="6515" class="Symbol">:</a> <a id="6517" class="Symbol">{</a><a id="6518" href="Chapter.Fun.SortedLists.html#6518" class="Bound">xs</a> <a id="6521" href="Chapter.Fun.SortedLists.html#6521" class="Bound">ys</a> <a id="6524" href="Chapter.Fun.SortedLists.html#6524" class="Bound">zs</a> <a id="6527" class="Symbol">:</a> <a id="6529" href="Library.List.html#84" class="Datatype">List</a> <a id="6534" href="Chapter.Fun.SortedLists.html#6295" class="Bound">A</a><a id="6535" class="Symbol">}</a> <a id="6537" class="Symbol">-&gt;</a> <a id="6540" href="Chapter.Fun.SortedLists.html#6518" class="Bound">xs</a> <a id="6543" href="Chapter.Fun.SortedLists.html#6290" class="Datatype Operator">#</a> <a id="6545" href="Chapter.Fun.SortedLists.html#6521" class="Bound">ys</a> <a id="6548" class="Symbol">-&gt;</a> <a id="6551" href="Chapter.Fun.SortedLists.html#6521" class="Bound">ys</a> <a id="6554" href="Chapter.Fun.SortedLists.html#6290" class="Datatype Operator">#</a> <a id="6556" href="Chapter.Fun.SortedLists.html#6524" class="Bound">zs</a> <a id="6559" class="Symbol">-&gt;</a> <a id="6562" href="Chapter.Fun.SortedLists.html#6518" class="Bound">xs</a> <a id="6565" href="Chapter.Fun.SortedLists.html#6290" class="Datatype Operator">#</a> <a id="6567" href="Chapter.Fun.SortedLists.html#6524" class="Bound">zs</a>
</pre>
<p>As an example, the following term proves that $[1,2,3]$ is a
permutation of $[3,2,1]$.</p>

<pre class="Agda"><a id="6667" href="Chapter.Fun.SortedLists.html#6667" class="Function">_</a> <a id="6669" class="Symbol">:</a> <a id="6671" class="Number">1</a> <a id="6673" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="6676" class="Number">2</a> <a id="6678" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="6681" class="Number">3</a> <a id="6683" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="6686" href="Library.List.html#113" class="InductiveConstructor">[]</a> <a id="6689" href="Chapter.Fun.SortedLists.html#6290" class="Datatype Operator">#</a> <a id="6691" class="Number">3</a> <a id="6693" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="6696" class="Number">2</a> <a id="6698" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="6701" class="Number">1</a> <a id="6703" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="6706" href="Library.List.html#113" class="InductiveConstructor">[]</a>
<a id="6709" class="Symbol">_</a> <a id="6711" class="Symbol">=</a> <a id="6713" href="Chapter.Fun.SortedLists.html#6508" class="InductiveConstructor">#trans</a> <a id="6720" class="Symbol">(</a><a id="6721" href="Chapter.Fun.SortedLists.html#6508" class="InductiveConstructor">#trans</a> <a id="6728" href="Chapter.Fun.SortedLists.html#6374" class="InductiveConstructor">#swap</a> <a id="6734" class="Symbol">(</a><a id="6735" href="Chapter.Fun.SortedLists.html#6440" class="InductiveConstructor">#cong</a> <a id="6741" href="Chapter.Fun.SortedLists.html#6374" class="InductiveConstructor">#swap</a><a id="6746" class="Symbol">))</a> <a id="6749" href="Chapter.Fun.SortedLists.html#6374" class="InductiveConstructor">#swap</a>
</pre>
<p>The relation <code class="language-plaintext highlighter-rouge">#</code> is reflexive and transitive by definition, since
there are constructors corresponding to these properties. We can
prove that it is also <em>symmetric</em>, thus establishing that <code class="language-plaintext highlighter-rouge">#</code> is an
equivalence relation.</p>

<pre class="Agda"><a id="#symm"></a><a id="6986" href="Chapter.Fun.SortedLists.html#6986" class="Function">#symm</a> <a id="6992" class="Symbol">:</a> <a id="6994" class="Symbol">{</a><a id="6995" href="Chapter.Fun.SortedLists.html#6995" class="Bound">A</a> <a id="6997" class="Symbol">:</a> <a id="6999" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="7002" class="Symbol">}</a> <a id="7004" class="Symbol">{</a><a id="7005" href="Chapter.Fun.SortedLists.html#7005" class="Bound">xs</a> <a id="7008" href="Chapter.Fun.SortedLists.html#7008" class="Bound">ys</a> <a id="7011" class="Symbol">:</a> <a id="7013" href="Library.List.html#84" class="Datatype">List</a> <a id="7018" href="Chapter.Fun.SortedLists.html#6995" class="Bound">A</a><a id="7019" class="Symbol">}</a> <a id="7021" class="Symbol">-&gt;</a> <a id="7024" href="Chapter.Fun.SortedLists.html#7005" class="Bound">xs</a> <a id="7027" href="Chapter.Fun.SortedLists.html#6290" class="Datatype Operator">#</a> <a id="7029" href="Chapter.Fun.SortedLists.html#7008" class="Bound">ys</a> <a id="7032" class="Symbol">-&gt;</a> <a id="7035" href="Chapter.Fun.SortedLists.html#7008" class="Bound">ys</a> <a id="7038" href="Chapter.Fun.SortedLists.html#6290" class="Datatype Operator">#</a> <a id="7040" href="Chapter.Fun.SortedLists.html#7005" class="Bound">xs</a>
<a id="7043" href="Chapter.Fun.SortedLists.html#6986" class="Function">#symm</a> <a id="7049" href="Chapter.Fun.SortedLists.html#6338" class="InductiveConstructor">#refl</a>         <a id="7063" class="Symbol">=</a> <a id="7065" href="Chapter.Fun.SortedLists.html#6338" class="InductiveConstructor">#refl</a>
<a id="7071" href="Chapter.Fun.SortedLists.html#6986" class="Function">#symm</a> <a id="7077" href="Chapter.Fun.SortedLists.html#6374" class="InductiveConstructor">#swap</a>         <a id="7091" class="Symbol">=</a> <a id="7093" href="Chapter.Fun.SortedLists.html#6374" class="InductiveConstructor">#swap</a>
<a id="7099" href="Chapter.Fun.SortedLists.html#6986" class="Function">#symm</a> <a id="7105" class="Symbol">(</a><a id="7106" href="Chapter.Fun.SortedLists.html#6440" class="InductiveConstructor">#cong</a> <a id="7112" href="Chapter.Fun.SortedLists.html#7112" class="Bound">π</a><a id="7113" class="Symbol">)</a>     <a id="7119" class="Symbol">=</a> <a id="7121" href="Chapter.Fun.SortedLists.html#6440" class="InductiveConstructor">#cong</a> <a id="7127" class="Symbol">(</a><a id="7128" href="Chapter.Fun.SortedLists.html#6986" class="Function">#symm</a> <a id="7134" href="Chapter.Fun.SortedLists.html#7112" class="Bound">π</a><a id="7135" class="Symbol">)</a>
<a id="7137" href="Chapter.Fun.SortedLists.html#6986" class="Function">#symm</a> <a id="7143" class="Symbol">(</a><a id="7144" href="Chapter.Fun.SortedLists.html#6508" class="InductiveConstructor">#trans</a> <a id="7151" href="Chapter.Fun.SortedLists.html#7151" class="Bound">π</a> <a id="7153" href="Chapter.Fun.SortedLists.html#7153" class="Bound">π&#39;</a><a id="7155" class="Symbol">)</a> <a id="7157" class="Symbol">=</a> <a id="7159" href="Chapter.Fun.SortedLists.html#6508" class="InductiveConstructor">#trans</a> <a id="7166" class="Symbol">(</a><a id="7167" href="Chapter.Fun.SortedLists.html#6986" class="Function">#symm</a> <a id="7173" href="Chapter.Fun.SortedLists.html#7153" class="Bound">π&#39;</a><a id="7175" class="Symbol">)</a> <a id="7177" class="Symbol">(</a><a id="7178" href="Chapter.Fun.SortedLists.html#6986" class="Function">#symm</a> <a id="7184" href="Chapter.Fun.SortedLists.html#7151" class="Bound">π</a><a id="7185" class="Symbol">)</a>
</pre>
<!--
<pre class="Agda"><a id="7201" class="Keyword">infix</a>  <a id="7208" class="Number">1</a> <a id="7210" href="Chapter.Fun.SortedLists.html#7256" class="Function Operator">#begin_</a>
<a id="7218" class="Keyword">infixr</a> <a id="7225" class="Number">2</a> <a id="7227" href="Chapter.Fun.SortedLists.html#7495" class="Function Operator">_#⟨⟩_</a> <a id="7233" href="Chapter.Fun.SortedLists.html#7393" class="Function Operator">_#⟨_⟩_</a>
<a id="7240" class="Keyword">infix</a>  <a id="7247" class="Number">3</a> <a id="7249" href="Chapter.Fun.SortedLists.html#7332" class="Function Operator">_#end</a>

<a id="#begin_"></a><a id="7256" href="Chapter.Fun.SortedLists.html#7256" class="Function Operator">#begin_</a> <a id="7264" class="Symbol">:</a> <a id="7266" class="Symbol">{</a><a id="7267" href="Chapter.Fun.SortedLists.html#7267" class="Bound">A</a> <a id="7269" class="Symbol">:</a> <a id="7271" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="7274" class="Symbol">}</a> <a id="7276" class="Symbol">{</a><a id="7277" href="Chapter.Fun.SortedLists.html#7277" class="Bound">xs</a> <a id="7280" href="Chapter.Fun.SortedLists.html#7280" class="Bound">ys</a> <a id="7283" class="Symbol">:</a> <a id="7285" href="Library.List.html#84" class="Datatype">List</a> <a id="7290" href="Chapter.Fun.SortedLists.html#7267" class="Bound">A</a><a id="7291" class="Symbol">}</a> <a id="7293" class="Symbol">-&gt;</a> <a id="7296" href="Chapter.Fun.SortedLists.html#7277" class="Bound">xs</a> <a id="7299" href="Chapter.Fun.SortedLists.html#6290" class="Datatype Operator">#</a> <a id="7301" href="Chapter.Fun.SortedLists.html#7280" class="Bound">ys</a> <a id="7304" class="Symbol">-&gt;</a> <a id="7307" href="Chapter.Fun.SortedLists.html#7277" class="Bound">xs</a> <a id="7310" href="Chapter.Fun.SortedLists.html#6290" class="Datatype Operator">#</a> <a id="7312" href="Chapter.Fun.SortedLists.html#7280" class="Bound">ys</a>
<a id="7315" href="Chapter.Fun.SortedLists.html#7256" class="Function Operator">#begin_</a> <a id="7323" href="Chapter.Fun.SortedLists.html#7323" class="Bound">ps</a> <a id="7326" class="Symbol">=</a> <a id="7328" href="Chapter.Fun.SortedLists.html#7323" class="Bound">ps</a>

<a id="_#end"></a><a id="7332" href="Chapter.Fun.SortedLists.html#7332" class="Function Operator">_#end</a> <a id="7338" class="Symbol">:</a> <a id="7340" class="Symbol">{</a><a id="7341" href="Chapter.Fun.SortedLists.html#7341" class="Bound">A</a> <a id="7343" class="Symbol">:</a> <a id="7345" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="7348" class="Symbol">}</a> <a id="7350" class="Symbol">(</a><a id="7351" href="Chapter.Fun.SortedLists.html#7351" class="Bound">xs</a> <a id="7354" class="Symbol">:</a> <a id="7356" href="Library.List.html#84" class="Datatype">List</a> <a id="7361" href="Chapter.Fun.SortedLists.html#7341" class="Bound">A</a><a id="7362" class="Symbol">)</a> <a id="7364" class="Symbol">-&gt;</a> <a id="7367" href="Chapter.Fun.SortedLists.html#7351" class="Bound">xs</a> <a id="7370" href="Chapter.Fun.SortedLists.html#6290" class="Datatype Operator">#</a> <a id="7372" href="Chapter.Fun.SortedLists.html#7351" class="Bound">xs</a>
<a id="7375" href="Chapter.Fun.SortedLists.html#7332" class="Function Operator">_#end</a> <a id="7381" href="Chapter.Fun.SortedLists.html#7381" class="Bound">xs</a> <a id="7384" class="Symbol">=</a> <a id="7386" href="Chapter.Fun.SortedLists.html#6338" class="InductiveConstructor">#refl</a>

<a id="_#⟨_⟩_"></a><a id="7393" href="Chapter.Fun.SortedLists.html#7393" class="Function Operator">_#⟨_⟩_</a> <a id="7400" class="Symbol">:</a> <a id="7402" class="Symbol">{</a><a id="7403" href="Chapter.Fun.SortedLists.html#7403" class="Bound">A</a> <a id="7405" class="Symbol">:</a> <a id="7407" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="7410" class="Symbol">}</a> <a id="7412" class="Symbol">(</a><a id="7413" href="Chapter.Fun.SortedLists.html#7413" class="Bound">xs</a> <a id="7416" class="Symbol">:</a> <a id="7418" href="Library.List.html#84" class="Datatype">List</a> <a id="7423" href="Chapter.Fun.SortedLists.html#7403" class="Bound">A</a><a id="7424" class="Symbol">)</a> <a id="7426" class="Symbol">{</a><a id="7427" href="Chapter.Fun.SortedLists.html#7427" class="Bound">ys</a> <a id="7430" href="Chapter.Fun.SortedLists.html#7430" class="Bound">zs</a> <a id="7433" class="Symbol">:</a> <a id="7435" href="Library.List.html#84" class="Datatype">List</a> <a id="7440" href="Chapter.Fun.SortedLists.html#7403" class="Bound">A</a><a id="7441" class="Symbol">}</a> <a id="7443" class="Symbol">-&gt;</a> <a id="7446" href="Chapter.Fun.SortedLists.html#7413" class="Bound">xs</a> <a id="7449" href="Chapter.Fun.SortedLists.html#6290" class="Datatype Operator">#</a> <a id="7451" href="Chapter.Fun.SortedLists.html#7427" class="Bound">ys</a> <a id="7454" class="Symbol">-&gt;</a> <a id="7457" href="Chapter.Fun.SortedLists.html#7427" class="Bound">ys</a> <a id="7460" href="Chapter.Fun.SortedLists.html#6290" class="Datatype Operator">#</a> <a id="7462" href="Chapter.Fun.SortedLists.html#7430" class="Bound">zs</a> <a id="7465" class="Symbol">-&gt;</a> <a id="7468" href="Chapter.Fun.SortedLists.html#7413" class="Bound">xs</a> <a id="7471" href="Chapter.Fun.SortedLists.html#6290" class="Datatype Operator">#</a> <a id="7473" href="Chapter.Fun.SortedLists.html#7430" class="Bound">zs</a>
<a id="7476" href="Chapter.Fun.SortedLists.html#7393" class="Function Operator">_#⟨_⟩_</a> <a id="7483" class="Symbol">_</a> <a id="7485" class="Symbol">=</a> <a id="7487" href="Chapter.Fun.SortedLists.html#6508" class="InductiveConstructor">#trans</a>

<a id="_#⟨⟩_"></a><a id="7495" href="Chapter.Fun.SortedLists.html#7495" class="Function Operator">_#⟨⟩_</a> <a id="7501" class="Symbol">:</a> <a id="7503" class="Symbol">{</a><a id="7504" href="Chapter.Fun.SortedLists.html#7504" class="Bound">A</a> <a id="7506" class="Symbol">:</a> <a id="7508" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="7511" class="Symbol">}</a> <a id="7513" class="Symbol">(</a><a id="7514" href="Chapter.Fun.SortedLists.html#7514" class="Bound">xs</a> <a id="7517" class="Symbol">:</a> <a id="7519" href="Library.List.html#84" class="Datatype">List</a> <a id="7524" href="Chapter.Fun.SortedLists.html#7504" class="Bound">A</a><a id="7525" class="Symbol">)</a> <a id="7527" class="Symbol">{</a><a id="7528" href="Chapter.Fun.SortedLists.html#7528" class="Bound">ys</a> <a id="7531" class="Symbol">:</a> <a id="7533" href="Library.List.html#84" class="Datatype">List</a> <a id="7538" href="Chapter.Fun.SortedLists.html#7504" class="Bound">A</a><a id="7539" class="Symbol">}</a> <a id="7541" class="Symbol">-&gt;</a> <a id="7544" href="Chapter.Fun.SortedLists.html#7514" class="Bound">xs</a> <a id="7547" href="Chapter.Fun.SortedLists.html#6290" class="Datatype Operator">#</a> <a id="7549" href="Chapter.Fun.SortedLists.html#7528" class="Bound">ys</a> <a id="7552" class="Symbol">-&gt;</a> <a id="7555" href="Chapter.Fun.SortedLists.html#7514" class="Bound">xs</a> <a id="7558" href="Chapter.Fun.SortedLists.html#6290" class="Datatype Operator">#</a> <a id="7560" href="Chapter.Fun.SortedLists.html#7528" class="Bound">ys</a>
<a id="7563" class="Symbol">_</a> <a id="7565" href="Chapter.Fun.SortedLists.html#7495" class="Function Operator">#⟨⟩</a> <a id="7569" href="Chapter.Fun.SortedLists.html#7569" class="Bound">ps</a> <a id="7572" class="Symbol">=</a> <a id="7574" href="Chapter.Fun.SortedLists.html#7569" class="Bound">ps</a>
</pre>-->

<p>In the following we will have to write some rather complex proofs
involving permutations. To simplify these proofs and make them more
readable, it is convenient to use some derived operators that allow
us to write chains of simpler permutation steps, in the same vein as
the reasoning blocks that allow us to write chains of equalities. In
general these chains have the form</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#begin E₁ #⟨ p₁ ⟩ E₂ #⟨ p₂ ⟩ E₃ ... Eₙ #end
</code></pre></div></div>

<p>where <code class="language-plaintext highlighter-rouge">E₁</code>, …, <code class="language-plaintext highlighter-rouge">Eₙ</code> are lists, and each <code class="language-plaintext highlighter-rouge">pᵢ</code> proves (i.e., has
type) <code class="language-plaintext highlighter-rouge">Eᵢ # Eᵢ₊₁</code>. For example, we can provide the following
alternative proof of the fact that $[1,2,3]$ is a permutation of
$[3,2,1]$.</p>

<pre class="Agda"><a id="8218" href="Chapter.Fun.SortedLists.html#8218" class="Function">_</a> <a id="8220" class="Symbol">:</a> <a id="8222" class="Number">1</a> <a id="8224" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="8227" class="Number">2</a> <a id="8229" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="8232" class="Number">3</a> <a id="8234" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="8237" href="Library.List.html#113" class="InductiveConstructor">[]</a> <a id="8240" href="Chapter.Fun.SortedLists.html#6290" class="Datatype Operator">#</a> <a id="8242" class="Number">3</a> <a id="8244" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="8247" class="Number">2</a> <a id="8249" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="8252" class="Number">1</a> <a id="8254" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="8257" href="Library.List.html#113" class="InductiveConstructor">[]</a>
<a id="8260" class="Symbol">_</a> <a id="8262" class="Symbol">=</a> <a id="8264" href="Chapter.Fun.SortedLists.html#7256" class="Function Operator">#begin</a>
      <a id="8277" class="Number">1</a> <a id="8279" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="8282" class="Number">2</a> <a id="8284" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="8287" class="Number">3</a> <a id="8289" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="8292" href="Library.List.html#113" class="InductiveConstructor">[]</a> <a id="8295" href="Chapter.Fun.SortedLists.html#7393" class="Function Operator">#⟨</a> <a id="8298" href="Chapter.Fun.SortedLists.html#6374" class="InductiveConstructor">#swap</a> <a id="8304" href="Chapter.Fun.SortedLists.html#7393" class="Function Operator">⟩</a>
      <a id="8312" class="Number">2</a> <a id="8314" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="8317" class="Number">1</a> <a id="8319" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="8322" class="Number">3</a> <a id="8324" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="8327" href="Library.List.html#113" class="InductiveConstructor">[]</a> <a id="8330" href="Chapter.Fun.SortedLists.html#7393" class="Function Operator">#⟨</a> <a id="8333" href="Chapter.Fun.SortedLists.html#6440" class="InductiveConstructor">#cong</a> <a id="8339" href="Chapter.Fun.SortedLists.html#6374" class="InductiveConstructor">#swap</a> <a id="8345" href="Chapter.Fun.SortedLists.html#7393" class="Function Operator">⟩</a>
      <a id="8353" class="Number">2</a> <a id="8355" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="8358" class="Number">3</a> <a id="8360" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="8363" class="Number">1</a> <a id="8365" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="8368" href="Library.List.html#113" class="InductiveConstructor">[]</a> <a id="8371" href="Chapter.Fun.SortedLists.html#7393" class="Function Operator">#⟨</a> <a id="8374" href="Chapter.Fun.SortedLists.html#6374" class="InductiveConstructor">#swap</a> <a id="8380" href="Chapter.Fun.SortedLists.html#7393" class="Function Operator">⟩</a>
      <a id="8388" class="Number">3</a> <a id="8390" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="8393" class="Number">2</a> <a id="8395" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="8398" class="Number">1</a> <a id="8400" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="8403" href="Library.List.html#113" class="InductiveConstructor">[]</a>
    <a id="8410" href="Chapter.Fun.SortedLists.html#7332" class="Function Operator">#end</a>
</pre>
<p>We do not discuss the definition of these operators here, the
interested reader may found in the source code of the <a href="List.Permutation.html">Mini Agda
Library</a>.</p>

<h2 id="putting-it-all-together">Putting it all together</h2>

<p>A sorting function is a function that takes a list <code class="language-plaintext highlighter-rouge">xs</code> and yields a
triple consisting of another list <code class="language-plaintext highlighter-rouge">ys</code>, a proof that <code class="language-plaintext highlighter-rouge">ys</code> is a
permutation of <code class="language-plaintext highlighter-rouge">xs</code>, and a proof that <code class="language-plaintext highlighter-rouge">ys</code> is sorted.</p>

<pre class="Agda"><a id="SortingFunction"></a><a id="8800" href="Chapter.Fun.SortedLists.html#8800" class="Function">SortingFunction</a> <a id="8816" class="Symbol">:</a> <a id="8818" href="Agda.Primitive.html#326" class="Primitive">Set</a>
<a id="8822" href="Chapter.Fun.SortedLists.html#8800" class="Function">SortingFunction</a> <a id="8838" class="Symbol">=</a> <a id="8840" class="Symbol">∀(</a><a id="8842" href="Chapter.Fun.SortedLists.html#8842" class="Bound">xs</a> <a id="8845" class="Symbol">:</a> <a id="8847" href="Library.List.html#84" class="Datatype">List</a> <a id="8852" href="Library.Nat.html#32" class="Datatype">ℕ</a><a id="8853" class="Symbol">)</a> <a id="8855" class="Symbol">-&gt;</a> <a id="8858" href="Library.Logic.html#632" class="Function">∃[</a> <a id="8861" href="Chapter.Fun.SortedLists.html#8861" class="Bound">ys</a> <a id="8864" href="Library.Logic.html#632" class="Function">]</a> <a id="8866" href="Chapter.Fun.SortedLists.html#8861" class="Bound">ys</a> <a id="8869" href="Chapter.Fun.SortedLists.html#6290" class="Datatype Operator">#</a> <a id="8871" href="Chapter.Fun.SortedLists.html#8842" class="Bound">xs</a> <a id="8874" href="Library.Logic.html#1349" class="Function Operator">∧</a> <a id="8876" href="Chapter.Fun.SortedLists.html#4486" class="Datatype">Sorted</a> <a id="8883" href="Chapter.Fun.SortedLists.html#8861" class="Bound">ys</a>
</pre>
<h2 id="exercises">Exercises</h2>

<p>Prove that permutations preserve lower bounds.</p>

<pre class="Agda"><a id="lower-bound-permutation"></a><a id="8957" href="Chapter.Fun.SortedLists.html#8957" class="Function">lower-bound-permutation</a> <a id="8981" class="Symbol">:</a> <a id="8983" class="Symbol">∀{</a><a id="8985" href="Chapter.Fun.SortedLists.html#8985" class="Bound">x</a> <a id="8987" class="Symbol">:</a> <a id="8989" href="Library.Nat.html#32" class="Datatype">ℕ</a><a id="8990" class="Symbol">}</a> <a id="8992" class="Symbol">{</a><a id="8993" href="Chapter.Fun.SortedLists.html#8993" class="Bound">xs</a> <a id="8996" href="Chapter.Fun.SortedLists.html#8996" class="Bound">ys</a> <a id="8999" class="Symbol">:</a> <a id="9001" href="Library.List.html#84" class="Datatype">List</a> <a id="9006" href="Library.Nat.html#32" class="Datatype">ℕ</a><a id="9007" class="Symbol">}</a> <a id="9009" class="Symbol">-&gt;</a> <a id="9012" href="Chapter.Fun.SortedLists.html#8996" class="Bound">ys</a> <a id="9015" href="Chapter.Fun.SortedLists.html#6290" class="Datatype Operator">#</a> <a id="9017" href="Chapter.Fun.SortedLists.html#8993" class="Bound">xs</a> <a id="9020" class="Symbol">-&gt;</a>
                          <a id="9049" href="Chapter.Fun.SortedLists.html#3495" class="Datatype">LowerBound</a> <a id="9060" href="Chapter.Fun.SortedLists.html#8985" class="Bound">x</a> <a id="9062" href="Chapter.Fun.SortedLists.html#8993" class="Bound">xs</a> <a id="9065" class="Symbol">-&gt;</a> <a id="9068" href="Chapter.Fun.SortedLists.html#3495" class="Datatype">LowerBound</a> <a id="9079" href="Chapter.Fun.SortedLists.html#8985" class="Bound">x</a> <a id="9081" href="Chapter.Fun.SortedLists.html#8996" class="Bound">ys</a>
</pre>
<pre class="Agda solution"><a id="9093" href="Chapter.Fun.SortedLists.html#8957" class="Function">lower-bound-permutation</a> <a id="9117" href="Chapter.Fun.SortedLists.html#6338" class="InductiveConstructor">#refl</a> <a id="9123" href="Chapter.Fun.SortedLists.html#9123" class="Bound">x≤xs</a> <a id="9128" class="Symbol">=</a> <a id="9130" href="Chapter.Fun.SortedLists.html#9123" class="Bound">x≤xs</a>
<a id="9135" href="Chapter.Fun.SortedLists.html#8957" class="Function">lower-bound-permutation</a> <a id="9159" href="Chapter.Fun.SortedLists.html#6374" class="InductiveConstructor">#swap</a> <a id="9165" class="Symbol">(</a><a id="9166" href="Chapter.Fun.SortedLists.html#3564" class="InductiveConstructor">lb-::</a> <a id="9172" href="Chapter.Fun.SortedLists.html#9172" class="Bound">x≤y</a> <a id="9176" class="Symbol">(</a><a id="9177" href="Chapter.Fun.SortedLists.html#3564" class="InductiveConstructor">lb-::</a> <a id="9183" href="Chapter.Fun.SortedLists.html#9183" class="Bound">x≤z</a> <a id="9187" href="Chapter.Fun.SortedLists.html#9187" class="Bound">x≤xs</a><a id="9191" class="Symbol">))</a> <a id="9194" class="Symbol">=</a>
  <a id="9198" href="Chapter.Fun.SortedLists.html#3564" class="InductiveConstructor">lb-::</a> <a id="9204" href="Chapter.Fun.SortedLists.html#9183" class="Bound">x≤z</a> <a id="9208" class="Symbol">(</a><a id="9209" href="Chapter.Fun.SortedLists.html#3564" class="InductiveConstructor">lb-::</a> <a id="9215" href="Chapter.Fun.SortedLists.html#9172" class="Bound">x≤y</a> <a id="9219" href="Chapter.Fun.SortedLists.html#9187" class="Bound">x≤xs</a><a id="9223" class="Symbol">)</a>
<a id="9225" href="Chapter.Fun.SortedLists.html#8957" class="Function">lower-bound-permutation</a> <a id="9249" class="Symbol">(</a><a id="9250" href="Chapter.Fun.SortedLists.html#6440" class="InductiveConstructor">#cong</a> <a id="9256" href="Chapter.Fun.SortedLists.html#9256" class="Bound">π</a><a id="9257" class="Symbol">)</a> <a id="9259" class="Symbol">(</a><a id="9260" href="Chapter.Fun.SortedLists.html#3564" class="InductiveConstructor">lb-::</a> <a id="9266" href="Chapter.Fun.SortedLists.html#9266" class="Bound">x≤y</a> <a id="9270" href="Chapter.Fun.SortedLists.html#9270" class="Bound">x≤xs</a><a id="9274" class="Symbol">)</a> <a id="9276" class="Symbol">=</a>
  <a id="9280" href="Chapter.Fun.SortedLists.html#3564" class="InductiveConstructor">lb-::</a> <a id="9286" href="Chapter.Fun.SortedLists.html#9266" class="Bound">x≤y</a> <a id="9290" class="Symbol">(</a><a id="9291" href="Chapter.Fun.SortedLists.html#8957" class="Function">lower-bound-permutation</a> <a id="9315" href="Chapter.Fun.SortedLists.html#9256" class="Bound">π</a> <a id="9317" href="Chapter.Fun.SortedLists.html#9270" class="Bound">x≤xs</a><a id="9321" class="Symbol">)</a>
<a id="9323" href="Chapter.Fun.SortedLists.html#8957" class="Function">lower-bound-permutation</a> <a id="9347" class="Symbol">(</a><a id="9348" href="Chapter.Fun.SortedLists.html#6508" class="InductiveConstructor">#trans</a> <a id="9355" href="Chapter.Fun.SortedLists.html#9355" class="Bound">π</a> <a id="9357" href="Chapter.Fun.SortedLists.html#9357" class="Bound">π&#39;</a><a id="9359" class="Symbol">)</a> <a id="9361" href="Chapter.Fun.SortedLists.html#9361" class="Bound">x≤xs</a> <a id="9366" class="Symbol">=</a>
  <a id="9370" href="Chapter.Fun.SortedLists.html#8957" class="Function">lower-bound-permutation</a> <a id="9394" href="Chapter.Fun.SortedLists.html#9355" class="Bound">π</a> <a id="9396" class="Symbol">(</a><a id="9397" href="Chapter.Fun.SortedLists.html#8957" class="Function">lower-bound-permutation</a> <a id="9421" href="Chapter.Fun.SortedLists.html#9357" class="Bound">π&#39;</a> <a id="9424" href="Chapter.Fun.SortedLists.html#9361" class="Bound">x≤xs</a><a id="9428" class="Symbol">)</a>
</pre>

<p>The following is an alternative definition of sorted list based on a
weaker notion of “lower bound” which only considers the head of a
list.</p>

<pre class="Agda"><a id="9594" class="Keyword">data</a> <a id="HeadLowerBound"></a><a id="9599" href="Chapter.Fun.SortedLists.html#9599" class="Datatype">HeadLowerBound</a> <a id="9614" class="Symbol">:</a> <a id="9616" href="Library.Nat.html#32" class="Datatype">ℕ</a> <a id="9618" class="Symbol">-&gt;</a> <a id="9621" href="Library.List.html#84" class="Datatype">List</a> <a id="9626" href="Library.Nat.html#32" class="Datatype">ℕ</a> <a id="9628" class="Symbol">-&gt;</a> <a id="9631" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="9635" class="Keyword">where</a>
  <a id="HeadLowerBound.hlb-[]"></a><a id="9643" href="Chapter.Fun.SortedLists.html#9643" class="InductiveConstructor">hlb-[]</a> <a id="9650" class="Symbol">:</a> <a id="9652" class="Symbol">∀{</a><a id="9654" href="Chapter.Fun.SortedLists.html#9654" class="Bound">x</a> <a id="9656" class="Symbol">:</a> <a id="9658" href="Library.Nat.html#32" class="Datatype">ℕ</a><a id="9659" class="Symbol">}</a> <a id="9661" class="Symbol">-&gt;</a> <a id="9664" href="Chapter.Fun.SortedLists.html#9599" class="Datatype">HeadLowerBound</a> <a id="9679" href="Chapter.Fun.SortedLists.html#9654" class="Bound">x</a> <a id="9681" href="Library.List.html#113" class="InductiveConstructor">[]</a>
  <a id="HeadLowerBound.hlb-::"></a><a id="9686" href="Chapter.Fun.SortedLists.html#9686" class="InductiveConstructor">hlb-::</a> <a id="9693" class="Symbol">:</a> <a id="9695" class="Symbol">∀{</a><a id="9697" href="Chapter.Fun.SortedLists.html#9697" class="Bound">x</a> <a id="9699" href="Chapter.Fun.SortedLists.html#9699" class="Bound">y</a> <a id="9701" class="Symbol">:</a> <a id="9703" href="Library.Nat.html#32" class="Datatype">ℕ</a><a id="9704" class="Symbol">}</a> <a id="9706" class="Symbol">{</a><a id="9707" href="Chapter.Fun.SortedLists.html#9707" class="Bound">ys</a> <a id="9710" class="Symbol">:</a> <a id="9712" href="Library.List.html#84" class="Datatype">List</a> <a id="9717" href="Library.Nat.html#32" class="Datatype">ℕ</a><a id="9718" class="Symbol">}</a> <a id="9720" class="Symbol">-&gt;</a> <a id="9723" href="Chapter.Fun.SortedLists.html#9697" class="Bound">x</a> <a id="9725" href="Library.LessThan.html#210" class="Datatype Operator">&lt;=</a> <a id="9728" href="Chapter.Fun.SortedLists.html#9699" class="Bound">y</a> <a id="9730" class="Symbol">-&gt;</a> <a id="9733" href="Chapter.Fun.SortedLists.html#9599" class="Datatype">HeadLowerBound</a> <a id="9748" href="Chapter.Fun.SortedLists.html#9697" class="Bound">x</a> <a id="9750" class="Symbol">(</a><a id="9751" href="Chapter.Fun.SortedLists.html#9699" class="Bound">y</a> <a id="9753" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="9756" href="Chapter.Fun.SortedLists.html#9707" class="Bound">ys</a><a id="9758" class="Symbol">)</a>

<a id="9761" class="Keyword">data</a> <a id="Sorted&#39;"></a><a id="9766" href="Chapter.Fun.SortedLists.html#9766" class="Datatype">Sorted&#39;</a> <a id="9774" class="Symbol">:</a> <a id="9776" href="Library.List.html#84" class="Datatype">List</a> <a id="9781" href="Library.Nat.html#32" class="Datatype">ℕ</a> <a id="9783" class="Symbol">-&gt;</a> <a id="9786" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="9790" class="Keyword">where</a>
  <a id="Sorted&#39;.sorted-[]"></a><a id="9798" href="Chapter.Fun.SortedLists.html#9798" class="InductiveConstructor">sorted-[]</a> <a id="9808" class="Symbol">:</a> <a id="9810" href="Chapter.Fun.SortedLists.html#9766" class="Datatype">Sorted&#39;</a> <a id="9818" href="Library.List.html#113" class="InductiveConstructor">[]</a>
  <a id="Sorted&#39;.sorted-::"></a><a id="9823" href="Chapter.Fun.SortedLists.html#9823" class="InductiveConstructor">sorted-::</a> <a id="9833" class="Symbol">:</a> <a id="9835" class="Symbol">∀{</a><a id="9837" href="Chapter.Fun.SortedLists.html#9837" class="Bound">x</a> <a id="9839" class="Symbol">:</a> <a id="9841" href="Library.Nat.html#32" class="Datatype">ℕ</a><a id="9842" class="Symbol">}</a> <a id="9844" class="Symbol">{</a><a id="9845" href="Chapter.Fun.SortedLists.html#9845" class="Bound">xs</a> <a id="9848" class="Symbol">:</a> <a id="9850" href="Library.List.html#84" class="Datatype">List</a> <a id="9855" href="Library.Nat.html#32" class="Datatype">ℕ</a><a id="9856" class="Symbol">}</a> <a id="9858" class="Symbol">-&gt;</a> <a id="9861" href="Chapter.Fun.SortedLists.html#9599" class="Datatype">HeadLowerBound</a> <a id="9876" href="Chapter.Fun.SortedLists.html#9837" class="Bound">x</a> <a id="9878" href="Chapter.Fun.SortedLists.html#9845" class="Bound">xs</a> <a id="9881" class="Symbol">-&gt;</a> <a id="9884" href="Chapter.Fun.SortedLists.html#9766" class="Datatype">Sorted&#39;</a> <a id="9892" href="Chapter.Fun.SortedLists.html#9845" class="Bound">xs</a> <a id="9895" class="Symbol">-&gt;</a> <a id="9898" href="Chapter.Fun.SortedLists.html#9766" class="Datatype">Sorted&#39;</a> <a id="9906" class="Symbol">(</a><a id="9907" href="Chapter.Fun.SortedLists.html#9837" class="Bound">x</a> <a id="9909" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="9912" href="Chapter.Fun.SortedLists.html#9845" class="Bound">xs</a><a id="9914" class="Symbol">)</a>
</pre>
<p>Prove the following theorems asserting that <code class="language-plaintext highlighter-rouge">Sorted</code> and <code class="language-plaintext highlighter-rouge">Sorted'</code>
are equivalent.</p>

<pre class="Agda"><a id="Sorted-&gt;Sorted&#39;"></a><a id="10009" href="Chapter.Fun.SortedLists.html#10009" class="Function">Sorted-&gt;Sorted&#39;</a> <a id="10025" class="Symbol">:</a> <a id="10027" class="Symbol">∀{</a><a id="10029" href="Chapter.Fun.SortedLists.html#10029" class="Bound">xs</a> <a id="10032" class="Symbol">:</a> <a id="10034" href="Library.List.html#84" class="Datatype">List</a> <a id="10039" href="Library.Nat.html#32" class="Datatype">ℕ</a><a id="10040" class="Symbol">}</a> <a id="10042" class="Symbol">-&gt;</a> <a id="10045" href="Chapter.Fun.SortedLists.html#4486" class="Datatype">Sorted</a> <a id="10052" href="Chapter.Fun.SortedLists.html#10029" class="Bound">xs</a> <a id="10055" class="Symbol">-&gt;</a> <a id="10058" href="Chapter.Fun.SortedLists.html#9766" class="Datatype">Sorted&#39;</a> <a id="10066" href="Chapter.Fun.SortedLists.html#10029" class="Bound">xs</a>
<a id="Sorted&#39;-&gt;Sorted"></a><a id="10069" href="Chapter.Fun.SortedLists.html#10069" class="Function">Sorted&#39;-&gt;Sorted</a> <a id="10085" class="Symbol">:</a> <a id="10087" class="Symbol">∀{</a><a id="10089" href="Chapter.Fun.SortedLists.html#10089" class="Bound">xs</a> <a id="10092" class="Symbol">:</a> <a id="10094" href="Library.List.html#84" class="Datatype">List</a> <a id="10099" href="Library.Nat.html#32" class="Datatype">ℕ</a><a id="10100" class="Symbol">}</a> <a id="10102" class="Symbol">-&gt;</a> <a id="10105" href="Chapter.Fun.SortedLists.html#9766" class="Datatype">Sorted&#39;</a> <a id="10113" href="Chapter.Fun.SortedLists.html#10089" class="Bound">xs</a> <a id="10116" class="Symbol">-&gt;</a> <a id="10119" href="Chapter.Fun.SortedLists.html#4486" class="Datatype">Sorted</a> <a id="10126" href="Chapter.Fun.SortedLists.html#10089" class="Bound">xs</a>
</pre>
<pre class="Agda solution"><a id="10138" href="Chapter.Fun.SortedLists.html#10009" class="Function">Sorted-&gt;Sorted&#39;</a> <a id="10154" href="Chapter.Fun.SortedLists.html#4517" class="InductiveConstructor">sorted-[]</a> <a id="10164" class="Symbol">=</a> <a id="10166" href="Chapter.Fun.SortedLists.html#9798" class="InductiveConstructor">sorted-[]</a>
<a id="10176" href="Chapter.Fun.SortedLists.html#10009" class="Function">Sorted-&gt;Sorted&#39;</a> <a id="10192" class="Symbol">(</a><a id="10193" href="Chapter.Fun.SortedLists.html#4541" class="InductiveConstructor">sorted-::</a> <a id="10203" href="Chapter.Fun.SortedLists.html#10203" class="Bound">x≤xs</a> <a id="10208" href="Chapter.Fun.SortedLists.html#10208" class="Bound">p</a><a id="10209" class="Symbol">)</a> <a id="10211" class="Symbol">=</a> <a id="10213" href="Chapter.Fun.SortedLists.html#9823" class="InductiveConstructor">sorted-::</a> <a id="10223" class="Symbol">(</a><a id="10224" href="Chapter.Fun.SortedLists.html#10268" class="Function">lemma</a> <a id="10230" href="Chapter.Fun.SortedLists.html#10203" class="Bound">x≤xs</a><a id="10234" class="Symbol">)</a> <a id="10236" class="Symbol">(</a><a id="10237" href="Chapter.Fun.SortedLists.html#10009" class="Function">Sorted-&gt;Sorted&#39;</a> <a id="10253" href="Chapter.Fun.SortedLists.html#10208" class="Bound">p</a><a id="10254" class="Symbol">)</a>
  <a id="10258" class="Keyword">where</a>
    <a id="10268" href="Chapter.Fun.SortedLists.html#10268" class="Function">lemma</a> <a id="10274" class="Symbol">:</a> <a id="10276" class="Symbol">∀{</a><a id="10278" href="Chapter.Fun.SortedLists.html#10278" class="Bound">x</a> <a id="10280" class="Symbol">:</a> <a id="10282" href="Library.Nat.html#32" class="Datatype">ℕ</a><a id="10283" class="Symbol">}</a> <a id="10285" class="Symbol">{</a><a id="10286" href="Chapter.Fun.SortedLists.html#10286" class="Bound">xs</a> <a id="10289" class="Symbol">:</a> <a id="10291" href="Library.List.html#84" class="Datatype">List</a> <a id="10296" href="Library.Nat.html#32" class="Datatype">ℕ</a><a id="10297" class="Symbol">}</a> <a id="10299" class="Symbol">-&gt;</a> <a id="10302" href="Chapter.Fun.SortedLists.html#3495" class="Datatype">LowerBound</a> <a id="10313" href="Chapter.Fun.SortedLists.html#10278" class="Bound">x</a> <a id="10315" href="Chapter.Fun.SortedLists.html#10286" class="Bound">xs</a> <a id="10318" class="Symbol">-&gt;</a> <a id="10321" href="Chapter.Fun.SortedLists.html#9599" class="Datatype">HeadLowerBound</a> <a id="10336" href="Chapter.Fun.SortedLists.html#10278" class="Bound">x</a> <a id="10338" href="Chapter.Fun.SortedLists.html#10286" class="Bound">xs</a>
    <a id="10345" href="Chapter.Fun.SortedLists.html#10268" class="Function">lemma</a> <a id="10351" href="Chapter.Fun.SortedLists.html#3538" class="InductiveConstructor">lb-[]</a> <a id="10357" class="Symbol">=</a> <a id="10359" href="Chapter.Fun.SortedLists.html#9643" class="InductiveConstructor">hlb-[]</a>
    <a id="10370" href="Chapter.Fun.SortedLists.html#10268" class="Function">lemma</a> <a id="10376" class="Symbol">(</a><a id="10377" href="Chapter.Fun.SortedLists.html#3564" class="InductiveConstructor">lb-::</a> <a id="10383" href="Chapter.Fun.SortedLists.html#10383" class="Bound">x≤y</a> <a id="10387" href="Chapter.Fun.SortedLists.html#10387" class="Bound">p</a><a id="10388" class="Symbol">)</a> <a id="10390" class="Symbol">=</a> <a id="10392" href="Chapter.Fun.SortedLists.html#9686" class="InductiveConstructor">hlb-::</a> <a id="10399" href="Chapter.Fun.SortedLists.html#10383" class="Bound">x≤y</a>

<a id="10404" href="Chapter.Fun.SortedLists.html#10069" class="Function">Sorted&#39;-&gt;Sorted</a> <a id="10420" href="Chapter.Fun.SortedLists.html#9798" class="InductiveConstructor">sorted-[]</a> <a id="10430" class="Symbol">=</a> <a id="10432" href="Chapter.Fun.SortedLists.html#4517" class="InductiveConstructor">sorted-[]</a>
<a id="10442" href="Chapter.Fun.SortedLists.html#10069" class="Function">Sorted&#39;-&gt;Sorted</a> <a id="10458" class="Symbol">(</a><a id="10459" href="Chapter.Fun.SortedLists.html#9823" class="InductiveConstructor">sorted-::</a> <a id="10469" href="Chapter.Fun.SortedLists.html#10469" class="Bound">p</a> <a id="10471" href="Chapter.Fun.SortedLists.html#10471" class="Bound">q</a><a id="10472" class="Symbol">)</a> <a id="10474" class="Symbol">=</a> <a id="10476" href="Chapter.Fun.SortedLists.html#4541" class="InductiveConstructor">sorted-::</a> <a id="10486" class="Symbol">(</a><a id="10487" href="Chapter.Fun.SortedLists.html#10721" class="Function">lemma</a> <a id="10493" href="Chapter.Fun.SortedLists.html#10469" class="Bound">p</a> <a id="10495" href="Chapter.Fun.SortedLists.html#10471" class="Bound">q</a><a id="10496" class="Symbol">)</a> <a id="10498" class="Symbol">(</a><a id="10499" href="Chapter.Fun.SortedLists.html#10069" class="Function">Sorted&#39;-&gt;Sorted</a> <a id="10515" href="Chapter.Fun.SortedLists.html#10471" class="Bound">q</a><a id="10516" class="Symbol">)</a>
  <a id="10520" class="Keyword">where</a>
    <a id="10530" href="Chapter.Fun.SortedLists.html#10530" class="Function">lower</a> <a id="10536" class="Symbol">:</a> <a id="10538" class="Symbol">∀{</a><a id="10540" href="Chapter.Fun.SortedLists.html#10540" class="Bound">x</a> <a id="10542" href="Chapter.Fun.SortedLists.html#10542" class="Bound">y</a> <a id="10544" class="Symbol">:</a> <a id="10546" href="Library.Nat.html#32" class="Datatype">ℕ</a><a id="10547" class="Symbol">}</a> <a id="10549" class="Symbol">{</a><a id="10550" href="Chapter.Fun.SortedLists.html#10550" class="Bound">xs</a> <a id="10553" class="Symbol">:</a> <a id="10555" href="Library.List.html#84" class="Datatype">List</a> <a id="10560" href="Library.Nat.html#32" class="Datatype">ℕ</a><a id="10561" class="Symbol">}</a> <a id="10563" class="Symbol">-&gt;</a> <a id="10566" href="Chapter.Fun.SortedLists.html#10540" class="Bound">x</a> <a id="10568" href="Library.LessThan.html#210" class="Datatype Operator">&lt;=</a> <a id="10571" href="Chapter.Fun.SortedLists.html#10542" class="Bound">y</a> <a id="10573" class="Symbol">-&gt;</a> <a id="10576" href="Chapter.Fun.SortedLists.html#9599" class="Datatype">HeadLowerBound</a> <a id="10591" href="Chapter.Fun.SortedLists.html#10542" class="Bound">y</a> <a id="10593" href="Chapter.Fun.SortedLists.html#10550" class="Bound">xs</a> <a id="10596" class="Symbol">-&gt;</a>
            <a id="10611" href="Chapter.Fun.SortedLists.html#9599" class="Datatype">HeadLowerBound</a> <a id="10626" href="Chapter.Fun.SortedLists.html#10540" class="Bound">x</a> <a id="10628" href="Chapter.Fun.SortedLists.html#10550" class="Bound">xs</a>
    <a id="10635" href="Chapter.Fun.SortedLists.html#10530" class="Function">lower</a> <a id="10641" href="Chapter.Fun.SortedLists.html#10641" class="Bound">x≤y</a> <a id="10645" href="Chapter.Fun.SortedLists.html#9643" class="InductiveConstructor">hlb-[]</a> <a id="10652" class="Symbol">=</a> <a id="10654" href="Chapter.Fun.SortedLists.html#9643" class="InductiveConstructor">hlb-[]</a>
    <a id="10665" href="Chapter.Fun.SortedLists.html#10530" class="Function">lower</a> <a id="10671" href="Chapter.Fun.SortedLists.html#10671" class="Bound">x≤y</a> <a id="10675" class="Symbol">(</a><a id="10676" href="Chapter.Fun.SortedLists.html#9686" class="InductiveConstructor">hlb-::</a> <a id="10683" href="Chapter.Fun.SortedLists.html#10683" class="Bound">y≤z</a><a id="10686" class="Symbol">)</a> <a id="10688" class="Symbol">=</a> <a id="10690" href="Chapter.Fun.SortedLists.html#9686" class="InductiveConstructor">hlb-::</a> <a id="10697" class="Symbol">(</a><a id="10698" href="Library.LessThan.html#615" class="Function">le-trans</a> <a id="10707" href="Chapter.Fun.SortedLists.html#10671" class="Bound">x≤y</a> <a id="10711" href="Chapter.Fun.SortedLists.html#10683" class="Bound">y≤z</a><a id="10714" class="Symbol">)</a>

    <a id="10721" href="Chapter.Fun.SortedLists.html#10721" class="Function">lemma</a> <a id="10727" class="Symbol">:</a> <a id="10729" class="Symbol">∀{</a><a id="10731" href="Chapter.Fun.SortedLists.html#10731" class="Bound">x</a> <a id="10733" class="Symbol">:</a> <a id="10735" href="Library.Nat.html#32" class="Datatype">ℕ</a><a id="10736" class="Symbol">}</a> <a id="10738" class="Symbol">{</a><a id="10739" href="Chapter.Fun.SortedLists.html#10739" class="Bound">xs</a> <a id="10742" class="Symbol">:</a> <a id="10744" href="Library.List.html#84" class="Datatype">List</a> <a id="10749" href="Library.Nat.html#32" class="Datatype">ℕ</a><a id="10750" class="Symbol">}</a> <a id="10752" class="Symbol">-&gt;</a> <a id="10755" href="Chapter.Fun.SortedLists.html#9599" class="Datatype">HeadLowerBound</a> <a id="10770" href="Chapter.Fun.SortedLists.html#10731" class="Bound">x</a> <a id="10772" href="Chapter.Fun.SortedLists.html#10739" class="Bound">xs</a> <a id="10775" class="Symbol">-&gt;</a> <a id="10778" href="Chapter.Fun.SortedLists.html#9766" class="Datatype">Sorted&#39;</a> <a id="10786" href="Chapter.Fun.SortedLists.html#10739" class="Bound">xs</a> <a id="10789" class="Symbol">-&gt;</a>
            <a id="10804" href="Chapter.Fun.SortedLists.html#3495" class="Datatype">LowerBound</a> <a id="10815" href="Chapter.Fun.SortedLists.html#10731" class="Bound">x</a> <a id="10817" href="Chapter.Fun.SortedLists.html#10739" class="Bound">xs</a>
    <a id="10824" href="Chapter.Fun.SortedLists.html#10721" class="Function">lemma</a> <a id="10830" href="Chapter.Fun.SortedLists.html#9643" class="InductiveConstructor">hlb-[]</a> <a id="10837" href="Chapter.Fun.SortedLists.html#9798" class="InductiveConstructor">sorted-[]</a> <a id="10847" class="Symbol">=</a> <a id="10849" href="Chapter.Fun.SortedLists.html#3538" class="InductiveConstructor">lb-[]</a>
    <a id="10859" href="Chapter.Fun.SortedLists.html#10721" class="Function">lemma</a> <a id="10865" class="Symbol">(</a><a id="10866" href="Chapter.Fun.SortedLists.html#9686" class="InductiveConstructor">hlb-::</a> <a id="10873" href="Chapter.Fun.SortedLists.html#10873" class="Bound">x≤y</a><a id="10876" class="Symbol">)</a> <a id="10878" class="Symbol">(</a><a id="10879" href="Chapter.Fun.SortedLists.html#9823" class="InductiveConstructor">sorted-::</a> <a id="10889" href="Chapter.Fun.SortedLists.html#10889" class="Bound">p</a> <a id="10891" href="Chapter.Fun.SortedLists.html#10891" class="Bound">q</a><a id="10892" class="Symbol">)</a> <a id="10894" class="Symbol">=</a> <a id="10896" href="Chapter.Fun.SortedLists.html#3564" class="InductiveConstructor">lb-::</a> <a id="10902" href="Chapter.Fun.SortedLists.html#10873" class="Bound">x≤y</a> <a id="10906" class="Symbol">(</a><a id="10907" href="Chapter.Fun.SortedLists.html#10721" class="Function">lemma</a> <a id="10913" class="Symbol">(</a><a id="10914" href="Chapter.Fun.SortedLists.html#10530" class="Function">lower</a> <a id="10920" href="Chapter.Fun.SortedLists.html#10873" class="Bound">x≤y</a> <a id="10924" href="Chapter.Fun.SortedLists.html#10889" class="Bound">p</a><a id="10925" class="Symbol">)</a> <a id="10927" href="Chapter.Fun.SortedLists.html#10891" class="Bound">q</a><a id="10928" class="Symbol">)</a>
</pre>

<p>Prove the following theorem asserting that the first element of any
list can be pushed arbitrarily deep into the list still obtaining a
permutation of the original list.</p>

<pre class="Agda"><a id="#push"></a><a id="11123" href="Chapter.Fun.SortedLists.html#11123" class="Function">#push</a> <a id="11129" class="Symbol">:</a> <a id="11131" class="Symbol">∀{</a><a id="11133" href="Chapter.Fun.SortedLists.html#11133" class="Bound">A</a> <a id="11135" class="Symbol">:</a> <a id="11137" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="11140" class="Symbol">}</a> <a id="11142" class="Symbol">(</a><a id="11143" href="Chapter.Fun.SortedLists.html#11143" class="Bound">x</a> <a id="11145" class="Symbol">:</a> <a id="11147" href="Chapter.Fun.SortedLists.html#11133" class="Bound">A</a><a id="11148" class="Symbol">)</a> <a id="11150" class="Symbol">(</a><a id="11151" href="Chapter.Fun.SortedLists.html#11151" class="Bound">xs</a> <a id="11154" href="Chapter.Fun.SortedLists.html#11154" class="Bound">ys</a> <a id="11157" class="Symbol">:</a> <a id="11159" href="Library.List.html#84" class="Datatype">List</a> <a id="11164" href="Chapter.Fun.SortedLists.html#11133" class="Bound">A</a><a id="11165" class="Symbol">)</a> <a id="11167" class="Symbol">-&gt;</a> <a id="11170" href="Chapter.Fun.SortedLists.html#11143" class="Bound">x</a> <a id="11172" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="11175" href="Chapter.Fun.SortedLists.html#11151" class="Bound">xs</a> <a id="11178" href="Library.List.html#208" class="Function Operator">++</a> <a id="11181" href="Chapter.Fun.SortedLists.html#11154" class="Bound">ys</a> <a id="11184" href="Chapter.Fun.SortedLists.html#6290" class="Datatype Operator">#</a> <a id="11186" href="Chapter.Fun.SortedLists.html#11151" class="Bound">xs</a> <a id="11189" href="Library.List.html#208" class="Function Operator">++</a> <a id="11192" href="Chapter.Fun.SortedLists.html#11143" class="Bound">x</a> <a id="11194" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="11197" href="Chapter.Fun.SortedLists.html#11154" class="Bound">ys</a>
</pre>
<pre class="Agda solution"><a id="11209" href="Chapter.Fun.SortedLists.html#11123" class="Function">#push</a> <a id="11215" class="Symbol">_</a> <a id="11217" href="Library.List.html#113" class="InductiveConstructor">[]</a>        <a id="11227" class="Symbol">_</a> <a id="11229" class="Symbol">=</a> <a id="11231" href="Chapter.Fun.SortedLists.html#6338" class="InductiveConstructor">#refl</a>
<a id="11237" href="Chapter.Fun.SortedLists.html#11123" class="Function">#push</a> <a id="11243" href="Chapter.Fun.SortedLists.html#11243" class="Bound">x</a> <a id="11245" class="Symbol">(</a><a id="11246" href="Chapter.Fun.SortedLists.html#11246" class="Bound">y</a> <a id="11248" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="11251" href="Chapter.Fun.SortedLists.html#11251" class="Bound">xs</a><a id="11253" class="Symbol">)</a> <a id="11255" href="Chapter.Fun.SortedLists.html#11255" class="Bound">ys</a> <a id="11258" class="Symbol">=</a>
  <a id="11262" href="Chapter.Fun.SortedLists.html#7256" class="Function Operator">#begin</a>
    <a id="11273" href="Chapter.Fun.SortedLists.html#11243" class="Bound">x</a> <a id="11275" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="11278" href="Chapter.Fun.SortedLists.html#11246" class="Bound">y</a> <a id="11280" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="11283" href="Chapter.Fun.SortedLists.html#11251" class="Bound">xs</a> <a id="11286" href="Library.List.html#208" class="Function Operator">++</a> <a id="11289" href="Chapter.Fun.SortedLists.html#11255" class="Bound">ys</a> <a id="11292" href="Chapter.Fun.SortedLists.html#7393" class="Function Operator">#⟨</a> <a id="11295" href="Chapter.Fun.SortedLists.html#6374" class="InductiveConstructor">#swap</a> <a id="11301" href="Chapter.Fun.SortedLists.html#7393" class="Function Operator">⟩</a>
    <a id="11307" href="Chapter.Fun.SortedLists.html#11246" class="Bound">y</a> <a id="11309" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="11312" href="Chapter.Fun.SortedLists.html#11243" class="Bound">x</a> <a id="11314" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="11317" href="Chapter.Fun.SortedLists.html#11251" class="Bound">xs</a> <a id="11320" href="Library.List.html#208" class="Function Operator">++</a> <a id="11323" href="Chapter.Fun.SortedLists.html#11255" class="Bound">ys</a> <a id="11326" href="Chapter.Fun.SortedLists.html#7393" class="Function Operator">#⟨</a> <a id="11329" href="Chapter.Fun.SortedLists.html#6440" class="InductiveConstructor">#cong</a> <a id="11335" class="Symbol">(</a><a id="11336" href="Chapter.Fun.SortedLists.html#11123" class="Function">#push</a> <a id="11342" href="Chapter.Fun.SortedLists.html#11243" class="Bound">x</a> <a id="11344" href="Chapter.Fun.SortedLists.html#11251" class="Bound">xs</a> <a id="11347" href="Chapter.Fun.SortedLists.html#11255" class="Bound">ys</a><a id="11349" class="Symbol">)</a> <a id="11351" href="Chapter.Fun.SortedLists.html#7393" class="Function Operator">⟩</a>
    <a id="11357" href="Chapter.Fun.SortedLists.html#11246" class="Bound">y</a> <a id="11359" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="11362" href="Chapter.Fun.SortedLists.html#11251" class="Bound">xs</a> <a id="11365" href="Library.List.html#208" class="Function Operator">++</a> <a id="11368" href="Chapter.Fun.SortedLists.html#11243" class="Bound">x</a> <a id="11370" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="11373" href="Chapter.Fun.SortedLists.html#11255" class="Bound">ys</a>
  <a id="11378" href="Chapter.Fun.SortedLists.html#7332" class="Function Operator">#end</a>
</pre>

<p>Prove the following theorem showing that <code class="language-plaintext highlighter-rouge">xs ++ ys</code> and <code class="language-plaintext highlighter-rouge">ys ++ xs</code>
are one the permutation of the other.</p>

<pre class="Agda"><a id="#++"></a><a id="11511" href="Chapter.Fun.SortedLists.html#11511" class="Function">#++</a> <a id="11515" class="Symbol">:</a> <a id="11517" class="Symbol">∀{</a><a id="11519" href="Chapter.Fun.SortedLists.html#11519" class="Bound">A</a> <a id="11521" class="Symbol">:</a> <a id="11523" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="11526" class="Symbol">}</a> <a id="11528" class="Symbol">(</a><a id="11529" href="Chapter.Fun.SortedLists.html#11529" class="Bound">xs</a> <a id="11532" href="Chapter.Fun.SortedLists.html#11532" class="Bound">ys</a> <a id="11535" class="Symbol">:</a> <a id="11537" href="Library.List.html#84" class="Datatype">List</a> <a id="11542" href="Chapter.Fun.SortedLists.html#11519" class="Bound">A</a><a id="11543" class="Symbol">)</a> <a id="11545" class="Symbol">-&gt;</a> <a id="11548" href="Chapter.Fun.SortedLists.html#11529" class="Bound">xs</a> <a id="11551" href="Library.List.html#208" class="Function Operator">++</a> <a id="11554" href="Chapter.Fun.SortedLists.html#11532" class="Bound">ys</a> <a id="11557" href="Chapter.Fun.SortedLists.html#6290" class="Datatype Operator">#</a> <a id="11559" href="Chapter.Fun.SortedLists.html#11532" class="Bound">ys</a> <a id="11562" href="Library.List.html#208" class="Function Operator">++</a> <a id="11565" href="Chapter.Fun.SortedLists.html#11529" class="Bound">xs</a>
</pre>
<pre class="Agda solution"><a id="11577" href="Chapter.Fun.SortedLists.html#11511" class="Function">#++</a> <a id="11581" href="Library.List.html#113" class="InductiveConstructor">[]</a>        <a id="11591" href="Chapter.Fun.SortedLists.html#11591" class="Bound">ys</a> <a id="11594" class="Keyword">rewrite</a> <a id="11602" href="Library.List.Properties.html#756" class="Function">++-unit-r</a> <a id="11612" href="Chapter.Fun.SortedLists.html#11591" class="Bound">ys</a> <a id="11615" class="Symbol">=</a> <a id="11617" href="Chapter.Fun.SortedLists.html#6338" class="InductiveConstructor">#refl</a>
<a id="11623" href="Chapter.Fun.SortedLists.html#11511" class="Function">#++</a> <a id="11627" class="Symbol">(</a><a id="11628" href="Chapter.Fun.SortedLists.html#11628" class="Bound">x</a> <a id="11630" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="11633" href="Chapter.Fun.SortedLists.html#11633" class="Bound">xs</a><a id="11635" class="Symbol">)</a> <a id="11637" href="Chapter.Fun.SortedLists.html#11637" class="Bound">ys</a> <a id="11640" class="Symbol">=</a>
  <a id="11644" href="Chapter.Fun.SortedLists.html#7256" class="Function Operator">#begin</a>
    <a id="11655" class="Symbol">(</a><a id="11656" href="Chapter.Fun.SortedLists.html#11628" class="Bound">x</a> <a id="11658" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="11661" href="Chapter.Fun.SortedLists.html#11633" class="Bound">xs</a><a id="11663" class="Symbol">)</a> <a id="11665" href="Library.List.html#208" class="Function Operator">++</a> <a id="11668" href="Chapter.Fun.SortedLists.html#11637" class="Bound">ys</a> <a id="11671" href="Chapter.Fun.SortedLists.html#7393" class="Function Operator">#⟨</a> <a id="11674" href="Chapter.Fun.SortedLists.html#6338" class="InductiveConstructor">#refl</a> <a id="11680" href="Chapter.Fun.SortedLists.html#7393" class="Function Operator">⟩</a>
    <a id="11686" href="Chapter.Fun.SortedLists.html#11628" class="Bound">x</a> <a id="11688" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="11691" href="Chapter.Fun.SortedLists.html#11633" class="Bound">xs</a> <a id="11694" href="Library.List.html#208" class="Function Operator">++</a> <a id="11697" href="Chapter.Fun.SortedLists.html#11637" class="Bound">ys</a>   <a id="11702" href="Chapter.Fun.SortedLists.html#7393" class="Function Operator">#⟨</a> <a id="11705" href="Chapter.Fun.SortedLists.html#6440" class="InductiveConstructor">#cong</a> <a id="11711" class="Symbol">(</a><a id="11712" href="Chapter.Fun.SortedLists.html#11511" class="Function">#++</a> <a id="11716" href="Chapter.Fun.SortedLists.html#11633" class="Bound">xs</a> <a id="11719" href="Chapter.Fun.SortedLists.html#11637" class="Bound">ys</a><a id="11721" class="Symbol">)</a> <a id="11723" href="Chapter.Fun.SortedLists.html#7393" class="Function Operator">⟩</a>
    <a id="11729" href="Chapter.Fun.SortedLists.html#11628" class="Bound">x</a> <a id="11731" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="11734" href="Chapter.Fun.SortedLists.html#11637" class="Bound">ys</a> <a id="11737" href="Library.List.html#208" class="Function Operator">++</a> <a id="11740" href="Chapter.Fun.SortedLists.html#11633" class="Bound">xs</a>   <a id="11745" href="Chapter.Fun.SortedLists.html#7393" class="Function Operator">#⟨</a> <a id="11748" href="Chapter.Fun.SortedLists.html#11123" class="Function">#push</a> <a id="11754" href="Chapter.Fun.SortedLists.html#11628" class="Bound">x</a> <a id="11756" href="Chapter.Fun.SortedLists.html#11637" class="Bound">ys</a> <a id="11759" href="Chapter.Fun.SortedLists.html#11633" class="Bound">xs</a> <a id="11762" href="Chapter.Fun.SortedLists.html#7393" class="Function Operator">⟩</a>
    <a id="11768" href="Chapter.Fun.SortedLists.html#11637" class="Bound">ys</a> <a id="11771" href="Library.List.html#208" class="Function Operator">++</a> <a id="11774" href="Chapter.Fun.SortedLists.html#11628" class="Bound">x</a> <a id="11776" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="11779" href="Chapter.Fun.SortedLists.html#11633" class="Bound">xs</a>
  <a id="11784" href="Chapter.Fun.SortedLists.html#7332" class="Function Operator">#end</a>
</pre>

<p>Prove the following theorem, asserting that the reverse of <code class="language-plaintext highlighter-rouge">xs</code> is a
particular permutation of <code class="language-plaintext highlighter-rouge">xs</code>.</p>

<pre class="Agda"><a id="#reverse"></a><a id="11913" href="Chapter.Fun.SortedLists.html#11913" class="Function">#reverse</a> <a id="11922" class="Symbol">:</a> <a id="11924" class="Symbol">∀{</a><a id="11926" href="Chapter.Fun.SortedLists.html#11926" class="Bound">A</a> <a id="11928" class="Symbol">:</a> <a id="11930" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="11933" class="Symbol">}</a> <a id="11935" class="Symbol">(</a><a id="11936" href="Chapter.Fun.SortedLists.html#11936" class="Bound">xs</a> <a id="11939" class="Symbol">:</a> <a id="11941" href="Library.List.html#84" class="Datatype">List</a> <a id="11946" href="Chapter.Fun.SortedLists.html#11926" class="Bound">A</a><a id="11947" class="Symbol">)</a> <a id="11949" class="Symbol">-&gt;</a> <a id="11952" href="Library.List.html#432" class="Function">reverse</a> <a id="11960" href="Chapter.Fun.SortedLists.html#11936" class="Bound">xs</a> <a id="11963" href="Chapter.Fun.SortedLists.html#6290" class="Datatype Operator">#</a> <a id="11965" href="Chapter.Fun.SortedLists.html#11936" class="Bound">xs</a>
</pre>
<pre class="Agda solution"><a id="11977" href="Chapter.Fun.SortedLists.html#11913" class="Function">#reverse</a> <a id="11986" href="Library.List.html#113" class="InductiveConstructor">[]</a> <a id="11989" class="Symbol">=</a> <a id="11991" href="Chapter.Fun.SortedLists.html#6338" class="InductiveConstructor">#refl</a>
<a id="11997" href="Chapter.Fun.SortedLists.html#11913" class="Function">#reverse</a> <a id="12006" class="Symbol">(</a><a id="12007" href="Chapter.Fun.SortedLists.html#12007" class="Bound">x</a> <a id="12009" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="12012" href="Chapter.Fun.SortedLists.html#12012" class="Bound">xs</a><a id="12014" class="Symbol">)</a> <a id="12016" class="Symbol">=</a>
  <a id="12020" href="Chapter.Fun.SortedLists.html#7256" class="Function Operator">#begin</a>
    <a id="12031" href="Library.List.html#432" class="Function">reverse</a> <a id="12039" class="Symbol">(</a><a id="12040" href="Chapter.Fun.SortedLists.html#12007" class="Bound">x</a> <a id="12042" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="12045" href="Chapter.Fun.SortedLists.html#12012" class="Bound">xs</a><a id="12047" class="Symbol">)</a>   <a id="12051" href="Chapter.Fun.SortedLists.html#7393" class="Function Operator">#⟨</a> <a id="12054" href="Chapter.Fun.SortedLists.html#6338" class="InductiveConstructor">#refl</a> <a id="12060" href="Chapter.Fun.SortedLists.html#7393" class="Function Operator">⟩</a>
    <a id="12066" href="Library.List.html#432" class="Function">reverse</a> <a id="12074" href="Chapter.Fun.SortedLists.html#12012" class="Bound">xs</a> <a id="12077" href="Library.List.html#208" class="Function Operator">++</a> <a id="12080" href="Library.List.html#159" class="Function Operator">[</a> <a id="12082" href="Chapter.Fun.SortedLists.html#12007" class="Bound">x</a> <a id="12084" href="Library.List.html#159" class="Function Operator">]</a> <a id="12086" href="Chapter.Fun.SortedLists.html#7393" class="Function Operator">#⟨</a> <a id="12089" href="Chapter.Fun.SortedLists.html#11511" class="Function">#++</a> <a id="12093" class="Symbol">(</a><a id="12094" href="Library.List.html#432" class="Function">reverse</a> <a id="12102" href="Chapter.Fun.SortedLists.html#12012" class="Bound">xs</a><a id="12104" class="Symbol">)</a> <a id="12106" href="Library.List.html#159" class="Function Operator">[</a> <a id="12108" href="Chapter.Fun.SortedLists.html#12007" class="Bound">x</a> <a id="12110" href="Library.List.html#159" class="Function Operator">]</a> <a id="12112" href="Chapter.Fun.SortedLists.html#7393" class="Function Operator">⟩</a>
    <a id="12118" href="Library.List.html#159" class="Function Operator">[</a> <a id="12120" href="Chapter.Fun.SortedLists.html#12007" class="Bound">x</a> <a id="12122" href="Library.List.html#159" class="Function Operator">]</a> <a id="12124" href="Library.List.html#208" class="Function Operator">++</a> <a id="12127" href="Library.List.html#432" class="Function">reverse</a> <a id="12135" href="Chapter.Fun.SortedLists.html#12012" class="Bound">xs</a> <a id="12138" href="Chapter.Fun.SortedLists.html#7393" class="Function Operator">#⟨</a> <a id="12141" href="Chapter.Fun.SortedLists.html#6338" class="InductiveConstructor">#refl</a> <a id="12147" href="Chapter.Fun.SortedLists.html#7393" class="Function Operator">⟩</a>
    <a id="12153" href="Chapter.Fun.SortedLists.html#12007" class="Bound">x</a> <a id="12155" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="12158" href="Library.List.html#432" class="Function">reverse</a> <a id="12166" href="Chapter.Fun.SortedLists.html#12012" class="Bound">xs</a>     <a id="12173" href="Chapter.Fun.SortedLists.html#7393" class="Function Operator">#⟨</a> <a id="12176" href="Chapter.Fun.SortedLists.html#6440" class="InductiveConstructor">#cong</a> <a id="12182" class="Symbol">(</a><a id="12183" href="Chapter.Fun.SortedLists.html#11913" class="Function">#reverse</a> <a id="12192" href="Chapter.Fun.SortedLists.html#12012" class="Bound">xs</a><a id="12194" class="Symbol">)</a> <a id="12196" href="Chapter.Fun.SortedLists.html#7393" class="Function Operator">⟩</a>
    <a id="12202" href="Chapter.Fun.SortedLists.html#12007" class="Bound">x</a> <a id="12204" href="Library.List.html#129" class="InductiveConstructor Operator">::</a> <a id="12207" href="Chapter.Fun.SortedLists.html#12012" class="Bound">xs</a>
  <a id="12212" href="Chapter.Fun.SortedLists.html#7332" class="Function Operator">#end</a>
</pre>

  </div>
  <ul class="menu">
  <li><a href="Main.html">‹ Table of contents</a></li>
  <li>
    <a href="Chapter.Fun.ExtrinsicInsertionSort.html">Extrinsic verification of insertion sort ›</a></li>
</ul>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>
  <div class="wrapper">
    <!-- <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/"> -->
    <!--   <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/4.0/88x31.png"/> -->
    <!-- </a> -->
    2022-2023
    <a href="https://boystrange.github.io">Luca Padovani</a>
    and <a href="http://www.di.unito.it/~deligu/">Ugo de'Liguoro</a>.
    Page generated on 20 Sep 2023.
  </div>
</footer>
</body>

</html>
