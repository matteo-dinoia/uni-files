<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Hoare Logic for verification of IMP programs | Introduction to Program Verification in Agda</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="Hoare Logic for verification of IMP programs" />
<meta property="og:locale" content="en_US" />
<meta property="og:site_name" content="Introduction to Program Verification in Agda" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Hoare Logic for verification of IMP programs" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","headline":"Hoare Logic for verification of IMP programs","url":"/pages/Chapter.Imp.HoareLogic.html"}</script>
<!-- End Jekyll SEO tag -->

  <link rel="stylesheet" href="../assets/css/main.css">
  <link rel="stylesheet" href="../assets/css/Agda.css">
  <script src="../assets/js/mathjax.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="../assets/js/codereveal.js"></script>
  <link type="application/atom+xml" rel="alternate" href="/feed.xml" title="Introduction to Program Verification in Agda" /><!-- <script src="/assets/js/clipboard.min.js"></script> -->
  <!-- <script src="/assets/js/codeselect.js"></script> -->
</head>
<body>

<header class="site-header" role="banner">
  <div class="wrapper">
    <a class="site-title" rel="author" href="../index.html">Introduction to Program Verification in Agda</a>
    

    <nav class="site-nav">
      <a href="https://agda.readthedocs.io/en/latest/">AGDA DOCS</a>
    </nav>
  </div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">
  <ul class="menu">
  <li>
    <a href="Chapter.Imp.SmallStep.html">‹ Small-step operational semantics</a></li>
  <li>
    <a href="Chapter.Imp.HoareLogicExample.html">Example of derivation with Hoare Logic ›</a></li>
</ul>
  <header class="post-header">
    <h1 class="post-title">Hoare Logic for verification of IMP programs</h1>
  </header>

  <div class="post-content">
    <!--
<pre class="Agda"><a id="139" class="Symbol">{-#</a> <a id="143" class="Keyword">OPTIONS</a> <a id="151" class="Pragma">--allow-unsolved-metas</a> <a id="174" class="Symbol">#-}</a>
</pre>-->

<pre class="Agda"><a id="193" class="Keyword">module</a> <a id="200" href="Chapter.Imp.HoareLogic.html" class="Module">Chapter.Imp.HoareLogic</a> <a id="223" class="Keyword">where</a>
</pre>
<h2 id="imports">Imports</h2>

<pre class="Agda"><a id="250" class="Keyword">open</a> <a id="255" class="Keyword">import</a> <a id="262" href="Library.Bool.html" class="Module">Library.Bool</a>
<a id="275" class="Keyword">open</a> <a id="280" class="Keyword">import</a> <a id="287" href="Library.Nat.html" class="Module">Library.Nat</a>
<a id="299" class="Keyword">open</a> <a id="304" class="Keyword">import</a> <a id="311" href="Library.Nat.Properties.html" class="Module">Library.Nat.Properties</a>
<a id="334" class="Keyword">open</a> <a id="339" class="Keyword">import</a> <a id="346" href="Library.Logic.html" class="Module">Library.Logic</a>
<a id="360" class="Keyword">open</a> <a id="365" class="Keyword">import</a> <a id="372" href="Library.Logic.Laws.html" class="Module">Library.Logic.Laws</a> 
<a id="392" class="Keyword">open</a> <a id="397" class="Keyword">import</a> <a id="404" href="Library.Equality.html" class="Module">Library.Equality</a>
<a id="421" class="Keyword">open</a> <a id="426" class="Keyword">import</a> <a id="433" href="Library.Equality.Reasoning.html" class="Module">Library.Equality.Reasoning</a>

<a id="461" class="Keyword">open</a> <a id="466" class="Keyword">import</a> <a id="473" href="Chapter.Imp.AexpBexp.html" class="Module">Chapter.Imp.AexpBexp</a>
<a id="494" class="Keyword">open</a> <a id="499" class="Keyword">import</a> <a id="506" href="Chapter.Imp.BigStep.html" class="Module">Chapter.Imp.BigStep</a>

</pre>

<p>The goal of <em>program verification</em> is to check whether programs satisfy their
specifications, which nowdays is called <em>functional correctness</em> and
<em>compliance</em> of programs w.r.t. their <em>contracts</em>.</p>

<p>The formalization of the operational semantics of IMP lays the ground for
precise reasoning e.g. about implementations of IMP intepreters,
like that one provided by the small-step semantics in chapter
<a href="/pages/Chapter.Imp.SmallStep.html">Small-step operational semantics</a>,
or of a compiler as described in chapter 8 of Nipkow and Klein’s book.
However, reasoning about single programs using the operational semantics,
albeit possible in principle, is quite awkward in practice.</p>

<p>In the late 60s, building on Robert Floyd’s idea to decorate flowcharts with logical formulas
to reason about programs,
Tony Hoare proposed a logical system to derive formulas
of the shape <code class="language-plaintext highlighter-rouge">{P} c {Q}</code> he called <strong>triples</strong>. A triple is made of a command <code class="language-plaintext highlighter-rouge">c</code> and
two formulas <code class="language-plaintext highlighter-rouge">P, Q</code> of first order arithmetic, called <strong>pre-condition</strong> and
<strong>post-condition</strong> respectively. The meaning of such triples is
the so called <strong>partial correctness</strong> criterion:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> A command (program) c is partially correct w.r.t the specification
 with pre-condition P and post-condition Q if whenever P is true
 before the execution of c and such execution terminates,
 Q is true afterwards
</code></pre></div></div>

<p>Observe that the termination of the execution of <code class="language-plaintext highlighter-rouge">c</code> is not ensured by the truth of <code class="language-plaintext highlighter-rouge">P</code>,
so that when this is not the case the triple <code class="language-plaintext highlighter-rouge">{P} c {Q}</code> vacuously holds.</p>

<p>A direct formalization of triples and Hoare Logic with Agda involves the definition of
the language of arithmetic and of its semantics. Following the technique in
chapter 12 of Nipkow and Klein’s book, we use instead a <em>shallow embedding</em> of triples into Agda,
much as we have done for the IMP language until now. Then
pre and post-conditions, named <strong>assertions</strong> in Hoare’s words, are formalized as Agda
predicates of states:</p>

<pre class="Agda"><a id="Assn"></a><a id="2499" href="Chapter.Imp.HoareLogic.html#2499" class="Function">Assn</a> <a id="2504" class="Symbol">=</a> <a id="2506" href="Chapter.Imp.AexpBexp.html#2404" class="Function">State</a> <a id="2512" class="Symbol">-&gt;</a> <a id="2515" href="Agda.Primitive.html#326" class="Primitive">Set</a>

<a id="2520" class="Keyword">data</a> <a id="Triple"></a><a id="2525" href="Chapter.Imp.HoareLogic.html#2525" class="Datatype">Triple</a> <a id="2532" class="Symbol">:</a> <a id="2534" href="Agda.Primitive.html#326" class="Primitive">Set₁</a> <a id="2539" class="Keyword">where</a>
     <a id="Triple.[_]_[_]"></a><a id="2550" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[_]_[_]</a> <a id="2558" class="Symbol">:</a> <a id="2560" href="Chapter.Imp.HoareLogic.html#2499" class="Function">Assn</a> <a id="2565" class="Symbol">-&gt;</a> <a id="2568" href="Chapter.Imp.BigStep.html#1498" class="Datatype">Com</a> <a id="2572" class="Symbol">-&gt;</a> <a id="2575" href="Chapter.Imp.HoareLogic.html#2499" class="Function">Assn</a> <a id="2580" class="Symbol">-&gt;</a> <a id="2583" href="Chapter.Imp.HoareLogic.html#2525" class="Datatype">Triple</a>
</pre>
<p><em>Remark.</em> In the definition of the data type <code class="language-plaintext highlighter-rouge">Triple</code> we use square instead of curly braces because
the latter are reserved for implicit arguments in Agda. A peculiarity of <code class="language-plaintext highlighter-rouge">Triple</code> is
its type <code class="language-plaintext highlighter-rouge">Set₁</code> which is the least <em>universe</em> such that <code class="language-plaintext highlighter-rouge">Set = Set₀ : Set₁</code>. This is forced by Agda since
the type <code class="language-plaintext highlighter-rouge">Assn = State -&gt; Set</code>, and consequently the type <code class="language-plaintext highlighter-rouge">Set</code>, occurrs in negative position
in the type <code class="language-plaintext highlighter-rouge">Assn -&gt; Com -&gt; Assn -&gt; Triple</code> of <code class="language-plaintext highlighter-rouge">[_]_[_]</code>.</p>

<p>The treatment of universes is behind the scope of the present book: the interested reader is
referred to <a href="https://agda.readthedocs.io/en/latest/language/universe-levels.html">Agda’s documentation</a>.
Luckily, the occurrences of <code class="language-plaintext highlighter-rouge">Set₁</code> here and in the definition of the inference system below can be
naively identified with <code class="language-plaintext highlighter-rouge">Set</code> without missing the content of the chapter.</p>

<h2 id="the-system-of-hoare-logic">The system of Hoare Logic</h2>

<p>Hoare Logic is an axiomatization of the notion of <strong>partially correct program</strong>, 
consisting of a formal system of inference rules whose judgments are triples plus
logical formulas to make arithmetics available when reasoning about IMP
programs. The original formulation of the system
can be found e.g. in chapter 6 of Winskel’s book and
in chapter 12 of Nipkow and Klein’s book. A quick reference is
<a href="https://en.wikipedia.org/wiki/Hoare_logic">Wikipedia - Hoare Logic</a>.</p>

<p>We represent the rules of Hoare Logic in Agda via the constructors of the following data type:</p>

<pre class="Agda"><a id="4014" class="Keyword">data</a> <a id="|-_"></a><a id="4019" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-_</a> <a id="4023" class="Symbol">:</a> <a id="4025" href="Chapter.Imp.HoareLogic.html#2525" class="Datatype">Triple</a> <a id="4032" class="Symbol">-&gt;</a> <a id="4035" href="Agda.Primitive.html#326" class="Primitive">Set₁</a> <a id="4040" class="Keyword">where</a> 

   <a id="|-_.H-Skip"></a><a id="4051" href="Chapter.Imp.HoareLogic.html#4051" class="InductiveConstructor">H-Skip</a> <a id="4058" class="Symbol">:</a> <a id="4060" class="Symbol">∀</a> <a id="4062" class="Symbol">{</a><a id="4063" href="Chapter.Imp.HoareLogic.html#4063" class="Bound">P</a><a id="4064" class="Symbol">}</a>
          <a id="4076" class="Comment">----------------------</a>
          <a id="4109" class="Symbol">-&gt;</a> <a id="4112" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="4115" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="4117" href="Chapter.Imp.HoareLogic.html#4063" class="Bound">P</a> <a id="4119" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a> <a id="4121" href="Chapter.Imp.BigStep.html#1516" class="InductiveConstructor">SKIP</a> <a id="4126" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="4128" href="Chapter.Imp.HoareLogic.html#4063" class="Bound">P</a> <a id="4130" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>

   <a id="|-_.H-Loc"></a><a id="4136" href="Chapter.Imp.HoareLogic.html#4136" class="InductiveConstructor">H-Loc</a> <a id="4142" class="Symbol">:</a> <a id="4144" class="Symbol">∀</a> <a id="4146" class="Symbol">{</a><a id="4147" href="Chapter.Imp.HoareLogic.html#4147" class="Bound">P</a> <a id="4149" href="Chapter.Imp.HoareLogic.html#4149" class="Bound">a</a> <a id="4151" href="Chapter.Imp.HoareLogic.html#4151" class="Bound">x</a><a id="4152" class="Symbol">}</a>
          <a id="4164" class="Comment">---------------------------------------------------------- </a>
          <a id="4234" class="Symbol">-&gt;</a> <a id="4237" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="4240" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="4242" class="Symbol">(λ</a> <a id="4245" href="Chapter.Imp.HoareLogic.html#4245" class="Bound">s</a> <a id="4247" class="Symbol">-&gt;</a> <a id="4250" href="Chapter.Imp.HoareLogic.html#4147" class="Bound">P</a> <a id="4252" class="Symbol">(</a><a id="4253" href="Chapter.Imp.HoareLogic.html#4245" class="Bound">s</a> <a id="4255" href="Chapter.Imp.AexpBexp.html#3405" class="Function Operator">[</a> <a id="4257" href="Chapter.Imp.HoareLogic.html#4151" class="Bound">x</a> <a id="4259" href="Chapter.Imp.AexpBexp.html#3405" class="Function Operator">::=</a> <a id="4263" href="Chapter.Imp.AexpBexp.html#3910" class="Function">aval</a> <a id="4268" href="Chapter.Imp.HoareLogic.html#4149" class="Bound">a</a> <a id="4270" href="Chapter.Imp.HoareLogic.html#4245" class="Bound">s</a> <a id="4272" href="Chapter.Imp.AexpBexp.html#3405" class="Function Operator">]</a><a id="4273" class="Symbol">))</a> <a id="4276" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a> <a id="4278" class="Symbol">(</a><a id="4279" href="Chapter.Imp.HoareLogic.html#4151" class="Bound">x</a> <a id="4281" href="Chapter.Imp.BigStep.html#1571" class="InductiveConstructor Operator">:=</a> <a id="4284" href="Chapter.Imp.HoareLogic.html#4149" class="Bound">a</a><a id="4285" class="Symbol">)</a> <a id="4287" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="4289" href="Chapter.Imp.HoareLogic.html#4147" class="Bound">P</a> <a id="4291" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>

   <a id="|-_.H-Comp"></a><a id="4297" href="Chapter.Imp.HoareLogic.html#4297" class="InductiveConstructor">H-Comp</a> <a id="4304" class="Symbol">:</a> <a id="4306" class="Symbol">∀</a> <a id="4308" class="Symbol">{</a><a id="4309" href="Chapter.Imp.HoareLogic.html#4309" class="Bound">P</a> <a id="4311" href="Chapter.Imp.HoareLogic.html#4311" class="Bound">Q</a> <a id="4313" href="Chapter.Imp.HoareLogic.html#4313" class="Bound">R</a> <a id="4315" href="Chapter.Imp.HoareLogic.html#4315" class="Bound">c₁</a> <a id="4318" href="Chapter.Imp.HoareLogic.html#4318" class="Bound">c₂</a><a id="4320" class="Symbol">}</a>
          <a id="4332" class="Symbol">-&gt;</a> <a id="4335" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="4338" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="4340" href="Chapter.Imp.HoareLogic.html#4309" class="Bound">P</a> <a id="4342" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a> <a id="4344" href="Chapter.Imp.HoareLogic.html#4315" class="Bound">c₁</a> <a id="4347" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="4349" href="Chapter.Imp.HoareLogic.html#4311" class="Bound">Q</a> <a id="4351" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
          <a id="4363" class="Symbol">-&gt;</a> <a id="4366" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="4369" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="4371" href="Chapter.Imp.HoareLogic.html#4311" class="Bound">Q</a> <a id="4373" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a> <a id="4375" href="Chapter.Imp.HoareLogic.html#4318" class="Bound">c₂</a> <a id="4378" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="4380" href="Chapter.Imp.HoareLogic.html#4313" class="Bound">R</a> <a id="4382" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
          <a id="4394" class="Comment">--------------------------</a>
          <a id="4431" class="Symbol">-&gt;</a> <a id="4434" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="4437" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="4439" href="Chapter.Imp.HoareLogic.html#4309" class="Bound">P</a> <a id="4441" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a> <a id="4443" href="Chapter.Imp.HoareLogic.html#4315" class="Bound">c₁</a> <a id="4446" href="Chapter.Imp.BigStep.html#1627" class="InductiveConstructor Operator">::</a> <a id="4449" href="Chapter.Imp.HoareLogic.html#4318" class="Bound">c₂</a> <a id="4452" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="4454" href="Chapter.Imp.HoareLogic.html#4313" class="Bound">R</a> <a id="4456" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>

   <a id="|-_.H-If"></a><a id="4462" href="Chapter.Imp.HoareLogic.html#4462" class="InductiveConstructor">H-If</a> <a id="4467" class="Symbol">:</a> <a id="4469" class="Symbol">∀</a> <a id="4471" class="Symbol">{</a><a id="4472" href="Chapter.Imp.HoareLogic.html#4472" class="Bound">P</a> <a id="4474" href="Chapter.Imp.HoareLogic.html#4474" class="Bound">b</a> <a id="4476" href="Chapter.Imp.HoareLogic.html#4476" class="Bound">c₁</a> <a id="4479" href="Chapter.Imp.HoareLogic.html#4479" class="Bound">Q</a> <a id="4481" href="Chapter.Imp.HoareLogic.html#4481" class="Bound">c₂</a><a id="4483" class="Symbol">}</a>
          <a id="4495" class="Symbol">-&gt;</a> <a id="4498" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="4501" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="4503" class="Symbol">(λ</a> <a id="4506" href="Chapter.Imp.HoareLogic.html#4506" class="Bound">s</a> <a id="4508" class="Symbol">-&gt;</a> <a id="4511" href="Chapter.Imp.HoareLogic.html#4472" class="Bound">P</a> <a id="4513" href="Chapter.Imp.HoareLogic.html#4506" class="Bound">s</a> <a id="4515" href="Library.Logic.html#1349" class="Function Operator">∧</a> <a id="4517" href="Chapter.Imp.AexpBexp.html#10249" class="Function">bval</a> <a id="4522" href="Chapter.Imp.HoareLogic.html#4474" class="Bound">b</a> <a id="4524" href="Chapter.Imp.HoareLogic.html#4506" class="Bound">s</a> <a id="4526" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="4529" href="Library.Bool.html#52" class="InductiveConstructor">true</a><a id="4533" class="Symbol">)</a>  <a id="4536" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a> <a id="4538" href="Chapter.Imp.HoareLogic.html#4476" class="Bound">c₁</a> <a id="4541" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="4543" href="Chapter.Imp.HoareLogic.html#4479" class="Bound">Q</a> <a id="4545" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
          <a id="4557" class="Symbol">-&gt;</a> <a id="4560" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="4563" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="4565" class="Symbol">(λ</a> <a id="4568" href="Chapter.Imp.HoareLogic.html#4568" class="Bound">s</a> <a id="4570" class="Symbol">-&gt;</a> <a id="4573" href="Chapter.Imp.HoareLogic.html#4472" class="Bound">P</a> <a id="4575" href="Chapter.Imp.HoareLogic.html#4568" class="Bound">s</a> <a id="4577" href="Library.Logic.html#1349" class="Function Operator">∧</a> <a id="4579" href="Chapter.Imp.AexpBexp.html#10249" class="Function">bval</a> <a id="4584" href="Chapter.Imp.HoareLogic.html#4474" class="Bound">b</a> <a id="4586" href="Chapter.Imp.HoareLogic.html#4568" class="Bound">s</a> <a id="4588" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="4591" href="Library.Bool.html#57" class="InductiveConstructor">false</a><a id="4596" class="Symbol">)</a> <a id="4598" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a> <a id="4600" href="Chapter.Imp.HoareLogic.html#4481" class="Bound">c₂</a> <a id="4603" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="4605" href="Chapter.Imp.HoareLogic.html#4479" class="Bound">Q</a> <a id="4607" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
          <a id="4619" class="Comment">---------------------------------------------------</a>
          <a id="4681" class="Symbol">-&gt;</a> <a id="4684" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="4687" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="4689" href="Chapter.Imp.HoareLogic.html#4472" class="Bound">P</a> <a id="4691" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a> <a id="4693" class="Symbol">(</a><a id="4694" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">IF</a> <a id="4697" href="Chapter.Imp.HoareLogic.html#4474" class="Bound">b</a> <a id="4699" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">THEN</a> <a id="4704" href="Chapter.Imp.HoareLogic.html#4476" class="Bound">c₁</a> <a id="4707" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">ELSE</a> <a id="4712" href="Chapter.Imp.HoareLogic.html#4481" class="Bound">c₂</a><a id="4714" class="Symbol">)</a> <a id="4716" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="4718" href="Chapter.Imp.HoareLogic.html#4479" class="Bound">Q</a> <a id="4720" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>

   <a id="|-_.H-While"></a><a id="4726" href="Chapter.Imp.HoareLogic.html#4726" class="InductiveConstructor">H-While</a> <a id="4734" class="Symbol">:</a> <a id="4736" class="Symbol">∀</a> <a id="4738" class="Symbol">{</a><a id="4739" href="Chapter.Imp.HoareLogic.html#4739" class="Bound">P</a> <a id="4741" href="Chapter.Imp.HoareLogic.html#4741" class="Bound">b</a> <a id="4743" href="Chapter.Imp.HoareLogic.html#4743" class="Bound">c</a><a id="4744" class="Symbol">}</a>
          <a id="4756" class="Symbol">-&gt;</a> <a id="4759" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="4762" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="4764" class="Symbol">(λ</a> <a id="4767" href="Chapter.Imp.HoareLogic.html#4767" class="Bound">s</a> <a id="4769" class="Symbol">-&gt;</a> <a id="4772" href="Chapter.Imp.HoareLogic.html#4739" class="Bound">P</a> <a id="4774" href="Chapter.Imp.HoareLogic.html#4767" class="Bound">s</a> <a id="4776" href="Library.Logic.html#1349" class="Function Operator">∧</a> <a id="4778" href="Chapter.Imp.AexpBexp.html#10249" class="Function">bval</a> <a id="4783" href="Chapter.Imp.HoareLogic.html#4741" class="Bound">b</a> <a id="4785" href="Chapter.Imp.HoareLogic.html#4767" class="Bound">s</a> <a id="4787" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="4790" href="Library.Bool.html#52" class="InductiveConstructor">true</a><a id="4794" class="Symbol">)</a> <a id="4796" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a> <a id="4798" href="Chapter.Imp.HoareLogic.html#4743" class="Bound">c</a> <a id="4800" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="4802" href="Chapter.Imp.HoareLogic.html#4739" class="Bound">P</a> <a id="4804" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
          <a id="4816" class="Comment">---------------------------------------------------------------</a>
          <a id="4890" class="Symbol">-&gt;</a> <a id="4893" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="4896" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="4898" href="Chapter.Imp.HoareLogic.html#4739" class="Bound">P</a> <a id="4900" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a> <a id="4902" class="Symbol">(</a><a id="4903" href="Chapter.Imp.BigStep.html#1738" class="InductiveConstructor Operator">WHILE</a> <a id="4909" href="Chapter.Imp.HoareLogic.html#4741" class="Bound">b</a> <a id="4911" href="Chapter.Imp.BigStep.html#1738" class="InductiveConstructor Operator">DO</a> <a id="4914" href="Chapter.Imp.HoareLogic.html#4743" class="Bound">c</a><a id="4915" class="Symbol">)</a> <a id="4917" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="4919" class="Symbol">(λ</a> <a id="4922" href="Chapter.Imp.HoareLogic.html#4922" class="Bound">s</a> <a id="4924" class="Symbol">-&gt;</a> <a id="4927" href="Chapter.Imp.HoareLogic.html#4739" class="Bound">P</a> <a id="4929" href="Chapter.Imp.HoareLogic.html#4922" class="Bound">s</a> <a id="4931" href="Library.Logic.html#1349" class="Function Operator">∧</a> <a id="4933" href="Chapter.Imp.AexpBexp.html#10249" class="Function">bval</a> <a id="4938" href="Chapter.Imp.HoareLogic.html#4741" class="Bound">b</a> <a id="4940" href="Chapter.Imp.HoareLogic.html#4922" class="Bound">s</a> <a id="4942" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="4945" href="Library.Bool.html#57" class="InductiveConstructor">false</a><a id="4950" class="Symbol">)</a> <a id="4952" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>

   <a id="|-_.H-Conseq"></a><a id="4958" href="Chapter.Imp.HoareLogic.html#4958" class="InductiveConstructor">H-Conseq</a> <a id="4967" class="Symbol">:</a> <a id="4969" class="Symbol">∀</a> <a id="4971" class="Symbol">{</a><a id="4972" href="Chapter.Imp.HoareLogic.html#4972" class="Bound">P</a> <a id="4974" href="Chapter.Imp.HoareLogic.html#4974" class="Bound">Q</a> <a id="4976" href="Chapter.Imp.HoareLogic.html#4976" class="Bound">P&#39;</a> <a id="4979" href="Chapter.Imp.HoareLogic.html#4979" class="Bound">Q&#39;</a> <a id="4982" class="Symbol">:</a> <a id="4984" href="Chapter.Imp.HoareLogic.html#2499" class="Function">Assn</a><a id="4988" class="Symbol">}</a> <a id="4990" class="Symbol">{</a><a id="4991" href="Chapter.Imp.HoareLogic.html#4991" class="Bound">c</a><a id="4992" class="Symbol">}</a>
          <a id="5004" class="Symbol">-&gt;</a> <a id="5007" class="Symbol">(∀</a> <a id="5010" href="Chapter.Imp.HoareLogic.html#5010" class="Bound">s</a> <a id="5012" class="Symbol">-&gt;</a> <a id="5015" href="Chapter.Imp.HoareLogic.html#4976" class="Bound">P&#39;</a> <a id="5018" href="Chapter.Imp.HoareLogic.html#5010" class="Bound">s</a> <a id="5020" class="Symbol">-&gt;</a> <a id="5023" href="Chapter.Imp.HoareLogic.html#4972" class="Bound">P</a> <a id="5025" href="Chapter.Imp.HoareLogic.html#5010" class="Bound">s</a><a id="5026" class="Symbol">)</a>
          <a id="5038" class="Symbol">-&gt;</a> <a id="5041" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="5044" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="5046" href="Chapter.Imp.HoareLogic.html#4972" class="Bound">P</a>  <a id="5049" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a> <a id="5051" href="Chapter.Imp.HoareLogic.html#4991" class="Bound">c</a> <a id="5053" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="5055" href="Chapter.Imp.HoareLogic.html#4974" class="Bound">Q</a>  <a id="5058" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
          <a id="5070" class="Symbol">-&gt;</a> <a id="5073" class="Symbol">(∀</a> <a id="5076" href="Chapter.Imp.HoareLogic.html#5076" class="Bound">s</a> <a id="5078" class="Symbol">-&gt;</a> <a id="5081" href="Chapter.Imp.HoareLogic.html#4974" class="Bound">Q</a> <a id="5083" href="Chapter.Imp.HoareLogic.html#5076" class="Bound">s</a> <a id="5085" class="Symbol">-&gt;</a> <a id="5088" href="Chapter.Imp.HoareLogic.html#4979" class="Bound">Q&#39;</a> <a id="5091" href="Chapter.Imp.HoareLogic.html#5076" class="Bound">s</a><a id="5092" class="Symbol">)</a>
          <a id="5104" class="Comment">-----------------------</a>
          <a id="5138" class="Symbol">-&gt;</a> <a id="5141" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="5144" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="5146" href="Chapter.Imp.HoareLogic.html#4976" class="Bound">P&#39;</a> <a id="5149" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a> <a id="5151" href="Chapter.Imp.HoareLogic.html#4991" class="Bound">c</a> <a id="5153" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="5155" href="Chapter.Imp.HoareLogic.html#4979" class="Bound">Q&#39;</a> <a id="5158" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
</pre>
<p>Due to our definition of the type <code class="language-plaintext highlighter-rouge">Assn</code> of assertions, there are some differences
among the rules above and the original ones. In case of rule <code class="language-plaintext highlighter-rouge">H-Loc</code> Hoare’s formulation was:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-------------------
{P[a/x]} x := a {P}
</code></pre></div></div>

<p>where <code class="language-plaintext highlighter-rouge">P[a/x]</code> is the result of the substitution of <code class="language-plaintext highlighter-rouge">x</code> by <code class="language-plaintext highlighter-rouge">a</code> in the formula <code class="language-plaintext highlighter-rouge">P</code>.
To understand rule <code class="language-plaintext highlighter-rouge">H-Loc</code>, suppose to extend the  <em>substitution lemma</em> in chapter
<a href="/pages/Chapter.Imp.AexpBexp.html">Arithmetic and boolean expressions</a>
to the syntax of formulas (if we had such things in our 
code, which we don’t). Then we would have:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>s |= P[a/x]   if and only if  s [ x ::= aval a s] |= P
</code></pre></div></div>

<p>where <code class="language-plaintext highlighter-rouge">s |= P</code> means that <code class="language-plaintext highlighter-rouge">P</code> is true in the standard model of arithmetic if
the program variables in it are interpreted according to <code class="language-plaintext highlighter-rouge">s</code>. In our 
setting <code class="language-plaintext highlighter-rouge">P</code> has type <code class="language-plaintext highlighter-rouge">State -&gt; Set</code> and <code class="language-plaintext highlighter-rouge">s |= P</code> is written <code class="language-plaintext highlighter-rouge">P s</code>; actually,
while it is unclear how to define <code class="language-plaintext highlighter-rouge">P[a/x] s</code> since 
we cannot substitute a variable in a predicate, writing
<code class="language-plaintext highlighter-rouge">P (s [ x ::= aval a s])</code> for <code class="language-plaintext highlighter-rouge">s [ x ::= aval a s] |= P</code> makes perfect sense
in our formalism.</p>

<p>There is a last step to take: <code class="language-plaintext highlighter-rouge">P (s[ x ::= aval a s])</code> has type <code class="language-plaintext highlighter-rouge">Set</code>,
but we need a predicate whose value is this expression as a function of <code class="language-plaintext highlighter-rouge">s ∈ State</code>,
hence the pre-condition of the rule <code class="language-plaintext highlighter-rouge">H-Loc</code> is the λ-expression
<code class="language-plaintext highlighter-rouge">λ s -&gt; P (s [ x ::= aval a s ])</code>. Similar remarks apply to rules <code class="language-plaintext highlighter-rouge">H-If</code> and <code class="language-plaintext highlighter-rouge">H-While</code>.</p>

<p>Finally rule <code class="language-plaintext highlighter-rouge">H-Conseq</code>, for <em>consequence</em>, corresponds to the original rule:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>|= P' -&gt; P    {P} c {Q}    |= Q -&gt; Q'
-------------------------------------
             {P'} c {Q'}
</code></pre></div></div>

<p>Here we must encode the premises <code class="language-plaintext highlighter-rouge">|= P' -&gt; P</code> and <code class="language-plaintext highlighter-rouge">|= Q -&gt; Q'</code> as predicates.
In logic the meaning of <code class="language-plaintext highlighter-rouge">|= P' -&gt; P</code> is: for all <code class="language-plaintext highlighter-rouge">s</code> if <code class="language-plaintext highlighter-rouge">s |= P'</code> then <code class="language-plaintext highlighter-rouge">s |= P</code>,
which is immediately encoded into the Agda predicate <code class="language-plaintext highlighter-rouge">∀ s -&gt; P' s -&gt; P s</code>, that is
the first premise in the rule; the premise <code class="language-plaintext highlighter-rouge">|= Q -&gt; Q'</code> is treated similarly.</p>

<h2 id="derived-rules">Derived rules</h2>

<pre class="Agda"><a id="H-Str"></a><a id="7072" href="Chapter.Imp.HoareLogic.html#7072" class="Function">H-Str</a> <a id="7078" class="Symbol">:</a>    <a id="7083" class="Symbol">∀</a> <a id="7085" class="Symbol">{</a><a id="7086" href="Chapter.Imp.HoareLogic.html#7086" class="Bound">P</a> <a id="7088" href="Chapter.Imp.HoareLogic.html#7088" class="Bound">Q</a> <a id="7090" href="Chapter.Imp.HoareLogic.html#7090" class="Bound">P′</a> <a id="7093" class="Symbol">:</a> <a id="7095" href="Chapter.Imp.HoareLogic.html#2499" class="Function">Assn</a><a id="7099" class="Symbol">}</a> <a id="7101" class="Symbol">{</a><a id="7102" href="Chapter.Imp.HoareLogic.html#7102" class="Bound">c</a><a id="7103" class="Symbol">}</a>
            <a id="7117" class="Symbol">-&gt;</a> <a id="7120" class="Symbol">(∀</a> <a id="7123" href="Chapter.Imp.HoareLogic.html#7123" class="Bound">s</a> <a id="7125" class="Symbol">-&gt;</a> <a id="7128" href="Chapter.Imp.HoareLogic.html#7090" class="Bound">P′</a> <a id="7131" href="Chapter.Imp.HoareLogic.html#7123" class="Bound">s</a> <a id="7133" class="Symbol">-&gt;</a> <a id="7136" href="Chapter.Imp.HoareLogic.html#7086" class="Bound">P</a> <a id="7138" href="Chapter.Imp.HoareLogic.html#7123" class="Bound">s</a><a id="7139" class="Symbol">)</a>
            <a id="7153" class="Symbol">-&gt;</a> <a id="7156" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="7159" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="7161" href="Chapter.Imp.HoareLogic.html#7086" class="Bound">P</a>  <a id="7164" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a> <a id="7166" href="Chapter.Imp.HoareLogic.html#7102" class="Bound">c</a> <a id="7168" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="7170" href="Chapter.Imp.HoareLogic.html#7088" class="Bound">Q</a>  <a id="7173" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
            <a id="7187" class="Comment">------------------------</a>
            <a id="7224" class="Symbol">-&gt;</a> <a id="7227" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="7230" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="7232" href="Chapter.Imp.HoareLogic.html#7090" class="Bound">P′</a> <a id="7235" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a> <a id="7237" href="Chapter.Imp.HoareLogic.html#7102" class="Bound">c</a> <a id="7239" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="7241" href="Chapter.Imp.HoareLogic.html#7088" class="Bound">Q</a> <a id="7243" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>

<a id="7246" href="Chapter.Imp.HoareLogic.html#7072" class="Function">H-Str</a> <a id="7252" class="Symbol">{</a><a id="7253" href="Chapter.Imp.HoareLogic.html#7253" class="Bound">P</a><a id="7254" class="Symbol">}{</a><a id="7256" href="Chapter.Imp.HoareLogic.html#7256" class="Bound">Q</a><a id="7257" class="Symbol">}{</a><a id="7259" href="Chapter.Imp.HoareLogic.html#7259" class="Bound">P′</a><a id="7261" class="Symbol">}{</a><a id="7263" href="Chapter.Imp.HoareLogic.html#7263" class="Bound">c</a><a id="7264" class="Symbol">}</a> <a id="7266" href="Chapter.Imp.HoareLogic.html#7266" class="Bound">hyp1</a> <a id="7271" href="Chapter.Imp.HoareLogic.html#7271" class="Bound">hyp2</a> <a id="7276" class="Symbol">=</a>
            <a id="7290" href="Chapter.Imp.HoareLogic.html#4958" class="InductiveConstructor">H-Conseq</a> <a id="7299" class="Symbol">{</a><a id="7300" href="Chapter.Imp.HoareLogic.html#7253" class="Bound">P</a><a id="7301" class="Symbol">}{</a><a id="7303" href="Chapter.Imp.HoareLogic.html#7256" class="Bound">Q</a><a id="7304" class="Symbol">}{</a><a id="7306" href="Chapter.Imp.HoareLogic.html#7259" class="Bound">P′</a><a id="7308" class="Symbol">}{</a><a id="7310" href="Chapter.Imp.HoareLogic.html#7256" class="Bound">Q</a><a id="7311" class="Symbol">}{</a><a id="7313" href="Chapter.Imp.HoareLogic.html#7263" class="Bound">c</a><a id="7314" class="Symbol">}</a> <a id="7316" href="Chapter.Imp.HoareLogic.html#7266" class="Bound">hyp1</a> <a id="7321" href="Chapter.Imp.HoareLogic.html#7271" class="Bound">hyp2</a> <a id="7326" class="Symbol">(λ</a> <a id="7329" href="Chapter.Imp.HoareLogic.html#7329" class="Bound">s</a> <a id="7331" class="Symbol">-&gt;</a> <a id="7334" class="Symbol">λ</a> <a id="7336" href="Chapter.Imp.HoareLogic.html#7336" class="Bound">x</a> <a id="7338" class="Symbol">-&gt;</a> <a id="7341" href="Chapter.Imp.HoareLogic.html#7336" class="Bound">x</a><a id="7342" class="Symbol">)</a>


<a id="H-Weak"></a><a id="7346" href="Chapter.Imp.HoareLogic.html#7346" class="Function">H-Weak</a> <a id="7353" class="Symbol">:</a>  <a id="7356" class="Symbol">∀</a> <a id="7358" class="Symbol">{</a><a id="7359" href="Chapter.Imp.HoareLogic.html#7359" class="Bound">P</a> <a id="7361" href="Chapter.Imp.HoareLogic.html#7361" class="Bound">Q</a> <a id="7363" href="Chapter.Imp.HoareLogic.html#7363" class="Bound">Q′</a> <a id="7366" class="Symbol">:</a> <a id="7368" href="Chapter.Imp.HoareLogic.html#2499" class="Function">Assn</a><a id="7372" class="Symbol">}</a> <a id="7374" class="Symbol">{</a><a id="7375" href="Chapter.Imp.HoareLogic.html#7375" class="Bound">c</a><a id="7376" class="Symbol">}</a>
          <a id="7388" class="Symbol">-&gt;</a> <a id="7391" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="7394" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="7396" href="Chapter.Imp.HoareLogic.html#7359" class="Bound">P</a>  <a id="7399" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a> <a id="7401" href="Chapter.Imp.HoareLogic.html#7375" class="Bound">c</a> <a id="7403" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="7405" href="Chapter.Imp.HoareLogic.html#7361" class="Bound">Q</a>  <a id="7408" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
          <a id="7420" class="Symbol">-&gt;</a> <a id="7423" class="Symbol">(∀</a> <a id="7426" href="Chapter.Imp.HoareLogic.html#7426" class="Bound">s</a> <a id="7428" class="Symbol">-&gt;</a> <a id="7431" href="Chapter.Imp.HoareLogic.html#7361" class="Bound">Q</a> <a id="7433" href="Chapter.Imp.HoareLogic.html#7426" class="Bound">s</a> <a id="7435" class="Symbol">-&gt;</a> <a id="7438" href="Chapter.Imp.HoareLogic.html#7363" class="Bound">Q′</a> <a id="7441" href="Chapter.Imp.HoareLogic.html#7426" class="Bound">s</a><a id="7442" class="Symbol">)</a>
          <a id="7454" class="Comment">------------------------</a>
          <a id="7489" class="Symbol">-&gt;</a> <a id="7492" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="7495" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="7497" href="Chapter.Imp.HoareLogic.html#7359" class="Bound">P</a> <a id="7499" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a> <a id="7501" href="Chapter.Imp.HoareLogic.html#7375" class="Bound">c</a> <a id="7503" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="7505" href="Chapter.Imp.HoareLogic.html#7363" class="Bound">Q′</a> <a id="7508" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>

<a id="7511" href="Chapter.Imp.HoareLogic.html#7346" class="Function">H-Weak</a> <a id="7518" class="Symbol">{</a><a id="7519" href="Chapter.Imp.HoareLogic.html#7519" class="Bound">P</a><a id="7520" class="Symbol">}{</a><a id="7522" href="Chapter.Imp.HoareLogic.html#7522" class="Bound">Q</a><a id="7523" class="Symbol">}{</a><a id="7525" href="Chapter.Imp.HoareLogic.html#7525" class="Bound">Q′</a><a id="7527" class="Symbol">}{</a><a id="7529" href="Chapter.Imp.HoareLogic.html#7529" class="Bound">c</a><a id="7530" class="Symbol">}</a> <a id="7532" href="Chapter.Imp.HoareLogic.html#7532" class="Bound">hyp1</a> <a id="7537" href="Chapter.Imp.HoareLogic.html#7537" class="Bound">hyp2</a> <a id="7542" class="Symbol">=</a>
            <a id="7556" href="Chapter.Imp.HoareLogic.html#4958" class="InductiveConstructor">H-Conseq</a> <a id="7565" class="Symbol">{</a><a id="7566" href="Chapter.Imp.HoareLogic.html#7519" class="Bound">P</a><a id="7567" class="Symbol">}{</a><a id="7569" href="Chapter.Imp.HoareLogic.html#7522" class="Bound">Q</a><a id="7570" class="Symbol">}{</a><a id="7572" href="Chapter.Imp.HoareLogic.html#7519" class="Bound">P</a><a id="7573" class="Symbol">}{</a><a id="7575" href="Chapter.Imp.HoareLogic.html#7525" class="Bound">Q′</a><a id="7577" class="Symbol">}{</a><a id="7579" href="Chapter.Imp.HoareLogic.html#7529" class="Bound">c</a><a id="7580" class="Symbol">}</a> <a id="7582" class="Symbol">(λ</a> <a id="7585" href="Chapter.Imp.HoareLogic.html#7585" class="Bound">s</a> <a id="7587" class="Symbol">-&gt;</a> <a id="7590" class="Symbol">λ</a> <a id="7592" href="Chapter.Imp.HoareLogic.html#7592" class="Bound">x</a> <a id="7594" class="Symbol">-&gt;</a> <a id="7597" href="Chapter.Imp.HoareLogic.html#7592" class="Bound">x</a><a id="7598" class="Symbol">)</a> <a id="7600" href="Chapter.Imp.HoareLogic.html#7532" class="Bound">hyp1</a> <a id="7605" href="Chapter.Imp.HoareLogic.html#7537" class="Bound">hyp2</a>

<a id="H-While&#39;"></a><a id="7611" href="Chapter.Imp.HoareLogic.html#7611" class="Function">H-While&#39;</a> <a id="7620" class="Symbol">:</a>  <a id="7623" class="Symbol">∀</a> <a id="7625" class="Symbol">{</a><a id="7626" href="Chapter.Imp.HoareLogic.html#7626" class="Bound">P</a> <a id="7628" href="Chapter.Imp.HoareLogic.html#7628" class="Bound">b</a> <a id="7630" href="Chapter.Imp.HoareLogic.html#7630" class="Bound">c</a> <a id="7632" href="Chapter.Imp.HoareLogic.html#7632" class="Bound">Q</a><a id="7633" class="Symbol">}</a>
          <a id="7645" class="Symbol">-&gt;</a> <a id="7648" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="7651" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="7653" class="Symbol">(λ</a> <a id="7656" href="Chapter.Imp.HoareLogic.html#7656" class="Bound">s</a> <a id="7658" class="Symbol">-&gt;</a> <a id="7661" href="Chapter.Imp.HoareLogic.html#7626" class="Bound">P</a> <a id="7663" href="Chapter.Imp.HoareLogic.html#7656" class="Bound">s</a> <a id="7665" href="Library.Logic.html#1349" class="Function Operator">∧</a> <a id="7667" href="Chapter.Imp.AexpBexp.html#10249" class="Function">bval</a> <a id="7672" href="Chapter.Imp.HoareLogic.html#7628" class="Bound">b</a> <a id="7674" href="Chapter.Imp.HoareLogic.html#7656" class="Bound">s</a> <a id="7676" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="7679" href="Library.Bool.html#52" class="InductiveConstructor">true</a><a id="7683" class="Symbol">)</a> <a id="7685" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a> <a id="7687" href="Chapter.Imp.HoareLogic.html#7630" class="Bound">c</a> <a id="7689" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="7691" href="Chapter.Imp.HoareLogic.html#7626" class="Bound">P</a> <a id="7693" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
          <a id="7705" class="Symbol">-&gt;</a> <a id="7708" class="Symbol">(∀</a> <a id="7711" href="Chapter.Imp.HoareLogic.html#7711" class="Bound">s</a> <a id="7713" class="Symbol">-&gt;</a> <a id="7716" class="Symbol">(</a><a id="7717" href="Chapter.Imp.HoareLogic.html#7626" class="Bound">P</a> <a id="7719" href="Chapter.Imp.HoareLogic.html#7711" class="Bound">s</a> <a id="7721" href="Library.Logic.html#1349" class="Function Operator">∧</a> <a id="7723" href="Chapter.Imp.AexpBexp.html#10249" class="Function">bval</a> <a id="7728" href="Chapter.Imp.HoareLogic.html#7628" class="Bound">b</a> <a id="7730" href="Chapter.Imp.HoareLogic.html#7711" class="Bound">s</a> <a id="7732" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="7735" href="Library.Bool.html#57" class="InductiveConstructor">false</a><a id="7740" class="Symbol">)</a> <a id="7742" class="Symbol">-&gt;</a> <a id="7745" href="Chapter.Imp.HoareLogic.html#7632" class="Bound">Q</a> <a id="7747" href="Chapter.Imp.HoareLogic.html#7711" class="Bound">s</a><a id="7748" class="Symbol">)</a>
          <a id="7760" class="Symbol">-&gt;</a> <a id="7763" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="7766" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="7768" href="Chapter.Imp.HoareLogic.html#7626" class="Bound">P</a> <a id="7770" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a> <a id="7772" class="Symbol">(</a><a id="7773" href="Chapter.Imp.BigStep.html#1738" class="InductiveConstructor Operator">WHILE</a> <a id="7779" href="Chapter.Imp.HoareLogic.html#7628" class="Bound">b</a> <a id="7781" href="Chapter.Imp.BigStep.html#1738" class="InductiveConstructor Operator">DO</a> <a id="7784" href="Chapter.Imp.HoareLogic.html#7630" class="Bound">c</a><a id="7785" class="Symbol">)</a> <a id="7787" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="7789" href="Chapter.Imp.HoareLogic.html#7632" class="Bound">Q</a> <a id="7791" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>

<a id="7794" href="Chapter.Imp.HoareLogic.html#7611" class="Function">H-While&#39;</a> <a id="7803" href="Chapter.Imp.HoareLogic.html#7803" class="Bound">hyp1</a> <a id="7808" href="Chapter.Imp.HoareLogic.html#7808" class="Bound">hyp2</a> <a id="7813" class="Symbol">=</a> <a id="7815" href="Chapter.Imp.HoareLogic.html#7346" class="Function">H-Weak</a> <a id="7822" class="Symbol">(</a><a id="7823" href="Chapter.Imp.HoareLogic.html#4726" class="InductiveConstructor">H-While</a> <a id="7831" href="Chapter.Imp.HoareLogic.html#7803" class="Bound">hyp1</a><a id="7835" class="Symbol">)</a> <a id="7837" href="Chapter.Imp.HoareLogic.html#7808" class="Bound">hyp2</a>
</pre>
<h2 id="examples">Examples</h2>

<h3 id="assignment">Assignment</h3>

<p>Let us start with the example <code class="language-plaintext highlighter-rouge">|- {X = 1} Z := X {Z = 1}</code>, which in our formalism reads:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>|- [ V X ==' N 1 ]
     Z := V X
   [ V Z ==' N 1 ]
</code></pre></div></div>

<p>where <code class="language-plaintext highlighter-rouge">a₁ ==' a₂</code> is the predicate of <code class="language-plaintext highlighter-rouge">a₁, a₂ ∈ Aexp</code> which holds w.r.t. <code class="language-plaintext highlighter-rouge">s ∈ State</code> if
<code class="language-plaintext highlighter-rouge">aval a₁ s == aval a₂ s</code>:</p>

<pre class="Agda"><a id="_==&#39;_"></a><a id="8152" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">_==&#39;_</a> <a id="8158" class="Symbol">:</a> <a id="8160" href="Chapter.Imp.AexpBexp.html#1770" class="Datatype">Aexp</a> <a id="8165" class="Symbol">-&gt;</a> <a id="8168" href="Chapter.Imp.AexpBexp.html#1770" class="Datatype">Aexp</a> <a id="8173" class="Symbol">-&gt;</a> <a id="8176" href="Chapter.Imp.HoareLogic.html#2499" class="Function">Assn</a>
<a id="8181" href="Chapter.Imp.HoareLogic.html#8181" class="Bound">a</a> <a id="8183" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="8187" href="Chapter.Imp.HoareLogic.html#8187" class="Bound">a&#39;</a> <a id="8190" class="Symbol">=</a> <a id="8192" class="Symbol">λ</a> <a id="8194" href="Chapter.Imp.HoareLogic.html#8194" class="Bound">s</a> <a id="8196" class="Symbol">-&gt;</a> <a id="8199" href="Chapter.Imp.AexpBexp.html#3910" class="Function">aval</a> <a id="8204" href="Chapter.Imp.HoareLogic.html#8181" class="Bound">a</a> <a id="8206" href="Chapter.Imp.HoareLogic.html#8194" class="Bound">s</a> <a id="8208" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="8211" href="Chapter.Imp.AexpBexp.html#3910" class="Function">aval</a> <a id="8216" href="Chapter.Imp.HoareLogic.html#8187" class="Bound">a&#39;</a> <a id="8219" href="Chapter.Imp.HoareLogic.html#8194" class="Bound">s</a>
</pre>
<p>We observe that the pre-condition <code class="language-plaintext highlighter-rouge">X = 1</code> is just the result of substituting <code class="language-plaintext highlighter-rouge">Z</code> for <code class="language-plaintext highlighter-rouge">X</code> in the
post-condition <code class="language-plaintext highlighter-rouge">Z = 1</code>; since the command <code class="language-plaintext highlighter-rouge">Z := X</code> always terminates and assigns the value of <code class="language-plaintext highlighter-rouge">X</code>
to <code class="language-plaintext highlighter-rouge">Z</code>, which according to the pre-condition is <code class="language-plaintext highlighter-rouge">1</code>,
the triple is clearly valid, and indeed in our formalism it can be derived by means of rule <code class="language-plaintext highlighter-rouge">H-Loc</code>:</p>

<pre class="Agda"><a id="pr0-0"></a><a id="8578" href="Chapter.Imp.HoareLogic.html#8578" class="Function">pr0-0</a> <a id="8584" class="Symbol">:</a> <a id="8586" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="8589" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="8591" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="8593" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a> <a id="8595" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="8599" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="8601" class="Number">1</a> <a id="8603" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
           <a id="8616" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a> <a id="8618" href="Chapter.Imp.BigStep.html#1571" class="InductiveConstructor Operator">:=</a> <a id="8621" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="8623" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a>
           <a id="8636" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="8638" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="8640" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a> <a id="8642" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="8646" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="8648" class="Number">1</a> <a id="8650" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>

<a id="8653" href="Chapter.Imp.HoareLogic.html#8578" class="Function">pr0-0</a> <a id="8659" class="Symbol">=</a> <a id="8661" href="Chapter.Imp.HoareLogic.html#4136" class="InductiveConstructor">H-Loc</a> <a id="8667" class="Symbol">{</a><a id="8668" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="8670" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a> <a id="8672" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="8676" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="8678" class="Number">1</a><a id="8679" class="Symbol">}</a> <a id="8681" class="Symbol">{</a><a id="8682" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="8684" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a><a id="8685" class="Symbol">}</a> <a id="8687" class="Symbol">{</a><a id="8688" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a><a id="8689" class="Symbol">}</a>
</pre>
<h3 id="composition">Composition</h3>

<p>The next example is the proof of <code class="language-plaintext highlighter-rouge">|- {X = 1} Z := X ; Y := Z {Y = 1}</code> where <code class="language-plaintext highlighter-rouge">;</code>
is written <code class="language-plaintext highlighter-rouge">::</code> in our formalism:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>|-  [ V X ==' N 1 ]
      (Z := V X) :: (Y := V Z)
    [ V Y ==' N 1 ]
</code></pre></div></div>

<p>This case can be treated by applying the composition rule <code class="language-plaintext highlighter-rouge">H-Comp</code> to <code class="language-plaintext highlighter-rouge">pr0-0</code> and <code class="language-plaintext highlighter-rouge">pr0-1</code> below:</p>
<pre class="Agda"><a id="pr0-1"></a><a id="9014" href="Chapter.Imp.HoareLogic.html#9014" class="Function">pr0-1</a> <a id="9020" class="Symbol">:</a> <a id="9022" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="9025" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="9027" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="9029" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a> <a id="9031" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="9035" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="9037" class="Number">1</a> <a id="9039" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
           <a id="9052" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a> <a id="9054" href="Chapter.Imp.BigStep.html#1571" class="InductiveConstructor Operator">:=</a> <a id="9057" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="9059" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a>
           <a id="9072" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="9074" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="9076" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a> <a id="9078" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="9082" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="9084" class="Number">1</a> <a id="9086" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>

<a id="9089" href="Chapter.Imp.HoareLogic.html#9014" class="Function">pr0-1</a> <a id="9095" class="Symbol">=</a> <a id="9097" href="Chapter.Imp.HoareLogic.html#4136" class="InductiveConstructor">H-Loc</a>  <a id="9104" class="Symbol">{</a><a id="9105" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="9107" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a> <a id="9109" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="9113" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="9115" class="Number">1</a><a id="9116" class="Symbol">}</a> <a id="9118" class="Symbol">{</a><a id="9119" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="9121" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a><a id="9122" class="Symbol">}</a> <a id="9124" class="Symbol">{</a><a id="9125" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a><a id="9126" class="Symbol">}</a>
</pre>
<p>Eventually we obtain the proof:</p>
<pre class="Agda"><a id="pr0-2"></a><a id="9168" href="Chapter.Imp.HoareLogic.html#9168" class="Function">pr0-2</a> <a id="9174" class="Symbol">:</a> <a id="9176" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="9179" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="9181" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="9183" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a> <a id="9185" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="9189" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="9191" class="Number">1</a> <a id="9193" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
           <a id="9206" class="Symbol">(</a><a id="9207" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a> <a id="9209" href="Chapter.Imp.BigStep.html#1571" class="InductiveConstructor Operator">:=</a> <a id="9212" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="9214" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a><a id="9215" class="Symbol">)</a> <a id="9217" href="Chapter.Imp.BigStep.html#1627" class="InductiveConstructor Operator">::</a> <a id="9220" class="Symbol">(</a><a id="9221" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a> <a id="9223" href="Chapter.Imp.BigStep.html#1571" class="InductiveConstructor Operator">:=</a> <a id="9226" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="9228" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a><a id="9229" class="Symbol">)</a>
           <a id="9242" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="9244" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="9246" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a> <a id="9248" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="9252" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="9254" class="Number">1</a> <a id="9256" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>

<a id="9259" href="Chapter.Imp.HoareLogic.html#9168" class="Function">pr0-2</a> <a id="9265" class="Symbol">=</a> <a id="9267" href="Chapter.Imp.HoareLogic.html#4297" class="InductiveConstructor">H-Comp</a> <a id="9274" class="Symbol">{</a><a id="9275" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="9277" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a> <a id="9279" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="9283" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="9285" class="Number">1</a><a id="9286" class="Symbol">}</a>
              <a id="9302" class="Symbol">{</a><a id="9303" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="9305" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a> <a id="9307" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="9311" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="9313" class="Number">1</a><a id="9314" class="Symbol">}</a>
              <a id="9330" class="Symbol">{</a><a id="9331" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="9333" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a> <a id="9335" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="9339" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="9341" class="Number">1</a><a id="9342" class="Symbol">}</a>
              <a id="9358" class="Symbol">{</a><a id="9359" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a> <a id="9361" href="Chapter.Imp.BigStep.html#1571" class="InductiveConstructor Operator">:=</a> <a id="9364" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="9366" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a><a id="9367" class="Symbol">}</a>
              <a id="9383" class="Symbol">{</a><a id="9384" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a> <a id="9386" href="Chapter.Imp.BigStep.html#1571" class="InductiveConstructor Operator">:=</a> <a id="9389" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="9391" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a><a id="9392" class="Symbol">}</a>
              <a id="9408" href="Chapter.Imp.HoareLogic.html#8578" class="Function">pr0-0</a> <a id="9414" href="Chapter.Imp.HoareLogic.html#9014" class="Function">pr0-1</a>              
</pre>
<h3 id="selection">Selection</h3>

<p>Let’s consider the triple <code class="language-plaintext highlighter-rouge">{⊤} IF X &lt; Y THEN Z := Y ELSE Z := X {Z = max(X,Y)}</code>, where <code class="language-plaintext highlighter-rouge">⊤</code> is the trivial pre-condition
which is true of any state. To formalize this triple in our setting, we first introduce the trivial assertion <code class="language-plaintext highlighter-rouge">⊤' ∈ Assn</code>
that is true of any <code class="language-plaintext highlighter-rouge">s ∈ State</code>,
and the predicate <code class="language-plaintext highlighter-rouge">max' a₁ a₂ a₃ ∈ Assn</code> with <code class="language-plaintext highlighter-rouge">a₁ a₂ a₃ ∈ Aexp</code> that is true of <code class="language-plaintext highlighter-rouge">s ∈ State</code>
if <code class="language-plaintext highlighter-rouge">aval a₃ s ∈ ℕ</code> is the maximum among <code class="language-plaintext highlighter-rouge">aval a₁ s</code> and <code class="language-plaintext highlighter-rouge">aval a₂ s</code>:</p>
<pre class="Agda"><a id="⊤&#39;"></a><a id="9895" href="Chapter.Imp.HoareLogic.html#9895" class="Function">⊤&#39;</a> <a id="9898" class="Symbol">:</a> <a id="9900" href="Chapter.Imp.HoareLogic.html#2499" class="Function">Assn</a>
<a id="9905" href="Chapter.Imp.HoareLogic.html#9895" class="Function">⊤&#39;</a> <a id="9908" href="Chapter.Imp.HoareLogic.html#9908" class="Bound">s</a> <a id="9910" class="Symbol">=</a> <a id="9912" href="Library.Logic.html#178" class="Datatype">⊤</a>

<a id="max&#39;"></a><a id="9915" href="Chapter.Imp.HoareLogic.html#9915" class="Function">max&#39;</a> <a id="9920" class="Symbol">:</a> <a id="9922" href="Chapter.Imp.AexpBexp.html#1770" class="Datatype">Aexp</a> <a id="9927" class="Symbol">-&gt;</a> <a id="9930" href="Chapter.Imp.AexpBexp.html#1770" class="Datatype">Aexp</a> <a id="9935" class="Symbol">-&gt;</a> <a id="9938" href="Chapter.Imp.AexpBexp.html#1770" class="Datatype">Aexp</a> <a id="9943" class="Symbol">-&gt;</a> <a id="9946" href="Chapter.Imp.HoareLogic.html#2499" class="Function">Assn</a>
<a id="9951" href="Chapter.Imp.HoareLogic.html#9915" class="Function">max&#39;</a> <a id="9956" href="Chapter.Imp.HoareLogic.html#9956" class="Bound">a₁</a> <a id="9959" href="Chapter.Imp.HoareLogic.html#9959" class="Bound">a₂</a> <a id="9962" href="Chapter.Imp.HoareLogic.html#9962" class="Bound">a₃</a> <a id="9965" class="Symbol">=</a> <a id="9967" class="Symbol">λ</a> <a id="9969" href="Chapter.Imp.HoareLogic.html#9969" class="Bound">s</a> <a id="9971" class="Symbol">-&gt;</a> <a id="9974" href="Library.Nat.html#508" class="Function">max</a> <a id="9978" class="Symbol">(</a><a id="9979" href="Chapter.Imp.AexpBexp.html#3910" class="Function">aval</a> <a id="9984" href="Chapter.Imp.HoareLogic.html#9956" class="Bound">a₁</a> <a id="9987" href="Chapter.Imp.HoareLogic.html#9969" class="Bound">s</a><a id="9988" class="Symbol">)</a> <a id="9990" class="Symbol">(</a><a id="9991" href="Chapter.Imp.AexpBexp.html#3910" class="Function">aval</a> <a id="9996" href="Chapter.Imp.HoareLogic.html#9959" class="Bound">a₂</a> <a id="9999" href="Chapter.Imp.HoareLogic.html#9969" class="Bound">s</a><a id="10000" class="Symbol">)</a> <a id="10002" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="10005" href="Chapter.Imp.AexpBexp.html#3910" class="Function">aval</a> <a id="10010" href="Chapter.Imp.HoareLogic.html#9962" class="Bound">a₃</a> <a id="10013" href="Chapter.Imp.HoareLogic.html#9969" class="Bound">s</a>
</pre>
<p>where <code class="language-plaintext highlighter-rouge">max : ℕ -&gt; ℕ -&gt; ℕ</code> is the maximum function defined in the library <code class="language-plaintext highlighter-rouge">Nat.agda</code>.
Now we can express the goal of our proof as follows:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>|- [ ⊤' ]
     IF (Less (V X) (V Y)) THEN (Z := V Y) ELSE (Z := V X)
   [ max' (V X) (V Y) (V Z) ]
</code></pre></div></div>

<p>Here we expect to use rule <code class="language-plaintext highlighter-rouge">H-If</code> whose premises are:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>H1  |- [ (λ s -&gt; ⊤' s ∧ (bval (Less (V X) (V Y)) s == true)) ]
         Z := V Y
       [ max' (V X) (V Y) (V Z) ]

H2  |- [ (λ s -&gt; ⊤' s ∧ (bval (Less (V X) (V Y)) s == false)) ]
         Z := V X
       [ max' (V X) (V Y) (V Z) ]
</code></pre></div></div>

<p>Toward proving the first hypothesis <code class="language-plaintext highlighter-rouge">H1</code> let us show that if
<code class="language-plaintext highlighter-rouge">|- {max(X, Y) = Y} Z := Y {max(X, Y) = Z}</code>:</p>
<pre class="Agda"><a id="pr1-1"></a><a id="10693" href="Chapter.Imp.HoareLogic.html#10693" class="Function">pr1-1</a> <a id="10699" class="Symbol">:</a> <a id="10701" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="10704" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="10706" href="Chapter.Imp.HoareLogic.html#9915" class="Function">max&#39;</a> <a id="10711" class="Symbol">(</a><a id="10712" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="10714" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a><a id="10715" class="Symbol">)</a> <a id="10717" class="Symbol">(</a><a id="10718" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="10720" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a><a id="10721" class="Symbol">)</a> <a id="10723" class="Symbol">(</a><a id="10724" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="10726" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a><a id="10727" class="Symbol">)</a> <a id="10729" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
           <a id="10742" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a> <a id="10744" href="Chapter.Imp.BigStep.html#1571" class="InductiveConstructor Operator">:=</a> <a id="10747" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="10749" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a>
           <a id="10762" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="10764" href="Chapter.Imp.HoareLogic.html#9915" class="Function">max&#39;</a> <a id="10769" class="Symbol">(</a><a id="10770" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="10772" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a><a id="10773" class="Symbol">)</a> <a id="10775" class="Symbol">(</a><a id="10776" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="10778" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a><a id="10779" class="Symbol">)</a> <a id="10781" class="Symbol">(</a><a id="10782" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="10784" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a><a id="10785" class="Symbol">)</a> <a id="10787" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
           
<a id="10801" href="Chapter.Imp.HoareLogic.html#10693" class="Function">pr1-1</a> <a id="10807" class="Symbol">=</a> <a id="10809" href="Chapter.Imp.HoareLogic.html#4136" class="InductiveConstructor">H-Loc</a> <a id="10815" class="Symbol">{</a><a id="10816" href="Chapter.Imp.HoareLogic.html#9915" class="Function">max&#39;</a> <a id="10821" class="Symbol">(</a><a id="10822" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="10824" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a><a id="10825" class="Symbol">)</a> <a id="10827" class="Symbol">(</a><a id="10828" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="10830" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a><a id="10831" class="Symbol">)</a> <a id="10833" class="Symbol">(</a><a id="10834" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="10836" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a><a id="10837" class="Symbol">)}</a> <a id="10840" class="Symbol">{</a><a id="10841" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="10843" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a><a id="10844" class="Symbol">}</a> <a id="10846" class="Symbol">{</a><a id="10847" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a><a id="10848" class="Symbol">}</a> 
</pre>
<p>Next we show that if  <code class="language-plaintext highlighter-rouge">X &lt; Y</code> and we assign <code class="language-plaintext highlighter-rouge">Z := Y</code> then <code class="language-plaintext highlighter-rouge">max(X, Y) = Z</code>:</p>

<pre class="Agda"><a id="less-max"></a><a id="10937" href="Chapter.Imp.HoareLogic.html#10937" class="Function">less-max</a> <a id="10946" class="Symbol">:</a> <a id="10948" class="Symbol">∀(</a><a id="10950" href="Chapter.Imp.HoareLogic.html#10950" class="Bound">n</a> <a id="10952" href="Chapter.Imp.HoareLogic.html#10952" class="Bound">m</a> <a id="10954" class="Symbol">:</a> <a id="10956" href="Library.Nat.html#32" class="Datatype">ℕ</a><a id="10957" class="Symbol">)</a> <a id="10959" class="Symbol">-&gt;</a> <a id="10962" href="Chapter.Imp.HoareLogic.html#10950" class="Bound">n</a> <a id="10964" href="Chapter.Imp.AexpBexp.html#10049" class="Function Operator">&lt;ℕ</a> <a id="10967" href="Chapter.Imp.HoareLogic.html#10952" class="Bound">m</a> <a id="10969" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="10972" href="Library.Bool.html#52" class="InductiveConstructor">true</a> <a id="10977" class="Symbol">-&gt;</a> <a id="10980" href="Library.Nat.html#508" class="Function">max</a> <a id="10984" href="Chapter.Imp.HoareLogic.html#10950" class="Bound">n</a> <a id="10986" href="Chapter.Imp.HoareLogic.html#10952" class="Bound">m</a> <a id="10988" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="10991" href="Chapter.Imp.HoareLogic.html#10952" class="Bound">m</a>
 
<a id="10995" href="Chapter.Imp.HoareLogic.html#10937" class="Function">less-max</a> <a id="11004" href="Library.Nat.html#48" class="InductiveConstructor">zero</a> <a id="11009" href="Chapter.Imp.HoareLogic.html#11009" class="Bound">m</a> <a id="11011" href="Chapter.Imp.HoareLogic.html#11011" class="Bound">hyp</a> <a id="11015" class="Symbol">=</a> <a id="11017" href="Library.Equality.html#125" class="InductiveConstructor">refl</a>
<a id="11022" href="Chapter.Imp.HoareLogic.html#10937" class="Function">less-max</a> <a id="11031" class="Symbol">(</a><a id="11032" href="Library.Nat.html#59" class="InductiveConstructor">succ</a> <a id="11037" href="Chapter.Imp.HoareLogic.html#11037" class="Bound">n</a><a id="11038" class="Symbol">)</a> <a id="11040" class="Symbol">(</a><a id="11041" href="Library.Nat.html#59" class="InductiveConstructor">succ</a> <a id="11046" href="Chapter.Imp.HoareLogic.html#11046" class="Bound">m</a><a id="11047" class="Symbol">)</a> <a id="11049" href="Chapter.Imp.HoareLogic.html#11049" class="Bound">hyp</a> <a id="11053" class="Symbol">=</a> <a id="11055" href="Library.Equality.html#373" class="Function">cong</a> <a id="11060" href="Library.Nat.html#59" class="InductiveConstructor">succ</a> <a id="11065" class="Symbol">(</a><a id="11066" href="Chapter.Imp.HoareLogic.html#10937" class="Function">less-max</a> <a id="11075" href="Chapter.Imp.HoareLogic.html#11037" class="Bound">n</a> <a id="11077" href="Chapter.Imp.HoareLogic.html#11046" class="Bound">m</a> <a id="11079" href="Chapter.Imp.HoareLogic.html#11049" class="Bound">hyp</a><a id="11082" class="Symbol">)</a>

<a id="less-max&#39;"></a><a id="11085" href="Chapter.Imp.HoareLogic.html#11085" class="Function">less-max&#39;</a> <a id="11095" class="Symbol">:</a> <a id="11097" class="Symbol">∀(</a><a id="11099" href="Chapter.Imp.HoareLogic.html#11099" class="Bound">a</a> <a id="11101" href="Chapter.Imp.HoareLogic.html#11101" class="Bound">a&#39;</a> <a id="11104" class="Symbol">:</a> <a id="11106" href="Chapter.Imp.AexpBexp.html#1770" class="Datatype">Aexp</a><a id="11110" class="Symbol">)</a> <a id="11112" class="Symbol">-&gt;</a> <a id="11115" class="Symbol">(</a><a id="11116" href="Chapter.Imp.HoareLogic.html#11116" class="Bound">s</a> <a id="11118" class="Symbol">:</a> <a id="11120" href="Chapter.Imp.AexpBexp.html#2404" class="Function">State</a><a id="11125" class="Symbol">)</a> <a id="11127" class="Symbol">-&gt;</a>
               <a id="11145" href="Chapter.Imp.AexpBexp.html#10249" class="Function">bval</a> <a id="11150" class="Symbol">(</a><a id="11151" href="Chapter.Imp.AexpBexp.html#9458" class="InductiveConstructor">Less</a> <a id="11156" href="Chapter.Imp.HoareLogic.html#11099" class="Bound">a</a> <a id="11158" href="Chapter.Imp.HoareLogic.html#11101" class="Bound">a&#39;</a><a id="11160" class="Symbol">)</a> <a id="11162" href="Chapter.Imp.HoareLogic.html#11116" class="Bound">s</a> <a id="11164" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="11167" href="Library.Bool.html#52" class="InductiveConstructor">true</a> <a id="11172" class="Symbol">-&gt;</a> <a id="11175" href="Chapter.Imp.HoareLogic.html#9915" class="Function">max&#39;</a> <a id="11180" href="Chapter.Imp.HoareLogic.html#11099" class="Bound">a</a> <a id="11182" href="Chapter.Imp.HoareLogic.html#11101" class="Bound">a&#39;</a> <a id="11185" href="Chapter.Imp.HoareLogic.html#11101" class="Bound">a&#39;</a> <a id="11188" href="Chapter.Imp.HoareLogic.html#11116" class="Bound">s</a>
               
<a id="11206" href="Chapter.Imp.HoareLogic.html#11085" class="Function">less-max&#39;</a> <a id="11216" href="Chapter.Imp.HoareLogic.html#11216" class="Bound">a</a> <a id="11218" href="Chapter.Imp.HoareLogic.html#11218" class="Bound">a&#39;</a> <a id="11221" href="Chapter.Imp.HoareLogic.html#11221" class="Bound">s</a> <a id="11223" href="Chapter.Imp.HoareLogic.html#11223" class="Bound">hyp</a> <a id="11227" class="Symbol">=</a> <a id="11229" href="Chapter.Imp.HoareLogic.html#10937" class="Function">less-max</a> <a id="11238" class="Symbol">(</a><a id="11239" href="Chapter.Imp.AexpBexp.html#3910" class="Function">aval</a> <a id="11244" href="Chapter.Imp.HoareLogic.html#11216" class="Bound">a</a> <a id="11246" href="Chapter.Imp.HoareLogic.html#11221" class="Bound">s</a><a id="11247" class="Symbol">)</a> <a id="11249" class="Symbol">(</a><a id="11250" href="Chapter.Imp.AexpBexp.html#3910" class="Function">aval</a> <a id="11255" href="Chapter.Imp.HoareLogic.html#11218" class="Bound">a&#39;</a> <a id="11258" href="Chapter.Imp.HoareLogic.html#11221" class="Bound">s</a><a id="11259" class="Symbol">)</a> <a id="11261" href="Chapter.Imp.HoareLogic.html#11223" class="Bound">hyp</a>

<a id="pr1-2"></a><a id="11266" href="Chapter.Imp.HoareLogic.html#11266" class="Function">pr1-2</a> <a id="11272" class="Symbol">:</a> <a id="11274" class="Symbol">∀</a> <a id="11276" href="Chapter.Imp.HoareLogic.html#11276" class="Bound">s</a> <a id="11278" class="Symbol">-&gt;</a> <a id="11281" class="Symbol">(</a><a id="11282" href="Chapter.Imp.HoareLogic.html#9895" class="Function">⊤&#39;</a> <a id="11285" href="Chapter.Imp.HoareLogic.html#11276" class="Bound">s</a> <a id="11287" href="Library.Logic.html#1349" class="Function Operator">∧</a> <a id="11289" class="Symbol">(</a><a id="11290" href="Chapter.Imp.AexpBexp.html#10249" class="Function">bval</a> <a id="11295" class="Symbol">(</a><a id="11296" href="Chapter.Imp.AexpBexp.html#9458" class="InductiveConstructor">Less</a> <a id="11301" class="Symbol">(</a><a id="11302" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="11304" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a><a id="11305" class="Symbol">)</a> <a id="11307" class="Symbol">(</a><a id="11308" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="11310" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a><a id="11311" class="Symbol">))</a> <a id="11314" href="Chapter.Imp.HoareLogic.html#11276" class="Bound">s</a> <a id="11316" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="11319" href="Library.Bool.html#52" class="InductiveConstructor">true</a><a id="11323" class="Symbol">))</a> <a id="11326" class="Symbol">-&gt;</a>
               <a id="11344" href="Chapter.Imp.HoareLogic.html#9915" class="Function">max&#39;</a> <a id="11349" class="Symbol">(</a><a id="11350" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="11352" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a><a id="11353" class="Symbol">)</a> <a id="11355" class="Symbol">(</a><a id="11356" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="11358" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a><a id="11359" class="Symbol">)</a> <a id="11361" class="Symbol">(</a><a id="11362" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="11364" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a><a id="11365" class="Symbol">)</a> <a id="11367" href="Chapter.Imp.HoareLogic.html#11276" class="Bound">s</a>
               
<a id="11385" href="Chapter.Imp.HoareLogic.html#11266" class="Function">pr1-2</a> <a id="11391" href="Chapter.Imp.HoareLogic.html#11391" class="Bound">s</a> <a id="11393" class="Symbol">(</a><a id="11394" href="Chapter.Imp.HoareLogic.html#11394" class="Bound">x</a> <a id="11396" href="Library.Logic.html#271" class="InductiveConstructor Operator">,</a> <a id="11398" href="Chapter.Imp.HoareLogic.html#11398" class="Bound">y</a><a id="11399" class="Symbol">)</a> <a id="11401" class="Symbol">=</a> <a id="11403" href="Chapter.Imp.HoareLogic.html#11085" class="Function">less-max&#39;</a> <a id="11413" class="Symbol">(</a><a id="11414" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="11416" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a><a id="11417" class="Symbol">)</a> <a id="11419" class="Symbol">(</a><a id="11420" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="11422" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a><a id="11423" class="Symbol">)</a> <a id="11425" href="Chapter.Imp.HoareLogic.html#11391" class="Bound">s</a> <a id="11427" href="Chapter.Imp.HoareLogic.html#11398" class="Bound">y</a>
</pre>
<p>In <code class="language-plaintext highlighter-rouge">pr1-2</code> we have considered the hypothesis <code class="language-plaintext highlighter-rouge">∀ s -&gt; ⊤' s ∧ (bval (Less (V X) (V Y)) s == true</code>
instead of its equivalent (and more natural) <code class="language-plaintext highlighter-rouge">∀ s -&gt; (bval (Less (V X) (V Y)) s == true</code>
because it is exactly
the pre-condition of <code class="language-plaintext highlighter-rouge">H1</code> we are trying to prove; on the other
hand the consequence <code class="language-plaintext highlighter-rouge">max' (V X) (V Y) (V Y) s</code> of <code class="language-plaintext highlighter-rouge">pr1-2</code> matches with the pre-condition
of <code class="language-plaintext highlighter-rouge">pr1-1</code>, where
the arbitrary <code class="language-plaintext highlighter-rouge">s</code> is omitted because we have just the predicate <code class="language-plaintext highlighter-rouge">max' (V X) (V Y) (V Y)</code>.
This suggests that to conclude <code class="language-plaintext highlighter-rouge">H1</code> we can use the rule <code class="language-plaintext highlighter-rouge">H-Str</code> applied to <code class="language-plaintext highlighter-rouge">pr1-2</code> and <code class="language-plaintext highlighter-rouge">pr1-1</code>:</p>
<pre class="Agda"><a id="H1"></a><a id="12002" href="Chapter.Imp.HoareLogic.html#12002" class="Function">H1</a> <a id="12005" class="Symbol">:</a> <a id="12007" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="12010" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="12012" class="Symbol">(λ</a> <a id="12015" href="Chapter.Imp.HoareLogic.html#12015" class="Bound">s</a> <a id="12017" class="Symbol">-&gt;</a> <a id="12020" href="Chapter.Imp.HoareLogic.html#9895" class="Function">⊤&#39;</a> <a id="12023" href="Chapter.Imp.HoareLogic.html#12015" class="Bound">s</a> <a id="12025" href="Library.Logic.html#1349" class="Function Operator">∧</a> <a id="12027" class="Symbol">(</a><a id="12028" href="Chapter.Imp.AexpBexp.html#10249" class="Function">bval</a> <a id="12033" class="Symbol">(</a><a id="12034" href="Chapter.Imp.AexpBexp.html#9458" class="InductiveConstructor">Less</a> <a id="12039" class="Symbol">(</a><a id="12040" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="12042" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a><a id="12043" class="Symbol">)</a> <a id="12045" class="Symbol">(</a><a id="12046" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="12048" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a><a id="12049" class="Symbol">))</a> <a id="12052" href="Chapter.Imp.HoareLogic.html#12015" class="Bound">s</a> <a id="12054" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="12057" href="Library.Bool.html#52" class="InductiveConstructor">true</a><a id="12061" class="Symbol">))</a> <a id="12064" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
        <a id="12074" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a> <a id="12076" href="Chapter.Imp.BigStep.html#1571" class="InductiveConstructor Operator">:=</a> <a id="12079" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="12081" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a>
        <a id="12091" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="12093" href="Chapter.Imp.HoareLogic.html#9915" class="Function">max&#39;</a> <a id="12098" class="Symbol">(</a><a id="12099" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="12101" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a><a id="12102" class="Symbol">)</a> <a id="12104" class="Symbol">(</a><a id="12105" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="12107" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a><a id="12108" class="Symbol">)</a> <a id="12110" class="Symbol">(</a><a id="12111" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="12113" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a><a id="12114" class="Symbol">)</a> <a id="12116" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
           
<a id="12130" href="Chapter.Imp.HoareLogic.html#12002" class="Function">H1</a> <a id="12133" class="Symbol">=</a> <a id="12135" href="Chapter.Imp.HoareLogic.html#7072" class="Function">H-Str</a> <a id="12141" href="Chapter.Imp.HoareLogic.html#11266" class="Function">pr1-2</a> <a id="12147" href="Chapter.Imp.HoareLogic.html#10693" class="Function">pr1-1</a>
</pre>
<p>The proof of <code class="language-plaintext highlighter-rouge">H2</code> follows a similar pattern, this time considering the case when
<code class="language-plaintext highlighter-rouge">bval (Less (V X) (V Y)) s == false</code>:</p>
<pre class="Agda"><a id="geq-max"></a><a id="12280" href="Chapter.Imp.HoareLogic.html#12280" class="Function">geq-max</a> <a id="12288" class="Symbol">:</a> <a id="12290" class="Symbol">∀(</a><a id="12292" href="Chapter.Imp.HoareLogic.html#12292" class="Bound">n</a> <a id="12294" href="Chapter.Imp.HoareLogic.html#12294" class="Bound">m</a> <a id="12296" class="Symbol">:</a> <a id="12298" href="Library.Nat.html#32" class="Datatype">ℕ</a><a id="12299" class="Symbol">)</a> <a id="12301" class="Symbol">-&gt;</a> <a id="12304" href="Chapter.Imp.HoareLogic.html#12292" class="Bound">n</a> <a id="12306" href="Chapter.Imp.AexpBexp.html#10049" class="Function Operator">&lt;ℕ</a> <a id="12309" href="Chapter.Imp.HoareLogic.html#12294" class="Bound">m</a> <a id="12311" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="12314" href="Library.Bool.html#57" class="InductiveConstructor">false</a> <a id="12320" class="Symbol">-&gt;</a> <a id="12323" href="Library.Nat.html#508" class="Function">max</a> <a id="12327" href="Chapter.Imp.HoareLogic.html#12292" class="Bound">n</a> <a id="12329" href="Chapter.Imp.HoareLogic.html#12294" class="Bound">m</a> <a id="12331" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="12334" href="Chapter.Imp.HoareLogic.html#12292" class="Bound">n</a>

<a id="12337" href="Chapter.Imp.HoareLogic.html#12280" class="Function">geq-max</a> <a id="12345" href="Library.Nat.html#48" class="InductiveConstructor">zero</a> <a id="12350" href="Library.Nat.html#48" class="InductiveConstructor">zero</a> <a id="12355" href="Chapter.Imp.HoareLogic.html#12355" class="Bound">hyp</a> <a id="12359" class="Symbol">=</a> <a id="12361" href="Library.Equality.html#125" class="InductiveConstructor">refl</a>
<a id="12366" href="Chapter.Imp.HoareLogic.html#12280" class="Function">geq-max</a> <a id="12374" class="Symbol">(</a><a id="12375" href="Library.Nat.html#59" class="InductiveConstructor">succ</a> <a id="12380" href="Chapter.Imp.HoareLogic.html#12380" class="Bound">n</a><a id="12381" class="Symbol">)</a> <a id="12383" href="Library.Nat.html#48" class="InductiveConstructor">zero</a> <a id="12388" href="Chapter.Imp.HoareLogic.html#12388" class="Bound">hyp</a> <a id="12392" class="Symbol">=</a> <a id="12394" href="Library.Equality.html#125" class="InductiveConstructor">refl</a>
<a id="12399" href="Chapter.Imp.HoareLogic.html#12280" class="Function">geq-max</a> <a id="12407" class="Symbol">(</a><a id="12408" href="Library.Nat.html#59" class="InductiveConstructor">succ</a> <a id="12413" href="Chapter.Imp.HoareLogic.html#12413" class="Bound">n</a><a id="12414" class="Symbol">)</a> <a id="12416" class="Symbol">(</a><a id="12417" href="Library.Nat.html#59" class="InductiveConstructor">succ</a> <a id="12422" href="Chapter.Imp.HoareLogic.html#12422" class="Bound">m</a><a id="12423" class="Symbol">)</a> <a id="12425" href="Chapter.Imp.HoareLogic.html#12425" class="Bound">hyp</a> <a id="12429" class="Symbol">=</a> <a id="12431" href="Library.Equality.html#373" class="Function">cong</a> <a id="12436" href="Library.Nat.html#59" class="InductiveConstructor">succ</a> <a id="12441" class="Symbol">(</a><a id="12442" href="Chapter.Imp.HoareLogic.html#12280" class="Function">geq-max</a> <a id="12450" href="Chapter.Imp.HoareLogic.html#12413" class="Bound">n</a> <a id="12452" href="Chapter.Imp.HoareLogic.html#12422" class="Bound">m</a> <a id="12454" href="Chapter.Imp.HoareLogic.html#12425" class="Bound">hyp</a><a id="12457" class="Symbol">)</a>

<a id="geq-max&#39;"></a><a id="12460" href="Chapter.Imp.HoareLogic.html#12460" class="Function">geq-max&#39;</a> <a id="12469" class="Symbol">:</a> <a id="12471" class="Symbol">∀(</a><a id="12473" href="Chapter.Imp.HoareLogic.html#12473" class="Bound">a</a> <a id="12475" href="Chapter.Imp.HoareLogic.html#12475" class="Bound">a&#39;</a> <a id="12478" class="Symbol">:</a> <a id="12480" href="Chapter.Imp.AexpBexp.html#1770" class="Datatype">Aexp</a><a id="12484" class="Symbol">)</a> <a id="12486" class="Symbol">-&gt;</a> <a id="12489" class="Symbol">(</a><a id="12490" href="Chapter.Imp.HoareLogic.html#12490" class="Bound">s</a> <a id="12492" class="Symbol">:</a> <a id="12494" href="Chapter.Imp.AexpBexp.html#2404" class="Function">State</a><a id="12499" class="Symbol">)</a> <a id="12501" class="Symbol">-&gt;</a>
           <a id="12515" href="Chapter.Imp.AexpBexp.html#10249" class="Function">bval</a> <a id="12520" class="Symbol">(</a><a id="12521" href="Chapter.Imp.AexpBexp.html#9458" class="InductiveConstructor">Less</a> <a id="12526" href="Chapter.Imp.HoareLogic.html#12473" class="Bound">a</a> <a id="12528" href="Chapter.Imp.HoareLogic.html#12475" class="Bound">a&#39;</a><a id="12530" class="Symbol">)</a> <a id="12532" href="Chapter.Imp.HoareLogic.html#12490" class="Bound">s</a> <a id="12534" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="12537" href="Library.Bool.html#57" class="InductiveConstructor">false</a> <a id="12543" class="Symbol">-&gt;</a> <a id="12546" href="Chapter.Imp.HoareLogic.html#9915" class="Function">max&#39;</a> <a id="12551" href="Chapter.Imp.HoareLogic.html#12473" class="Bound">a</a> <a id="12553" href="Chapter.Imp.HoareLogic.html#12475" class="Bound">a&#39;</a> <a id="12556" href="Chapter.Imp.HoareLogic.html#12473" class="Bound">a</a> <a id="12558" href="Chapter.Imp.HoareLogic.html#12490" class="Bound">s</a>

<a id="12561" href="Chapter.Imp.HoareLogic.html#12460" class="Function">geq-max&#39;</a> <a id="12570" href="Chapter.Imp.HoareLogic.html#12570" class="Bound">a</a> <a id="12572" href="Chapter.Imp.HoareLogic.html#12572" class="Bound">a&#39;</a> <a id="12575" href="Chapter.Imp.HoareLogic.html#12575" class="Bound">s</a> <a id="12577" href="Chapter.Imp.HoareLogic.html#12577" class="Bound">hyp</a> <a id="12581" class="Symbol">=</a> <a id="12583" href="Chapter.Imp.HoareLogic.html#12280" class="Function">geq-max</a> <a id="12591" class="Symbol">(</a><a id="12592" href="Chapter.Imp.AexpBexp.html#3910" class="Function">aval</a> <a id="12597" href="Chapter.Imp.HoareLogic.html#12570" class="Bound">a</a> <a id="12599" href="Chapter.Imp.HoareLogic.html#12575" class="Bound">s</a><a id="12600" class="Symbol">)</a> <a id="12602" class="Symbol">(</a><a id="12603" href="Chapter.Imp.AexpBexp.html#3910" class="Function">aval</a> <a id="12608" href="Chapter.Imp.HoareLogic.html#12572" class="Bound">a&#39;</a> <a id="12611" href="Chapter.Imp.HoareLogic.html#12575" class="Bound">s</a><a id="12612" class="Symbol">)</a> <a id="12614" href="Chapter.Imp.HoareLogic.html#12577" class="Bound">hyp</a>

<a id="pr1-3"></a><a id="12619" href="Chapter.Imp.HoareLogic.html#12619" class="Function">pr1-3</a> <a id="12625" class="Symbol">:</a> <a id="12627" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="12630" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="12632" href="Chapter.Imp.HoareLogic.html#9915" class="Function">max&#39;</a> <a id="12637" class="Symbol">(</a><a id="12638" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="12640" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a><a id="12641" class="Symbol">)</a> <a id="12643" class="Symbol">(</a><a id="12644" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="12646" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a><a id="12647" class="Symbol">)</a> <a id="12649" class="Symbol">(</a><a id="12650" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="12652" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a><a id="12653" class="Symbol">)</a> <a id="12655" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
           <a id="12668" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a> <a id="12670" href="Chapter.Imp.BigStep.html#1571" class="InductiveConstructor Operator">:=</a> <a id="12673" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="12675" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a>
           <a id="12688" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="12690" href="Chapter.Imp.HoareLogic.html#9915" class="Function">max&#39;</a> <a id="12695" class="Symbol">(</a><a id="12696" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="12698" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a><a id="12699" class="Symbol">)</a> <a id="12701" class="Symbol">(</a><a id="12702" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="12704" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a><a id="12705" class="Symbol">)</a> <a id="12707" class="Symbol">(</a><a id="12708" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="12710" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a><a id="12711" class="Symbol">)</a> <a id="12713" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
           
<a id="12727" href="Chapter.Imp.HoareLogic.html#12619" class="Function">pr1-3</a> <a id="12733" class="Symbol">=</a> <a id="12735" href="Chapter.Imp.HoareLogic.html#4136" class="InductiveConstructor">H-Loc</a> <a id="12741" class="Symbol">{</a><a id="12742" href="Chapter.Imp.HoareLogic.html#9915" class="Function">max&#39;</a> <a id="12747" class="Symbol">(</a><a id="12748" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="12750" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a><a id="12751" class="Symbol">)</a> <a id="12753" class="Symbol">(</a><a id="12754" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="12756" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a><a id="12757" class="Symbol">)</a> <a id="12759" class="Symbol">(</a><a id="12760" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="12762" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a><a id="12763" class="Symbol">)}</a> <a id="12766" class="Symbol">{</a><a id="12767" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="12769" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a><a id="12770" class="Symbol">}</a> <a id="12772" class="Symbol">{</a><a id="12773" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a><a id="12774" class="Symbol">}</a>

<a id="pr1-4"></a><a id="12777" href="Chapter.Imp.HoareLogic.html#12777" class="Function">pr1-4</a> <a id="12783" class="Symbol">:</a> <a id="12785" class="Symbol">∀</a> <a id="12787" href="Chapter.Imp.HoareLogic.html#12787" class="Bound">s</a> <a id="12789" class="Symbol">-&gt;</a> <a id="12792" class="Symbol">(</a><a id="12793" href="Chapter.Imp.HoareLogic.html#9895" class="Function">⊤&#39;</a> <a id="12796" href="Chapter.Imp.HoareLogic.html#12787" class="Bound">s</a> <a id="12798" href="Library.Logic.html#1349" class="Function Operator">∧</a> <a id="12800" class="Symbol">(</a><a id="12801" href="Chapter.Imp.AexpBexp.html#10249" class="Function">bval</a> <a id="12806" class="Symbol">(</a><a id="12807" href="Chapter.Imp.AexpBexp.html#9458" class="InductiveConstructor">Less</a> <a id="12812" class="Symbol">(</a><a id="12813" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="12815" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a><a id="12816" class="Symbol">)</a> <a id="12818" class="Symbol">(</a><a id="12819" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="12821" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a><a id="12822" class="Symbol">))</a> <a id="12825" href="Chapter.Imp.HoareLogic.html#12787" class="Bound">s</a> <a id="12827" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="12830" href="Library.Bool.html#57" class="InductiveConstructor">false</a><a id="12835" class="Symbol">))</a> <a id="12838" class="Symbol">-&gt;</a>
             <a id="12854" href="Chapter.Imp.HoareLogic.html#9915" class="Function">max&#39;</a> <a id="12859" class="Symbol">(</a><a id="12860" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="12862" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a><a id="12863" class="Symbol">)</a> <a id="12865" class="Symbol">(</a><a id="12866" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="12868" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a><a id="12869" class="Symbol">)</a> <a id="12871" class="Symbol">(</a><a id="12872" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="12874" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a><a id="12875" class="Symbol">)</a> <a id="12877" href="Chapter.Imp.HoareLogic.html#12787" class="Bound">s</a>
             
<a id="12893" href="Chapter.Imp.HoareLogic.html#12777" class="Function">pr1-4</a> <a id="12899" href="Chapter.Imp.HoareLogic.html#12899" class="Bound">s</a> <a id="12901" class="Symbol">(</a><a id="12902" href="Chapter.Imp.HoareLogic.html#12902" class="Bound">x</a> <a id="12904" href="Library.Logic.html#271" class="InductiveConstructor Operator">,</a> <a id="12906" href="Chapter.Imp.HoareLogic.html#12906" class="Bound">y</a><a id="12907" class="Symbol">)</a> <a id="12909" class="Symbol">=</a> <a id="12911" href="Chapter.Imp.HoareLogic.html#12460" class="Function">geq-max&#39;</a> <a id="12920" class="Symbol">(</a><a id="12921" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="12923" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a><a id="12924" class="Symbol">)</a> <a id="12926" class="Symbol">(</a><a id="12927" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="12929" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a><a id="12930" class="Symbol">)</a> <a id="12932" href="Chapter.Imp.HoareLogic.html#12899" class="Bound">s</a> <a id="12934" href="Chapter.Imp.HoareLogic.html#12906" class="Bound">y</a>

<a id="H2"></a><a id="12937" href="Chapter.Imp.HoareLogic.html#12937" class="Function">H2</a> <a id="12940" class="Symbol">:</a> <a id="12942" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="12945" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="12947" class="Symbol">(λ</a> <a id="12950" href="Chapter.Imp.HoareLogic.html#12950" class="Bound">s</a> <a id="12952" class="Symbol">-&gt;</a> <a id="12955" href="Chapter.Imp.HoareLogic.html#9895" class="Function">⊤&#39;</a> <a id="12958" href="Chapter.Imp.HoareLogic.html#12950" class="Bound">s</a> <a id="12960" href="Library.Logic.html#1349" class="Function Operator">∧</a> <a id="12962" class="Symbol">(</a><a id="12963" href="Chapter.Imp.AexpBexp.html#10249" class="Function">bval</a> <a id="12968" class="Symbol">(</a><a id="12969" href="Chapter.Imp.AexpBexp.html#9458" class="InductiveConstructor">Less</a> <a id="12974" class="Symbol">(</a><a id="12975" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="12977" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a><a id="12978" class="Symbol">)</a> <a id="12980" class="Symbol">(</a><a id="12981" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="12983" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a><a id="12984" class="Symbol">))</a> <a id="12987" href="Chapter.Imp.HoareLogic.html#12950" class="Bound">s</a> <a id="12989" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="12992" href="Library.Bool.html#57" class="InductiveConstructor">false</a><a id="12997" class="Symbol">))</a> <a id="13000" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
        <a id="13010" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a> <a id="13012" href="Chapter.Imp.BigStep.html#1571" class="InductiveConstructor Operator">:=</a> <a id="13015" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="13017" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a>
        <a id="13027" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="13029" href="Chapter.Imp.HoareLogic.html#9915" class="Function">max&#39;</a> <a id="13034" class="Symbol">(</a><a id="13035" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="13037" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a><a id="13038" class="Symbol">)</a> <a id="13040" class="Symbol">(</a><a id="13041" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="13043" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a><a id="13044" class="Symbol">)</a> <a id="13046" class="Symbol">(</a><a id="13047" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="13049" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a><a id="13050" class="Symbol">)</a> <a id="13052" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
           
<a id="13066" href="Chapter.Imp.HoareLogic.html#12937" class="Function">H2</a> <a id="13069" class="Symbol">=</a> <a id="13071" href="Chapter.Imp.HoareLogic.html#7072" class="Function">H-Str</a> <a id="13077" href="Chapter.Imp.HoareLogic.html#12777" class="Function">pr1-4</a> <a id="13083" href="Chapter.Imp.HoareLogic.html#12619" class="Function">pr1-3</a>
</pre>
<p>Evenually we apply rule <code class="language-plaintext highlighter-rouge">H-If</code> to <code class="language-plaintext highlighter-rouge">H1</code> and <code class="language-plaintext highlighter-rouge">H2</code>, and we conclude:</p>
<pre class="Agda"><a id="pr1-5"></a><a id="13163" href="Chapter.Imp.HoareLogic.html#13163" class="Function">pr1-5</a> <a id="13169" class="Symbol">:</a> <a id="13171" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="13174" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="13176" href="Chapter.Imp.HoareLogic.html#9895" class="Function">⊤&#39;</a> <a id="13179" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
          <a id="13191" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">IF</a> <a id="13194" class="Symbol">(</a><a id="13195" href="Chapter.Imp.AexpBexp.html#9458" class="InductiveConstructor">Less</a> <a id="13200" class="Symbol">(</a><a id="13201" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="13203" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a><a id="13204" class="Symbol">)</a> <a id="13206" class="Symbol">(</a><a id="13207" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="13209" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a><a id="13210" class="Symbol">))</a> <a id="13213" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">THEN</a> <a id="13218" class="Symbol">(</a><a id="13219" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a> <a id="13221" href="Chapter.Imp.BigStep.html#1571" class="InductiveConstructor Operator">:=</a> <a id="13224" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="13226" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a><a id="13227" class="Symbol">)</a> <a id="13229" href="Chapter.Imp.BigStep.html#1681" class="InductiveConstructor Operator">ELSE</a> <a id="13234" class="Symbol">(</a><a id="13235" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a> <a id="13237" href="Chapter.Imp.BigStep.html#1571" class="InductiveConstructor Operator">:=</a> <a id="13240" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="13242" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a><a id="13243" class="Symbol">)</a>
          <a id="13255" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="13257" href="Chapter.Imp.HoareLogic.html#9915" class="Function">max&#39;</a> <a id="13262" class="Symbol">(</a><a id="13263" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="13265" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a><a id="13266" class="Symbol">)</a> <a id="13268" class="Symbol">(</a><a id="13269" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="13271" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a><a id="13272" class="Symbol">)</a> <a id="13274" class="Symbol">(</a><a id="13275" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="13277" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a><a id="13278" class="Symbol">)</a> <a id="13280" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>

<a id="13283" href="Chapter.Imp.HoareLogic.html#13163" class="Function">pr1-5</a> <a id="13289" class="Symbol">=</a> <a id="13291" href="Chapter.Imp.HoareLogic.html#4462" class="InductiveConstructor">H-If</a> <a id="13296" href="Chapter.Imp.HoareLogic.html#12002" class="Function">H1</a> <a id="13299" href="Chapter.Imp.HoareLogic.html#12937" class="Function">H2</a>
</pre>
<h2 id="exercise">Exercise</h2>

<p>To abbreviate some assertions, we add the following “conjunction” operator:</p>
<pre class="Agda"><a id="_∧&#39;_"></a><a id="13401" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">_∧&#39;_</a> <a id="13406" class="Symbol">:</a> <a id="13408" href="Chapter.Imp.HoareLogic.html#2499" class="Function">Assn</a> <a id="13413" class="Symbol">-&gt;</a> <a id="13416" href="Chapter.Imp.HoareLogic.html#2499" class="Function">Assn</a> <a id="13421" class="Symbol">-&gt;</a> <a id="13424" href="Chapter.Imp.HoareLogic.html#2499" class="Function">Assn</a>
<a id="13429" href="Chapter.Imp.HoareLogic.html#13429" class="Bound">P</a> <a id="13431" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="13434" href="Chapter.Imp.HoareLogic.html#13434" class="Bound">Q</a> <a id="13436" class="Symbol">=</a> <a id="13438" class="Symbol">λ</a> <a id="13440" href="Chapter.Imp.HoareLogic.html#13440" class="Bound">s</a> <a id="13442" class="Symbol">-&gt;</a> <a id="13445" href="Chapter.Imp.HoareLogic.html#13429" class="Bound">P</a> <a id="13447" href="Chapter.Imp.HoareLogic.html#13440" class="Bound">s</a> <a id="13449" href="Library.Logic.html#1349" class="Function Operator">∧</a> <a id="13451" href="Chapter.Imp.HoareLogic.html#13434" class="Bound">Q</a> <a id="13453" href="Chapter.Imp.HoareLogic.html#13440" class="Bound">s</a>
</pre>
<p>Then prove:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>|- [ (V X ==' N 1) ∧' (V Y ==' N 2) ]
     (Z := V X) :: ((X := V Y) :: (Y := V Z))
   [ (V Y ==' N 1) ∧' (V X ==' N 2) ]
</code></pre></div></div>

<pre class="Agda solution"><a id="pr1"></a><a id="13612" href="Chapter.Imp.HoareLogic.html#13612" class="Function">pr1</a> <a id="13616" class="Symbol">:</a> <a id="13618" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="13621" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="13623" class="Symbol">(</a><a id="13624" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="13626" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a> <a id="13628" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="13632" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="13634" class="Number">1</a><a id="13635" class="Symbol">)</a> <a id="13637" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="13640" class="Symbol">(</a><a id="13641" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="13643" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a> <a id="13645" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="13649" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="13651" class="Number">2</a><a id="13652" class="Symbol">)</a> <a id="13654" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
         <a id="13665" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a> <a id="13667" href="Chapter.Imp.BigStep.html#1571" class="InductiveConstructor Operator">:=</a> <a id="13670" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="13672" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a>
         <a id="13683" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="13685" class="Symbol">(</a><a id="13686" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="13688" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a> <a id="13690" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="13694" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="13696" class="Number">1</a><a id="13697" class="Symbol">)</a> <a id="13699" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="13702" class="Symbol">(</a><a id="13703" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="13705" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a> <a id="13707" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="13711" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="13713" class="Number">2</a><a id="13714" class="Symbol">)</a> <a id="13716" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
         
<a id="13728" href="Chapter.Imp.HoareLogic.html#13612" class="Function">pr1</a> <a id="13732" class="Symbol">=</a> <a id="13734" href="Chapter.Imp.HoareLogic.html#4136" class="InductiveConstructor">H-Loc</a> <a id="13740" class="Symbol">{</a> <a id="13742" class="Symbol">(</a><a id="13743" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="13745" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a> <a id="13747" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="13751" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="13753" class="Number">1</a><a id="13754" class="Symbol">)</a> <a id="13756" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="13759" class="Symbol">(</a><a id="13760" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="13762" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a> <a id="13764" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="13768" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="13770" class="Number">2</a><a id="13771" class="Symbol">)</a> <a id="13773" class="Symbol">}</a> <a id="13775" class="Symbol">{</a><a id="13776" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="13778" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a><a id="13779" class="Symbol">}</a> <a id="13781" class="Symbol">{</a><a id="13782" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a><a id="13783" class="Symbol">}</a>

<a id="pr2"></a><a id="13786" href="Chapter.Imp.HoareLogic.html#13786" class="Function">pr2</a> <a id="13790" class="Symbol">:</a> <a id="13792" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="13795" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="13797" class="Symbol">(</a><a id="13798" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="13800" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a> <a id="13802" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="13806" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="13808" class="Number">1</a><a id="13809" class="Symbol">)</a> <a id="13811" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="13814" class="Symbol">(</a><a id="13815" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="13817" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a> <a id="13819" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="13823" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="13825" class="Number">2</a><a id="13826" class="Symbol">)</a> <a id="13828" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
         <a id="13839" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a> <a id="13841" href="Chapter.Imp.BigStep.html#1571" class="InductiveConstructor Operator">:=</a> <a id="13844" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="13846" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a>
        <a id="13856" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="13858" class="Symbol">(</a><a id="13859" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="13861" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a> <a id="13863" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="13867" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="13869" class="Number">1</a><a id="13870" class="Symbol">)</a> <a id="13872" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="13875" class="Symbol">(</a><a id="13876" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="13878" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a> <a id="13880" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="13884" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="13886" class="Number">2</a><a id="13887" class="Symbol">)</a> <a id="13889" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
         
<a id="13901" href="Chapter.Imp.HoareLogic.html#13786" class="Function">pr2</a> <a id="13905" class="Symbol">=</a>  <a id="13908" href="Chapter.Imp.HoareLogic.html#4136" class="InductiveConstructor">H-Loc</a> <a id="13914" class="Symbol">{</a> <a id="13916" class="Symbol">(</a><a id="13917" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="13919" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a> <a id="13921" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="13925" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="13927" class="Number">1</a><a id="13928" class="Symbol">)</a> <a id="13930" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="13933" class="Symbol">(</a><a id="13934" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="13936" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a> <a id="13938" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="13942" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="13944" class="Number">2</a><a id="13945" class="Symbol">)</a> <a id="13947" class="Symbol">}</a> <a id="13949" class="Symbol">{</a><a id="13950" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="13952" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a><a id="13953" class="Symbol">}</a> <a id="13955" class="Symbol">{</a><a id="13956" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a><a id="13957" class="Symbol">}</a> 

<a id="pr3"></a><a id="13961" href="Chapter.Imp.HoareLogic.html#13961" class="Function">pr3</a> <a id="13965" class="Symbol">:</a> <a id="13967" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="13970" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="13972" class="Symbol">(</a><a id="13973" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="13975" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a> <a id="13977" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="13981" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="13983" class="Number">1</a><a id="13984" class="Symbol">)</a> <a id="13986" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="13989" class="Symbol">(</a><a id="13990" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="13992" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a> <a id="13994" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="13998" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="14000" class="Number">2</a><a id="14001" class="Symbol">)</a> <a id="14003" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
         <a id="14014" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a> <a id="14016" href="Chapter.Imp.BigStep.html#1571" class="InductiveConstructor Operator">:=</a> <a id="14019" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="14021" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a>
        <a id="14031" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="14033" class="Symbol">(</a><a id="14034" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="14036" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a> <a id="14038" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="14042" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="14044" class="Number">1</a><a id="14045" class="Symbol">)</a> <a id="14047" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="14050" class="Symbol">(</a><a id="14051" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="14053" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a> <a id="14055" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="14059" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="14061" class="Number">2</a><a id="14062" class="Symbol">)</a> <a id="14064" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
        
<a id="14075" href="Chapter.Imp.HoareLogic.html#13961" class="Function">pr3</a> <a id="14079" class="Symbol">=</a>  <a id="14082" href="Chapter.Imp.HoareLogic.html#4136" class="InductiveConstructor">H-Loc</a> <a id="14088" class="Symbol">{</a> <a id="14090" class="Symbol">(</a><a id="14091" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="14093" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a> <a id="14095" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="14099" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="14101" class="Number">1</a><a id="14102" class="Symbol">)</a> <a id="14104" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="14107" class="Symbol">(</a><a id="14108" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="14110" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a> <a id="14112" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="14116" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="14118" class="Number">2</a><a id="14119" class="Symbol">)</a> <a id="14121" class="Symbol">}</a> <a id="14123" class="Symbol">{</a><a id="14124" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="14126" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a><a id="14127" class="Symbol">}</a> <a id="14129" class="Symbol">{</a><a id="14130" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a><a id="14131" class="Symbol">}</a>

<a id="pr4"></a><a id="14134" href="Chapter.Imp.HoareLogic.html#14134" class="Function">pr4</a> <a id="14138" class="Symbol">:</a> <a id="14140" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="14143" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="14145" class="Symbol">(</a><a id="14146" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="14148" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a> <a id="14150" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="14154" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="14156" class="Number">1</a><a id="14157" class="Symbol">)</a> <a id="14159" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="14162" class="Symbol">(</a><a id="14163" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="14165" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a> <a id="14167" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="14171" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="14173" class="Number">2</a><a id="14174" class="Symbol">)</a> <a id="14176" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
        <a id="14186" class="Symbol">(</a><a id="14187" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a> <a id="14189" href="Chapter.Imp.BigStep.html#1571" class="InductiveConstructor Operator">:=</a> <a id="14192" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="14194" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a><a id="14195" class="Symbol">)</a> <a id="14197" href="Chapter.Imp.BigStep.html#1627" class="InductiveConstructor Operator">::</a> <a id="14200" class="Symbol">(</a><a id="14201" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a> <a id="14203" href="Chapter.Imp.BigStep.html#1571" class="InductiveConstructor Operator">:=</a> <a id="14206" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="14208" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a><a id="14209" class="Symbol">)</a>
        <a id="14219" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="14221" class="Symbol">(</a><a id="14222" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="14224" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a> <a id="14226" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="14230" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="14232" class="Number">1</a><a id="14233" class="Symbol">)</a> <a id="14235" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="14238" class="Symbol">(</a><a id="14239" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="14241" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a> <a id="14243" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="14247" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="14249" class="Number">2</a><a id="14250" class="Symbol">)</a> <a id="14252" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
        
<a id="14263" href="Chapter.Imp.HoareLogic.html#14134" class="Function">pr4</a> <a id="14267" class="Symbol">=</a> <a id="14269" href="Chapter.Imp.HoareLogic.html#4297" class="InductiveConstructor">H-Comp</a> <a id="14276" class="Symbol">{</a> <a id="14278" class="Symbol">(</a><a id="14279" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="14281" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a> <a id="14283" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="14287" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="14289" class="Number">1</a><a id="14290" class="Symbol">)</a> <a id="14292" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="14295" class="Symbol">(</a><a id="14296" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="14298" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a> <a id="14300" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="14304" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="14306" class="Number">2</a><a id="14307" class="Symbol">)</a> <a id="14309" class="Symbol">}</a>
            <a id="14323" class="Symbol">{</a> <a id="14325" class="Symbol">(</a><a id="14326" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="14328" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a> <a id="14330" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="14334" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="14336" class="Number">1</a><a id="14337" class="Symbol">)</a> <a id="14339" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="14342" class="Symbol">(</a><a id="14343" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="14345" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a> <a id="14347" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="14351" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="14353" class="Number">2</a><a id="14354" class="Symbol">)</a> <a id="14356" class="Symbol">}</a>
            <a id="14370" class="Symbol">{</a> <a id="14372" class="Symbol">(</a><a id="14373" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="14375" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a> <a id="14377" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="14381" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="14383" class="Number">1</a><a id="14384" class="Symbol">)</a> <a id="14386" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="14389" class="Symbol">(</a><a id="14390" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="14392" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a> <a id="14394" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="14398" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="14400" class="Number">2</a><a id="14401" class="Symbol">)</a> <a id="14403" class="Symbol">}</a>
            <a id="14417" class="Symbol">{</a> <a id="14419" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a> <a id="14421" href="Chapter.Imp.BigStep.html#1571" class="InductiveConstructor Operator">:=</a> <a id="14424" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="14426" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a> <a id="14428" class="Symbol">}</a> <a id="14430" class="Symbol">{</a> <a id="14432" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a> <a id="14434" href="Chapter.Imp.BigStep.html#1571" class="InductiveConstructor Operator">:=</a> <a id="14437" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="14439" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a> <a id="14441" class="Symbol">}</a>
            <a id="14455" href="Chapter.Imp.HoareLogic.html#13786" class="Function">pr2</a> <a id="14459" href="Chapter.Imp.HoareLogic.html#13612" class="Function">pr1</a>

<a id="pr5"></a><a id="14464" href="Chapter.Imp.HoareLogic.html#14464" class="Function">pr5</a> <a id="14468" class="Symbol">:</a> <a id="14470" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="14473" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="14475" class="Symbol">(</a><a id="14476" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="14478" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a> <a id="14480" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="14484" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="14486" class="Number">1</a><a id="14487" class="Symbol">)</a> <a id="14489" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="14492" class="Symbol">(</a><a id="14493" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="14495" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a> <a id="14497" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="14501" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="14503" class="Number">2</a><a id="14504" class="Symbol">)</a> <a id="14506" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
        <a id="14516" class="Symbol">(</a><a id="14517" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a> <a id="14519" href="Chapter.Imp.BigStep.html#1571" class="InductiveConstructor Operator">:=</a> <a id="14522" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="14524" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a><a id="14525" class="Symbol">)</a> <a id="14527" href="Chapter.Imp.BigStep.html#1627" class="InductiveConstructor Operator">::</a> <a id="14530" class="Symbol">((</a><a id="14532" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a> <a id="14534" href="Chapter.Imp.BigStep.html#1571" class="InductiveConstructor Operator">:=</a> <a id="14537" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="14539" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a><a id="14540" class="Symbol">)</a> <a id="14542" href="Chapter.Imp.BigStep.html#1627" class="InductiveConstructor Operator">::</a> <a id="14545" class="Symbol">(</a><a id="14546" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a> <a id="14548" href="Chapter.Imp.BigStep.html#1571" class="InductiveConstructor Operator">:=</a> <a id="14551" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="14553" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a><a id="14554" class="Symbol">))</a>
        <a id="14565" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="14567" class="Symbol">(</a><a id="14568" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="14570" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a> <a id="14572" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="14576" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="14578" class="Number">1</a><a id="14579" class="Symbol">)</a> <a id="14581" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="14584" class="Symbol">(</a><a id="14585" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="14587" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a> <a id="14589" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="14593" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="14595" class="Number">2</a><a id="14596" class="Symbol">)</a> <a id="14598" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>

<a id="14601" href="Chapter.Imp.HoareLogic.html#14464" class="Function">pr5</a> <a id="14605" class="Symbol">=</a> <a id="14607" href="Chapter.Imp.HoareLogic.html#4297" class="InductiveConstructor">H-Comp</a> <a id="14614" class="Symbol">{(</a><a id="14616" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="14618" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a> <a id="14620" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="14624" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="14626" class="Number">1</a><a id="14627" class="Symbol">)</a> <a id="14629" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="14632" class="Symbol">(</a><a id="14633" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="14635" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a> <a id="14637" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="14641" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="14643" class="Number">2</a><a id="14644" class="Symbol">)}</a>
             <a id="14660" class="Symbol">{(</a><a id="14662" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="14664" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a> <a id="14666" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="14670" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="14672" class="Number">1</a><a id="14673" class="Symbol">)</a> <a id="14675" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="14678" class="Symbol">(</a><a id="14679" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="14681" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a> <a id="14683" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="14687" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="14689" class="Number">2</a><a id="14690" class="Symbol">)}</a>
             <a id="14706" class="Symbol">{(</a><a id="14708" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="14710" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a> <a id="14712" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="14716" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="14718" class="Number">1</a><a id="14719" class="Symbol">)</a> <a id="14721" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="14724" class="Symbol">(</a><a id="14725" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="14727" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a> <a id="14729" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="14733" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="14735" class="Number">2</a><a id="14736" class="Symbol">)}</a>
             <a id="14752" class="Symbol">{</a><a id="14753" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a> <a id="14755" href="Chapter.Imp.BigStep.html#1571" class="InductiveConstructor Operator">:=</a> <a id="14758" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="14760" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a><a id="14761" class="Symbol">}</a>
             <a id="14776" class="Symbol">{(</a><a id="14778" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a> <a id="14780" href="Chapter.Imp.BigStep.html#1571" class="InductiveConstructor Operator">:=</a> <a id="14783" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="14785" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a><a id="14786" class="Symbol">)</a> <a id="14788" href="Chapter.Imp.BigStep.html#1627" class="InductiveConstructor Operator">::</a> <a id="14791" class="Symbol">(</a><a id="14792" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a> <a id="14794" href="Chapter.Imp.BigStep.html#1571" class="InductiveConstructor Operator">:=</a> <a id="14797" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="14799" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a><a id="14800" class="Symbol">)}</a>
             <a id="14816" href="Chapter.Imp.HoareLogic.html#13961" class="Function">pr3</a> <a id="14820" href="Chapter.Imp.HoareLogic.html#14134" class="Function">pr4</a>
</pre>

  </div>
  <ul class="menu">
  <li>
    <a href="Chapter.Imp.SmallStep.html">‹ Small-step operational semantics</a></li>
  <li>
    <a href="Chapter.Imp.HoareLogicExample.html">Example of derivation with Hoare Logic ›</a></li>
</ul>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>
  <div class="wrapper">
    <!-- <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/"> -->
    <!--   <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/4.0/88x31.png"/> -->
    <!-- </a> -->
    2022-2023
    <a href="https://boystrange.github.io">Luca Padovani</a>
    and <a href="http://www.di.unito.it/~deligu/">Ugo de'Liguoro</a>.
    Page generated on 20 Sep 2023.
  </div>
</footer>
</body>

</html>
