<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Example of derivation with Hoare Logic | Introduction to Program Verification in Agda</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="Example of derivation with Hoare Logic" />
<meta property="og:locale" content="en_US" />
<meta property="og:site_name" content="Introduction to Program Verification in Agda" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Example of derivation with Hoare Logic" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","headline":"Example of derivation with Hoare Logic","url":"/pages/Chapter.Imp.HoareLogicExample.html"}</script>
<!-- End Jekyll SEO tag -->

  <link rel="stylesheet" href="../assets/css/main.css">
  <link rel="stylesheet" href="../assets/css/Agda.css">
  <script src="../assets/js/mathjax.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="../assets/js/codereveal.js"></script>
  <link type="application/atom+xml" rel="alternate" href="/feed.xml" title="Introduction to Program Verification in Agda" /><!-- <script src="/assets/js/clipboard.min.js"></script> -->
  <!-- <script src="/assets/js/codeselect.js"></script> -->
</head>
<body>

<header class="site-header" role="banner">
  <div class="wrapper">
    <a class="site-title" rel="author" href="../index.html">Introduction to Program Verification in Agda</a>
    

    <nav class="site-nav">
      <a href="https://agda.readthedocs.io/en/latest/">AGDA DOCS</a>
    </nav>
  </div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">
  <ul class="menu">
  <li>
    <a href="Chapter.Imp.HoareLogic.html">‹ Hoare Logic for verification of IMP programs</a></li>
  <li>
    <a href="Chapter.Imp.HoareLogicSoundness.html">Soundness of Hoare Logic ›</a></li>
</ul>
  <header class="post-header">
    <h1 class="post-title">Example of derivation with Hoare Logic</h1>
  </header>

  <div class="post-content">
    <!--
<pre class="Agda"><a id="138" class="Symbol">{-#</a> <a id="142" class="Keyword">OPTIONS</a> <a id="150" class="Pragma">--allow-unsolved-metas</a> <a id="173" class="Symbol">#-}</a>
</pre>-->

<pre class="Agda"><a id="191" class="Keyword">module</a> <a id="198" href="Chapter.Imp.HoareLogicExample.html" class="Module">Chapter.Imp.HoareLogicExample</a> <a id="228" class="Keyword">where</a>
</pre>
<h2 id="imports">Imports</h2>

<pre class="Agda"><a id="255" class="Keyword">open</a> <a id="260" class="Keyword">import</a> <a id="267" href="Library.Bool.html" class="Module">Library.Bool</a>
<a id="280" class="Keyword">open</a> <a id="285" class="Keyword">import</a> <a id="292" href="Library.Nat.html" class="Module">Library.Nat</a>
<a id="304" class="Keyword">open</a> <a id="309" class="Keyword">import</a> <a id="316" href="Library.Nat.Properties.html" class="Module">Library.Nat.Properties</a>
<a id="339" class="Keyword">open</a> <a id="344" class="Keyword">import</a> <a id="351" href="Library.Logic.html" class="Module">Library.Logic</a>
<a id="365" class="Keyword">open</a> <a id="370" class="Keyword">import</a> <a id="377" href="Library.Logic.Laws.html" class="Module">Library.Logic.Laws</a>
<a id="396" class="Keyword">open</a> <a id="401" class="Keyword">import</a> <a id="408" href="Library.Equality.html" class="Module">Library.Equality</a>
<a id="425" class="Keyword">open</a> <a id="430" class="Keyword">import</a> <a id="437" href="Library.Equality.Reasoning.html" class="Module">Library.Equality.Reasoning</a>
<a id="464" class="Keyword">open</a> <a id="469" class="Keyword">import</a> <a id="476" href="Library.LessThan.html" class="Module">Library.LessThan</a>

<a id="494" class="Keyword">open</a> <a id="499" class="Keyword">import</a> <a id="506" href="Chapter.Imp.AexpBexp.html" class="Module">Chapter.Imp.AexpBexp</a>
<a id="527" class="Keyword">open</a> <a id="532" class="Keyword">import</a> <a id="539" href="Chapter.Imp.BigStep.html" class="Module">Chapter.Imp.BigStep</a>
<a id="559" class="Keyword">open</a> <a id="564" class="Keyword">import</a> <a id="571" href="Chapter.Imp.HoareLogic.html" class="Module">Chapter.Imp.HoareLogic</a>
</pre>
<p>In this chapter we illustrate the use of Hoare Logic to verify a larger program than in previous examples.
The program is very simple, but it includes a <code class="language-plaintext highlighter-rouge">WHILE</code> loop; this makes the proof of the triple formalizing
its pre and post-conditions more interesting, but it is rather long, which might appear disappointing at first glance.
However, the reader should keep in mind that the proof below is a fully detailed derivation in the formal system
of the logic, and not the demo of a tool to verify IMP programs. In fact, much effort is necessary to automatize even 
trivial, but long and tedious steps; we will not treat this topic in detail, but we shall see in the chapter
on <strong>verification conditions</strong> that, under suitable conditions,
we can factor out in a proof the uses of rule <code class="language-plaintext highlighter-rouge">H-Conseq</code>, involving logic and arithmetic,
from the other rules, whose usage is guided by the syntactical structure of the program under consideration.</p>

<p>Consider the program <code class="language-plaintext highlighter-rouge">sum-prog</code> computing the sum of two natural numbers by iterating the successor:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Z := X ;
I := 0 ;
WHILE I &lt; Y DO
      Z := Z + 1 ;
      I := I + 1
</code></pre></div></div>

<p>Then we want to show that</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>|- {⊤} sum-prog {Z = X + Y}
</code></pre></div></div>

<p>To begin with, we encode the program into the IMP syntax:</p>
<pre class="Agda"><a id="I"></a><a id="1855" href="Chapter.Imp.HoareLogicExample.html#1855" class="Function">I</a> <a id="1857" class="Symbol">:</a> <a id="1859" href="Chapter.Imp.AexpBexp.html#802" class="Datatype">Vname</a>
<a id="1865" href="Chapter.Imp.HoareLogicExample.html#1855" class="Function">I</a> <a id="1867" class="Symbol">=</a> <a id="1869" href="Chapter.Imp.AexpBexp.html#823" class="InductiveConstructor">Vn</a> <a id="1872" class="Number">3</a>

<a id="1875" class="Comment">-- Initialization: Z := X ; I := 0</a>

<a id="sum-prog-init"></a><a id="1911" href="Chapter.Imp.HoareLogicExample.html#1911" class="Function">sum-prog-init</a> <a id="1925" class="Symbol">:</a> <a id="1927" href="Chapter.Imp.BigStep.html#1498" class="Datatype">Com</a>
<a id="1931" href="Chapter.Imp.HoareLogicExample.html#1911" class="Function">sum-prog-init</a> <a id="1945" class="Symbol">=</a> <a id="1947" class="Symbol">(</a><a id="1948" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a> <a id="1950" href="Chapter.Imp.BigStep.html#1571" class="InductiveConstructor Operator">:=</a> <a id="1953" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="1955" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a><a id="1956" class="Symbol">)</a> <a id="1958" href="Chapter.Imp.BigStep.html#1627" class="InductiveConstructor Operator">::</a> <a id="1961" class="Symbol">(</a><a id="1962" href="Chapter.Imp.HoareLogicExample.html#1855" class="Function">I</a> <a id="1964" href="Chapter.Imp.BigStep.html#1571" class="InductiveConstructor Operator">:=</a> <a id="1967" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="1969" class="Number">0</a><a id="1970" class="Symbol">)</a>

<a id="1973" class="Comment">-- Body:           Z := Z + 1 ; I := I + 1</a>

<a id="sum-prog-body"></a><a id="2017" href="Chapter.Imp.HoareLogicExample.html#2017" class="Function">sum-prog-body</a> <a id="2031" class="Symbol">:</a> <a id="2033" href="Chapter.Imp.BigStep.html#1498" class="Datatype">Com</a>
<a id="2037" href="Chapter.Imp.HoareLogicExample.html#2017" class="Function">sum-prog-body</a> <a id="2051" class="Symbol">=</a> <a id="2053" class="Symbol">(</a><a id="2054" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a> <a id="2056" href="Chapter.Imp.BigStep.html#1571" class="InductiveConstructor Operator">:=</a> <a id="2059" class="Symbol">(</a><a id="2060" href="Chapter.Imp.AexpBexp.html#1883" class="InductiveConstructor">Plus</a> <a id="2065" class="Symbol">(</a><a id="2066" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="2068" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a><a id="2069" class="Symbol">)</a> <a id="2071" class="Symbol">(</a><a id="2072" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="2074" class="Number">1</a><a id="2075" class="Symbol">)))</a> <a id="2079" href="Chapter.Imp.BigStep.html#1627" class="InductiveConstructor Operator">::</a>
                <a id="2098" class="Symbol">(</a><a id="2099" href="Chapter.Imp.HoareLogicExample.html#1855" class="Function">I</a> <a id="2101" href="Chapter.Imp.BigStep.html#1571" class="InductiveConstructor Operator">:=</a> <a id="2104" class="Symbol">(</a><a id="2105" href="Chapter.Imp.AexpBexp.html#1883" class="InductiveConstructor">Plus</a> <a id="2110" class="Symbol">(</a><a id="2111" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="2113" href="Chapter.Imp.HoareLogicExample.html#1855" class="Function">I</a><a id="2114" class="Symbol">)</a> <a id="2116" class="Symbol">(</a><a id="2117" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="2119" class="Number">1</a><a id="2120" class="Symbol">)))</a>

<a id="2125" class="Comment">-- Complete program computing X + Y by iterating the successor</a>

<a id="sum-prog"></a><a id="2189" href="Chapter.Imp.HoareLogicExample.html#2189" class="Function">sum-prog</a> <a id="2198" class="Symbol">:</a> <a id="2200" href="Chapter.Imp.BigStep.html#1498" class="Datatype">Com</a>
<a id="2204" href="Chapter.Imp.HoareLogicExample.html#2189" class="Function">sum-prog</a> <a id="2213" class="Symbol">=</a> <a id="2215" href="Chapter.Imp.HoareLogicExample.html#1911" class="Function">sum-prog-init</a> <a id="2229" href="Chapter.Imp.BigStep.html#1627" class="InductiveConstructor Operator">::</a>
           <a id="2243" class="Symbol">(</a><a id="2244" href="Chapter.Imp.BigStep.html#1738" class="InductiveConstructor Operator">WHILE</a> <a id="2250" class="Symbol">(</a><a id="2251" href="Chapter.Imp.AexpBexp.html#9458" class="InductiveConstructor">Less</a> <a id="2256" class="Symbol">(</a><a id="2257" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="2259" href="Chapter.Imp.HoareLogicExample.html#1855" class="Function">I</a><a id="2260" class="Symbol">)</a> <a id="2262" class="Symbol">(</a><a id="2263" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="2265" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a><a id="2266" class="Symbol">))</a> <a id="2269" href="Chapter.Imp.BigStep.html#1738" class="InductiveConstructor Operator">DO</a>
                 <a id="2289" href="Chapter.Imp.HoareLogicExample.html#2017" class="Function">sum-prog-body</a><a id="2302" class="Symbol">)</a>

</pre>

<h3 id="initialization">Initialization</h3>

<p>To improve readability, we introduce the following abbreviations of assertions:</p>

<pre class="Agda"><a id="X=X"></a><a id="2416" href="Chapter.Imp.HoareLogicExample.html#2416" class="Function">X=X</a> <a id="2420" class="Symbol">:</a> <a id="2422" href="Chapter.Imp.HoareLogic.html#2499" class="Function">Assn</a>
<a id="2427" href="Chapter.Imp.HoareLogicExample.html#2416" class="Function">X=X</a> <a id="2431" class="Symbol">=</a>  <a id="2434" class="Symbol">(</a><a id="2435" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="2437" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a> <a id="2439" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="2443" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="2445" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a><a id="2446" class="Symbol">)</a>

<a id="0=0"></a><a id="2449" href="Chapter.Imp.HoareLogicExample.html#2449" class="Function">0=0</a> <a id="2453" class="Symbol">:</a> <a id="2455" href="Chapter.Imp.HoareLogic.html#2499" class="Function">Assn</a>
<a id="2460" href="Chapter.Imp.HoareLogicExample.html#2449" class="Function">0=0</a> <a id="2464" class="Symbol">=</a> <a id="2466" class="Symbol">(</a><a id="2467" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="2469" class="Number">0</a> <a id="2471" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="2475" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="2477" class="Number">0</a><a id="2478" class="Symbol">)</a>

<a id="Z=X"></a><a id="2481" href="Chapter.Imp.HoareLogicExample.html#2481" class="Function">Z=X</a> <a id="2485" class="Symbol">:</a> <a id="2487" href="Chapter.Imp.HoareLogic.html#2499" class="Function">Assn</a>
<a id="2492" href="Chapter.Imp.HoareLogicExample.html#2481" class="Function">Z=X</a> <a id="2496" class="Symbol">=</a> <a id="2498" class="Symbol">(</a><a id="2499" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="2501" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a> <a id="2503" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="2507" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="2509" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a><a id="2510" class="Symbol">)</a>

<a id="I=0"></a><a id="2513" href="Chapter.Imp.HoareLogicExample.html#2513" class="Function">I=0</a> <a id="2517" class="Symbol">:</a> <a id="2519" href="Chapter.Imp.HoareLogic.html#2499" class="Function">Assn</a>
<a id="2524" href="Chapter.Imp.HoareLogicExample.html#2513" class="Function">I=0</a> <a id="2528" class="Symbol">=</a> <a id="2530" class="Symbol">(</a><a id="2531" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="2533" href="Chapter.Imp.HoareLogicExample.html#1855" class="Function">I</a> <a id="2535" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="2539" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="2541" class="Number">0</a><a id="2542" class="Symbol">)</a>
</pre>
<p>Then we prove</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[ X=X ∧' 0=0 ]
  (Z := V X) :: (I := N 0)
[ Z=X ∧' I=0 ]
</code></pre></div></div>

<p>First, we apply rule <code class="language-plaintext highlighter-rouge">H-Loc</code> twice:</p>

<pre class="Agda"><a id="pr2-0"></a><a id="2674" href="Chapter.Imp.HoareLogicExample.html#2674" class="Function">pr2-0</a> <a id="2680" class="Symbol">:</a> <a id="2682" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="2685" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="2687" href="Chapter.Imp.HoareLogicExample.html#2416" class="Function">X=X</a> <a id="2691" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="2694" href="Chapter.Imp.HoareLogicExample.html#2449" class="Function">0=0</a> <a id="2698" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
           <a id="2711" class="Symbol">(</a><a id="2712" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a> <a id="2714" href="Chapter.Imp.BigStep.html#1571" class="InductiveConstructor Operator">:=</a> <a id="2717" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="2719" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a><a id="2720" class="Symbol">)</a>
           <a id="2733" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="2735" href="Chapter.Imp.HoareLogicExample.html#2481" class="Function">Z=X</a> <a id="2739" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="2742" href="Chapter.Imp.HoareLogicExample.html#2449" class="Function">0=0</a> <a id="2746" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
           
<a id="2760" href="Chapter.Imp.HoareLogicExample.html#2674" class="Function">pr2-0</a> <a id="2766" class="Symbol">=</a> <a id="2768" href="Chapter.Imp.HoareLogic.html#4136" class="InductiveConstructor">H-Loc</a> <a id="2774" class="Symbol">{</a><a id="2775" href="Chapter.Imp.HoareLogicExample.html#2481" class="Function">Z=X</a> <a id="2779" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="2782" href="Chapter.Imp.HoareLogicExample.html#2449" class="Function">0=0</a><a id="2785" class="Symbol">}</a> <a id="2787" class="Symbol">{</a><a id="2788" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="2790" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a><a id="2791" class="Symbol">}</a> <a id="2793" class="Symbol">{</a><a id="2794" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a><a id="2795" class="Symbol">}</a>

<a id="pr2-1"></a><a id="2798" href="Chapter.Imp.HoareLogicExample.html#2798" class="Function">pr2-1</a> <a id="2804" class="Symbol">:</a> <a id="2806" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="2809" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="2811" href="Chapter.Imp.HoareLogicExample.html#2481" class="Function">Z=X</a> <a id="2815" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="2818" href="Chapter.Imp.HoareLogicExample.html#2449" class="Function">0=0</a> <a id="2822" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
           <a id="2835" class="Symbol">(</a><a id="2836" href="Chapter.Imp.HoareLogicExample.html#1855" class="Function">I</a> <a id="2838" href="Chapter.Imp.BigStep.html#1571" class="InductiveConstructor Operator">:=</a> <a id="2841" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="2843" class="Number">0</a><a id="2844" class="Symbol">)</a>
           <a id="2857" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="2859" href="Chapter.Imp.HoareLogicExample.html#2481" class="Function">Z=X</a> <a id="2863" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="2866" href="Chapter.Imp.HoareLogicExample.html#2513" class="Function">I=0</a> <a id="2870" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
           
<a id="2884" href="Chapter.Imp.HoareLogicExample.html#2798" class="Function">pr2-1</a> <a id="2890" class="Symbol">=</a> <a id="2892" href="Chapter.Imp.HoareLogic.html#4136" class="InductiveConstructor">H-Loc</a> <a id="2898" class="Symbol">{</a><a id="2899" href="Chapter.Imp.HoareLogicExample.html#2481" class="Function">Z=X</a> <a id="2903" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="2906" href="Chapter.Imp.HoareLogicExample.html#2513" class="Function">I=0</a><a id="2909" class="Symbol">}</a> <a id="2911" class="Symbol">{</a><a id="2912" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="2914" class="Number">0</a><a id="2915" class="Symbol">}</a> <a id="2917" class="Symbol">{</a><a id="2918" href="Chapter.Imp.HoareLogicExample.html#1855" class="Function">I</a><a id="2919" class="Symbol">}</a>
</pre>
<p>Then we combine these proofs using rule <code class="language-plaintext highlighter-rouge">H-Comp</code>:</p>
<pre class="Agda"><a id="pr2-2"></a><a id="2979" href="Chapter.Imp.HoareLogicExample.html#2979" class="Function">pr2-2</a> <a id="2985" class="Symbol">:</a> <a id="2987" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="2990" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="2992" href="Chapter.Imp.HoareLogicExample.html#2416" class="Function">X=X</a> <a id="2996" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="2999" href="Chapter.Imp.HoareLogicExample.html#2449" class="Function">0=0</a> <a id="3003" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
           <a id="3016" class="Symbol">(</a><a id="3017" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a> <a id="3019" href="Chapter.Imp.BigStep.html#1571" class="InductiveConstructor Operator">:=</a> <a id="3022" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="3024" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a><a id="3025" class="Symbol">)</a> <a id="3027" href="Chapter.Imp.BigStep.html#1627" class="InductiveConstructor Operator">::</a> <a id="3030" class="Symbol">(</a><a id="3031" href="Chapter.Imp.HoareLogicExample.html#1855" class="Function">I</a> <a id="3033" href="Chapter.Imp.BigStep.html#1571" class="InductiveConstructor Operator">:=</a> <a id="3036" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="3038" class="Number">0</a><a id="3039" class="Symbol">)</a>
           <a id="3052" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="3054" href="Chapter.Imp.HoareLogicExample.html#2481" class="Function">Z=X</a> <a id="3058" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="3061" href="Chapter.Imp.HoareLogicExample.html#2513" class="Function">I=0</a> <a id="3065" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>

<a id="3068" href="Chapter.Imp.HoareLogicExample.html#2979" class="Function">pr2-2</a> <a id="3074" class="Symbol">=</a> <a id="3076" href="Chapter.Imp.HoareLogic.html#4297" class="InductiveConstructor">H-Comp</a> <a id="3083" href="Chapter.Imp.HoareLogicExample.html#2674" class="Function">pr2-0</a> <a id="3089" href="Chapter.Imp.HoareLogicExample.html#2798" class="Function">pr2-1</a>
</pre>
<p>Since the pre-condition <code class="language-plaintext highlighter-rouge">X=X ∧' 0=0</code> is trivially true of any state,
it is a logical consequence of the trivial assertion <code class="language-plaintext highlighter-rouge">⊤'</code>:</p>
<pre class="Agda"><a id="⊤-&gt;X=X∧I=0"></a><a id="3231" href="Chapter.Imp.HoareLogicExample.html#3231" class="Function">⊤-&gt;X=X∧I=0</a> <a id="3242" class="Symbol">:</a> <a id="3244" class="Symbol">∀</a> <a id="3246" href="Chapter.Imp.HoareLogicExample.html#3246" class="Bound">s</a> <a id="3248" class="Symbol">-&gt;</a> <a id="3251" href="Chapter.Imp.HoareLogic.html#9895" class="Function">⊤&#39;</a> <a id="3254" href="Chapter.Imp.HoareLogicExample.html#3246" class="Bound">s</a> <a id="3256" class="Symbol">-&gt;</a> <a id="3259" class="Symbol">(</a><a id="3260" href="Chapter.Imp.HoareLogicExample.html#2416" class="Function">X=X</a> <a id="3264" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="3267" href="Chapter.Imp.HoareLogicExample.html#2449" class="Function">0=0</a><a id="3270" class="Symbol">)</a> <a id="3272" href="Chapter.Imp.HoareLogicExample.html#3246" class="Bound">s</a>
<a id="3274" href="Chapter.Imp.HoareLogicExample.html#3231" class="Function">⊤-&gt;X=X∧I=0</a> <a id="3285" class="Symbol">_</a> <a id="3287" class="Symbol">_</a> <a id="3289" class="Symbol">=</a> <a id="3291" href="Library.Equality.html#125" class="InductiveConstructor">refl</a> <a id="3296" href="Library.Logic.html#271" class="InductiveConstructor Operator">,</a> <a id="3298" href="Library.Equality.html#125" class="InductiveConstructor">refl</a>
</pre>
<p>Combining this implication with the proof <code class="language-plaintext highlighter-rouge">pr2-2</code>, by rule <code class="language-plaintext highlighter-rouge">H-Str</code> we get:</p>
<pre class="Agda"><a id="pr2-3"></a><a id="3387" href="Chapter.Imp.HoareLogicExample.html#3387" class="Function">pr2-3</a> <a id="3393" class="Symbol">:</a> <a id="3395" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="3398" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="3400" href="Chapter.Imp.HoareLogic.html#9895" class="Function">⊤&#39;</a> <a id="3403" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
           <a id="3416" class="Symbol">(</a><a id="3417" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a> <a id="3419" href="Chapter.Imp.BigStep.html#1571" class="InductiveConstructor Operator">:=</a> <a id="3422" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="3424" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a><a id="3425" class="Symbol">)</a> <a id="3427" href="Chapter.Imp.BigStep.html#1627" class="InductiveConstructor Operator">::</a> <a id="3430" class="Symbol">(</a><a id="3431" href="Chapter.Imp.HoareLogicExample.html#1855" class="Function">I</a> <a id="3433" href="Chapter.Imp.BigStep.html#1571" class="InductiveConstructor Operator">:=</a> <a id="3436" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="3438" class="Number">0</a><a id="3439" class="Symbol">)</a>
           <a id="3452" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="3454" href="Chapter.Imp.HoareLogicExample.html#2481" class="Function">Z=X</a> <a id="3458" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="3461" href="Chapter.Imp.HoareLogicExample.html#2513" class="Function">I=0</a> <a id="3465" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>

<a id="3468" href="Chapter.Imp.HoareLogicExample.html#3387" class="Function">pr2-3</a> <a id="3474" class="Symbol">=</a> <a id="3476" href="Chapter.Imp.HoareLogic.html#7072" class="Function">H-Str</a> <a id="3482" href="Chapter.Imp.HoareLogicExample.html#3231" class="Function">⊤-&gt;X=X∧I=0</a> <a id="3493" href="Chapter.Imp.HoareLogicExample.html#2979" class="Function">pr2-2</a>
</pre>
<h3 id="loop">Loop</h3>

<p>The central part of the proof is devising the appropriate <strong>loop-invariant</strong>; it should
represent a property of the state telling how it approximates 
the final state  at each iteration and hence the result of the whole computation.
For this purpose we choose</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(Z = X + I) ∧ (I ≤ Y) 
</code></pre></div></div>

<p>To encode this assertion, as well as the others that will be involved in the proof, 
we introduce three new predicates:</p>

<pre class="Agda"><a id="Plus&#39;"></a><a id="3930" href="Chapter.Imp.HoareLogicExample.html#3930" class="Function">Plus&#39;</a> <a id="3936" class="Symbol">:</a> <a id="3938" href="Chapter.Imp.AexpBexp.html#1770" class="Datatype">Aexp</a> <a id="3943" class="Symbol">-&gt;</a> <a id="3946" href="Chapter.Imp.AexpBexp.html#1770" class="Datatype">Aexp</a> <a id="3951" class="Symbol">-&gt;</a> <a id="3954" href="Chapter.Imp.AexpBexp.html#1770" class="Datatype">Aexp</a> <a id="3959" class="Symbol">-&gt;</a> <a id="3962" href="Chapter.Imp.HoareLogic.html#2499" class="Function">Assn</a>
<a id="3967" href="Chapter.Imp.HoareLogicExample.html#3930" class="Function">Plus&#39;</a> <a id="3973" href="Chapter.Imp.HoareLogicExample.html#3973" class="Bound">a₁</a> <a id="3976" href="Chapter.Imp.HoareLogicExample.html#3976" class="Bound">a₂</a> <a id="3979" href="Chapter.Imp.HoareLogicExample.html#3979" class="Bound">a₃</a> <a id="3982" class="Symbol">=</a> <a id="3984" class="Symbol">λ</a> <a id="3986" href="Chapter.Imp.HoareLogicExample.html#3986" class="Bound">s</a> <a id="3988" class="Symbol">-&gt;</a> <a id="3991" class="Symbol">(</a><a id="3992" href="Chapter.Imp.AexpBexp.html#3910" class="Function">aval</a> <a id="3997" href="Chapter.Imp.HoareLogicExample.html#3973" class="Bound">a₁</a> <a id="4000" href="Chapter.Imp.HoareLogicExample.html#3986" class="Bound">s</a><a id="4001" class="Symbol">)</a> <a id="4003" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="4006" class="Symbol">(</a><a id="4007" href="Chapter.Imp.AexpBexp.html#3910" class="Function">aval</a> <a id="4012" href="Chapter.Imp.HoareLogicExample.html#3976" class="Bound">a₂</a> <a id="4015" href="Chapter.Imp.HoareLogicExample.html#3986" class="Bound">s</a><a id="4016" class="Symbol">)</a> <a id="4018" href="Library.Nat.html#145" class="Function Operator">+</a> <a id="4020" class="Symbol">(</a><a id="4021" href="Chapter.Imp.AexpBexp.html#3910" class="Function">aval</a> <a id="4026" href="Chapter.Imp.HoareLogicExample.html#3979" class="Bound">a₃</a> <a id="4029" href="Chapter.Imp.HoareLogicExample.html#3986" class="Bound">s</a><a id="4030" class="Symbol">)</a>

<a id="_&lt;=&#39;_"></a><a id="4033" href="Chapter.Imp.HoareLogicExample.html#4033" class="Function Operator">_&lt;=&#39;_</a> <a id="4039" class="Symbol">:</a> <a id="4041" href="Chapter.Imp.AexpBexp.html#1770" class="Datatype">Aexp</a> <a id="4046" class="Symbol">-&gt;</a> <a id="4049" href="Chapter.Imp.AexpBexp.html#1770" class="Datatype">Aexp</a> <a id="4054" class="Symbol">-&gt;</a> <a id="4057" href="Chapter.Imp.HoareLogic.html#2499" class="Function">Assn</a>
<a id="4062" href="Chapter.Imp.HoareLogicExample.html#4062" class="Bound">a₁</a> <a id="4065" href="Chapter.Imp.HoareLogicExample.html#4033" class="Function Operator">&lt;=&#39;</a> <a id="4069" href="Chapter.Imp.HoareLogicExample.html#4069" class="Bound">a₂</a> <a id="4072" class="Symbol">=</a> <a id="4074" class="Symbol">λ</a> <a id="4076" href="Chapter.Imp.HoareLogicExample.html#4076" class="Bound">s</a> <a id="4078" class="Symbol">-&gt;</a> <a id="4081" class="Symbol">(</a><a id="4082" href="Chapter.Imp.AexpBexp.html#3910" class="Function">aval</a> <a id="4087" href="Chapter.Imp.HoareLogicExample.html#4062" class="Bound">a₁</a> <a id="4090" href="Chapter.Imp.HoareLogicExample.html#4076" class="Bound">s</a><a id="4091" class="Symbol">)</a> <a id="4093" href="Library.LessThan.html#210" class="Datatype Operator">&lt;=</a> <a id="4096" class="Symbol">(</a><a id="4097" href="Chapter.Imp.AexpBexp.html#3910" class="Function">aval</a> <a id="4102" href="Chapter.Imp.HoareLogicExample.html#4069" class="Bound">a₂</a> <a id="4105" href="Chapter.Imp.HoareLogicExample.html#4076" class="Bound">s</a><a id="4106" class="Symbol">)</a>

<a id="_&lt;&#39;_"></a><a id="4109" href="Chapter.Imp.HoareLogicExample.html#4109" class="Function Operator">_&lt;&#39;_</a> <a id="4114" class="Symbol">:</a> <a id="4116" href="Chapter.Imp.AexpBexp.html#1770" class="Datatype">Aexp</a> <a id="4121" class="Symbol">-&gt;</a> <a id="4124" href="Chapter.Imp.AexpBexp.html#1770" class="Datatype">Aexp</a> <a id="4129" class="Symbol">-&gt;</a> <a id="4132" href="Chapter.Imp.HoareLogic.html#2499" class="Function">Assn</a>
<a id="4137" href="Chapter.Imp.HoareLogicExample.html#4137" class="Bound">a₁</a> <a id="4140" href="Chapter.Imp.HoareLogicExample.html#4109" class="Function Operator">&lt;&#39;</a> <a id="4143" href="Chapter.Imp.HoareLogicExample.html#4143" class="Bound">a₂</a> <a id="4146" class="Symbol">=</a> <a id="4148" class="Symbol">λ</a> <a id="4150" href="Chapter.Imp.HoareLogicExample.html#4150" class="Bound">s</a> <a id="4152" class="Symbol">-&gt;</a> <a id="4155" class="Symbol">(</a><a id="4156" href="Chapter.Imp.AexpBexp.html#3910" class="Function">aval</a> <a id="4161" href="Chapter.Imp.HoareLogicExample.html#4137" class="Bound">a₁</a> <a id="4164" href="Chapter.Imp.HoareLogicExample.html#4150" class="Bound">s</a><a id="4165" class="Symbol">)</a> <a id="4167" href="Chapter.Imp.AexpBexp.html#10049" class="Function Operator">&lt;ℕ</a> <a id="4170" class="Symbol">(</a><a id="4171" href="Chapter.Imp.AexpBexp.html#3910" class="Function">aval</a> <a id="4176" href="Chapter.Imp.HoareLogicExample.html#4143" class="Bound">a₂</a> <a id="4179" href="Chapter.Imp.HoareLogicExample.html#4150" class="Bound">s</a><a id="4180" class="Symbol">)</a> <a id="4182" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="4185" href="Library.Bool.html#52" class="InductiveConstructor">true</a>
</pre>
<p>Then we define:</p>
<pre class="Agda"><a id="Z=X+I"></a><a id="4215" href="Chapter.Imp.HoareLogicExample.html#4215" class="Function">Z=X+I</a> <a id="4221" class="Symbol">:</a> <a id="4223" href="Chapter.Imp.HoareLogic.html#2499" class="Function">Assn</a>
<a id="4228" href="Chapter.Imp.HoareLogicExample.html#4215" class="Function">Z=X+I</a> <a id="4234" class="Symbol">=</a> <a id="4236" href="Chapter.Imp.HoareLogicExample.html#3930" class="Function">Plus&#39;</a> <a id="4242" class="Symbol">(</a><a id="4243" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="4245" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a><a id="4246" class="Symbol">)</a> <a id="4248" class="Symbol">(</a><a id="4249" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="4251" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a><a id="4252" class="Symbol">)</a> <a id="4254" class="Symbol">(</a><a id="4255" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="4257" href="Chapter.Imp.HoareLogicExample.html#1855" class="Function">I</a><a id="4258" class="Symbol">)</a>

<a id="I&lt;=Y"></a><a id="4261" href="Chapter.Imp.HoareLogicExample.html#4261" class="Function">I&lt;=Y</a> <a id="4266" class="Symbol">:</a> <a id="4268" href="Chapter.Imp.HoareLogic.html#2499" class="Function">Assn</a>
<a id="4273" href="Chapter.Imp.HoareLogicExample.html#4261" class="Function">I&lt;=Y</a> <a id="4278" class="Symbol">=</a> <a id="4280" class="Symbol">(</a><a id="4281" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="4283" href="Chapter.Imp.HoareLogicExample.html#1855" class="Function">I</a><a id="4284" class="Symbol">)</a> <a id="4286" href="Chapter.Imp.HoareLogicExample.html#4033" class="Function Operator">&lt;=&#39;</a> <a id="4290" class="Symbol">(</a><a id="4291" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="4293" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a><a id="4294" class="Symbol">)</a>
</pre>
<p>Now, the invariant can be written as follows:</p>
<pre class="Agda"><a id="sum-prog-inv"></a><a id="4350" href="Chapter.Imp.HoareLogicExample.html#4350" class="Function">sum-prog-inv</a> <a id="4363" class="Symbol">:</a> <a id="4365" href="Chapter.Imp.HoareLogic.html#2499" class="Function">Assn</a>
<a id="4370" href="Chapter.Imp.HoareLogicExample.html#4350" class="Function">sum-prog-inv</a> <a id="4383" class="Symbol">=</a> <a id="4385" href="Chapter.Imp.HoareLogicExample.html#4215" class="Function">Z=X+I</a> <a id="4391" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="4394" href="Chapter.Imp.HoareLogicExample.html#4261" class="Function">I&lt;=Y</a>
</pre>
<p>The next step is to show that</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>|- [ (Z=X+I ∧' I&lt;=Y) ∧' I&lt;Y ]
     (Z := (Plus (V Z) (N 1))) ::
     (I := (Plus (V I) (N 1)))
   [ (Z=X+I ∧' I&lt;=Y) ]
</code></pre></div></div>

<p>where</p>
<pre class="Agda"><a id="I&lt;Y"></a><a id="4581" href="Chapter.Imp.HoareLogicExample.html#4581" class="Function">I&lt;Y</a> <a id="4585" class="Symbol">:</a> <a id="4587" href="Chapter.Imp.HoareLogic.html#2499" class="Function">Assn</a>
<a id="4592" href="Chapter.Imp.HoareLogicExample.html#4581" class="Function">I&lt;Y</a> <a id="4596" class="Symbol">=</a> <a id="4598" class="Symbol">(</a><a id="4599" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="4601" href="Chapter.Imp.HoareLogicExample.html#1855" class="Function">I</a><a id="4602" class="Symbol">)</a> <a id="4604" href="Chapter.Imp.HoareLogicExample.html#4109" class="Function Operator">&lt;&#39;</a> <a id="4607" class="Symbol">(</a><a id="4608" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="4610" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a><a id="4611" class="Symbol">)</a>
</pre>
<p>Toward such proof, we first introduce some abbreviations:</p>
<pre class="Agda"><a id="Z+1=X+I+1"></a><a id="4679" href="Chapter.Imp.HoareLogicExample.html#4679" class="Function">Z+1=X+I+1</a> <a id="4689" class="Symbol">:</a> <a id="4691" href="Chapter.Imp.HoareLogic.html#2499" class="Function">Assn</a>
<a id="4696" href="Chapter.Imp.HoareLogicExample.html#4679" class="Function">Z+1=X+I+1</a> <a id="4706" class="Symbol">=</a> <a id="4708" href="Chapter.Imp.HoareLogicExample.html#3930" class="Function">Plus&#39;</a> <a id="4714" class="Symbol">(</a><a id="4715" href="Chapter.Imp.AexpBexp.html#1883" class="InductiveConstructor">Plus</a> <a id="4720" class="Symbol">(</a><a id="4721" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="4723" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a><a id="4724" class="Symbol">)</a> <a id="4726" class="Symbol">(</a><a id="4727" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="4729" class="Number">1</a><a id="4730" class="Symbol">))</a> <a id="4733" class="Symbol">(</a><a id="4734" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="4736" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a><a id="4737" class="Symbol">)</a> <a id="4739" class="Symbol">(</a><a id="4740" href="Chapter.Imp.AexpBexp.html#1883" class="InductiveConstructor">Plus</a> <a id="4745" class="Symbol">(</a><a id="4746" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="4748" href="Chapter.Imp.HoareLogicExample.html#1855" class="Function">I</a><a id="4749" class="Symbol">)</a> <a id="4751" class="Symbol">(</a><a id="4752" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="4754" class="Number">1</a><a id="4755" class="Symbol">))</a>

<a id="Z=X+I+1"></a><a id="4759" href="Chapter.Imp.HoareLogicExample.html#4759" class="Function">Z=X+I+1</a> <a id="4767" class="Symbol">:</a> <a id="4769" href="Chapter.Imp.HoareLogic.html#2499" class="Function">Assn</a>
<a id="4774" href="Chapter.Imp.HoareLogicExample.html#4759" class="Function">Z=X+I+1</a> <a id="4782" class="Symbol">=</a> <a id="4784" href="Chapter.Imp.HoareLogicExample.html#3930" class="Function">Plus&#39;</a> <a id="4790" class="Symbol">(</a><a id="4791" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="4793" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a><a id="4794" class="Symbol">)</a> <a id="4796" class="Symbol">(</a><a id="4797" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="4799" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a><a id="4800" class="Symbol">)</a> <a id="4802" class="Symbol">(</a><a id="4803" href="Chapter.Imp.AexpBexp.html#1883" class="InductiveConstructor">Plus</a> <a id="4808" class="Symbol">(</a><a id="4809" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="4811" href="Chapter.Imp.HoareLogicExample.html#1855" class="Function">I</a><a id="4812" class="Symbol">)</a> <a id="4814" class="Symbol">(</a><a id="4815" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="4817" class="Number">1</a><a id="4818" class="Symbol">))</a>

<a id="I+1&lt;Y+1"></a><a id="4822" href="Chapter.Imp.HoareLogicExample.html#4822" class="Function">I+1&lt;Y+1</a> <a id="4830" class="Symbol">:</a> <a id="4832" href="Chapter.Imp.HoareLogic.html#2499" class="Function">Assn</a>
<a id="4837" href="Chapter.Imp.HoareLogicExample.html#4822" class="Function">I+1&lt;Y+1</a> <a id="4845" class="Symbol">=</a> <a id="4847" class="Symbol">(</a><a id="4848" href="Chapter.Imp.AexpBexp.html#1883" class="InductiveConstructor">Plus</a> <a id="4853" class="Symbol">(</a><a id="4854" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="4856" href="Chapter.Imp.HoareLogicExample.html#1855" class="Function">I</a><a id="4857" class="Symbol">)</a> <a id="4859" class="Symbol">(</a><a id="4860" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="4862" class="Number">1</a><a id="4863" class="Symbol">))</a> <a id="4866" href="Chapter.Imp.HoareLogicExample.html#4109" class="Function Operator">&lt;&#39;</a> <a id="4869" class="Symbol">(</a><a id="4870" href="Chapter.Imp.AexpBexp.html#1883" class="InductiveConstructor">Plus</a> <a id="4875" class="Symbol">(</a><a id="4876" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="4878" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a><a id="4879" class="Symbol">)</a> <a id="4881" class="Symbol">(</a><a id="4882" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="4884" class="Number">1</a><a id="4885" class="Symbol">))</a>

<a id="I&lt;Y+1"></a><a id="4889" href="Chapter.Imp.HoareLogicExample.html#4889" class="Function">I&lt;Y+1</a> <a id="4895" class="Symbol">:</a> <a id="4897" href="Chapter.Imp.HoareLogic.html#2499" class="Function">Assn</a>
<a id="4902" href="Chapter.Imp.HoareLogicExample.html#4889" class="Function">I&lt;Y+1</a> <a id="4908" class="Symbol">=</a> <a id="4910" class="Symbol">(</a><a id="4911" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="4913" href="Chapter.Imp.HoareLogicExample.html#1855" class="Function">I</a><a id="4914" class="Symbol">)</a> <a id="4916" href="Chapter.Imp.HoareLogicExample.html#4109" class="Function Operator">&lt;&#39;</a> <a id="4919" class="Symbol">(</a><a id="4920" href="Chapter.Imp.AexpBexp.html#1883" class="InductiveConstructor">Plus</a> <a id="4925" class="Symbol">(</a><a id="4926" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="4928" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a><a id="4929" class="Symbol">)</a> <a id="4931" class="Symbol">(</a><a id="4932" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="4934" class="Number">1</a><a id="4935" class="Symbol">))</a>
</pre>
<p>Then we establish the proof below concerning the body:</p>
<pre class="Agda"><a id="pr2-4"></a><a id="5001" href="Chapter.Imp.HoareLogicExample.html#5001" class="Function">pr2-4</a> <a id="5007" class="Symbol">:</a> <a id="5009" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="5012" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="5014" href="Chapter.Imp.HoareLogicExample.html#4679" class="Function">Z+1=X+I+1</a> <a id="5024" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="5027" href="Chapter.Imp.HoareLogicExample.html#4822" class="Function">I+1&lt;Y+1</a> <a id="5035" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a> 
            <a id="5050" class="Symbol">(</a><a id="5051" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a> <a id="5053" href="Chapter.Imp.BigStep.html#1571" class="InductiveConstructor Operator">:=</a> <a id="5056" href="Chapter.Imp.AexpBexp.html#1883" class="InductiveConstructor">Plus</a> <a id="5061" class="Symbol">(</a><a id="5062" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="5064" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a><a id="5065" class="Symbol">)</a> <a id="5067" class="Symbol">(</a><a id="5068" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="5070" class="Number">1</a><a id="5071" class="Symbol">))</a>
           <a id="5085" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="5087" href="Chapter.Imp.HoareLogicExample.html#4759" class="Function">Z=X+I+1</a> <a id="5095" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="5098" href="Chapter.Imp.HoareLogicExample.html#4822" class="Function">I+1&lt;Y+1</a> <a id="5106" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>

<a id="5109" href="Chapter.Imp.HoareLogicExample.html#5001" class="Function">pr2-4</a> <a id="5115" class="Symbol">=</a> <a id="5117" href="Chapter.Imp.HoareLogic.html#4136" class="InductiveConstructor">H-Loc</a> <a id="5123" class="Symbol">{</a><a id="5124" href="Chapter.Imp.HoareLogicExample.html#4759" class="Function">Z=X+I+1</a> <a id="5132" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="5135" href="Chapter.Imp.HoareLogicExample.html#4822" class="Function">I+1&lt;Y+1</a><a id="5142" class="Symbol">}</a> <a id="5144" class="Symbol">{</a><a id="5145" href="Chapter.Imp.AexpBexp.html#1883" class="InductiveConstructor">Plus</a> <a id="5150" class="Symbol">(</a><a id="5151" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="5153" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a><a id="5154" class="Symbol">)</a> <a id="5156" class="Symbol">(</a><a id="5157" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="5159" class="Number">1</a><a id="5160" class="Symbol">)}</a> <a id="5163" class="Symbol">{</a><a id="5164" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a><a id="5165" class="Symbol">}</a>


<a id="pr2-5"></a><a id="5169" href="Chapter.Imp.HoareLogicExample.html#5169" class="Function">pr2-5</a> <a id="5175" class="Symbol">:</a> <a id="5177" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="5180" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="5182" href="Chapter.Imp.HoareLogicExample.html#4759" class="Function">Z=X+I+1</a> <a id="5190" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="5193" href="Chapter.Imp.HoareLogicExample.html#4822" class="Function">I+1&lt;Y+1</a> <a id="5201" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
            <a id="5215" class="Symbol">(</a><a id="5216" href="Chapter.Imp.HoareLogicExample.html#1855" class="Function">I</a> <a id="5218" href="Chapter.Imp.BigStep.html#1571" class="InductiveConstructor Operator">:=</a> <a id="5221" href="Chapter.Imp.AexpBexp.html#1883" class="InductiveConstructor">Plus</a> <a id="5226" class="Symbol">(</a><a id="5227" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="5229" href="Chapter.Imp.HoareLogicExample.html#1855" class="Function">I</a><a id="5230" class="Symbol">)</a> <a id="5232" class="Symbol">(</a><a id="5233" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="5235" class="Number">1</a><a id="5236" class="Symbol">))</a>
           <a id="5250" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="5252" href="Chapter.Imp.HoareLogicExample.html#4215" class="Function">Z=X+I</a> <a id="5258" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="5261" href="Chapter.Imp.HoareLogicExample.html#4889" class="Function">I&lt;Y+1</a> <a id="5267" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
           
<a id="5281" href="Chapter.Imp.HoareLogicExample.html#5169" class="Function">pr2-5</a> <a id="5287" class="Symbol">=</a> <a id="5289" href="Chapter.Imp.HoareLogic.html#4136" class="InductiveConstructor">H-Loc</a> <a id="5295" class="Symbol">{</a><a id="5296" href="Chapter.Imp.HoareLogicExample.html#4215" class="Function">Z=X+I</a> <a id="5302" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="5305" href="Chapter.Imp.HoareLogicExample.html#4889" class="Function">I&lt;Y+1</a><a id="5310" class="Symbol">}</a> <a id="5312" class="Symbol">{</a><a id="5313" href="Chapter.Imp.AexpBexp.html#1883" class="InductiveConstructor">Plus</a> <a id="5318" class="Symbol">(</a><a id="5319" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="5321" href="Chapter.Imp.HoareLogicExample.html#1855" class="Function">I</a><a id="5322" class="Symbol">)</a> <a id="5324" class="Symbol">(</a><a id="5325" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="5327" class="Number">1</a><a id="5328" class="Symbol">)}</a> <a id="5331" class="Symbol">{</a><a id="5332" href="Chapter.Imp.HoareLogicExample.html#1855" class="Function">I</a><a id="5333" class="Symbol">}</a>

<a id="pr2-6"></a><a id="5336" href="Chapter.Imp.HoareLogicExample.html#5336" class="Function">pr2-6</a> <a id="5342" class="Symbol">:</a> <a id="5344" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="5347" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="5349" href="Chapter.Imp.HoareLogicExample.html#4679" class="Function">Z+1=X+I+1</a> <a id="5359" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="5362" href="Chapter.Imp.HoareLogicExample.html#4822" class="Function">I+1&lt;Y+1</a> <a id="5370" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
            <a id="5384" href="Chapter.Imp.HoareLogicExample.html#2017" class="Function">sum-prog-body</a>
           <a id="5409" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="5411" href="Chapter.Imp.HoareLogicExample.html#4215" class="Function">Z=X+I</a> <a id="5417" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="5420" href="Chapter.Imp.HoareLogicExample.html#4889" class="Function">I&lt;Y+1</a> <a id="5426" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>

<a id="5429" href="Chapter.Imp.HoareLogicExample.html#5336" class="Function">pr2-6</a> <a id="5435" class="Symbol">=</a> <a id="5437" href="Chapter.Imp.HoareLogic.html#4297" class="InductiveConstructor">H-Comp</a> <a id="5444" href="Chapter.Imp.HoareLogicExample.html#5001" class="Function">pr2-4</a> <a id="5450" href="Chapter.Imp.HoareLogicExample.html#5169" class="Function">pr2-5</a>
</pre>
<p>To use <code class="language-plaintext highlighter-rouge">pr2-6</code> when proving that <code class="language-plaintext highlighter-rouge">Z=X+I ∧' I&lt;=Y</code> is a loop-invariant
we have to establish the implications:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(Z=X+I ∧' I&lt;=Y) ∧' I&lt;Y ==&gt; Z+1=X+I+1 ∧' I+1&lt;Y+1    and

Z=X+I ∧' I&lt;Y+1 ==&gt; Z=X+I ∧' I&lt;=Y  
</code></pre></div></div>

<p>Before facing such task and for further use in the proof, we establish some
lemmas about the properties of <code class="language-plaintext highlighter-rouge">&lt;=</code> and <code class="language-plaintext highlighter-rouge">&lt;</code>:</p>
<pre class="Agda"><a id="succ-le"></a><a id="5794" href="Chapter.Imp.HoareLogicExample.html#5794" class="Function">succ-le</a> <a id="5802" class="Symbol">:</a> <a id="5804" class="Symbol">∀</a> <a id="5806" class="Symbol">{</a><a id="5807" href="Chapter.Imp.HoareLogicExample.html#5807" class="Bound">n</a> <a id="5809" href="Chapter.Imp.HoareLogicExample.html#5809" class="Bound">m</a> <a id="5811" class="Symbol">:</a> <a id="5813" href="Library.Nat.html#32" class="Datatype">ℕ</a><a id="5814" class="Symbol">}</a> <a id="5816" class="Symbol">-&gt;</a> <a id="5819" href="Library.Nat.html#59" class="InductiveConstructor">succ</a> <a id="5824" href="Chapter.Imp.HoareLogicExample.html#5807" class="Bound">n</a> <a id="5826" href="Library.LessThan.html#210" class="Datatype Operator">&lt;=</a> <a id="5829" href="Library.Nat.html#59" class="InductiveConstructor">succ</a> <a id="5834" href="Chapter.Imp.HoareLogicExample.html#5809" class="Bound">m</a> <a id="5836" class="Symbol">-&gt;</a> <a id="5839" href="Chapter.Imp.HoareLogicExample.html#5807" class="Bound">n</a> <a id="5841" href="Library.LessThan.html#210" class="Datatype Operator">&lt;=</a> <a id="5844" href="Chapter.Imp.HoareLogicExample.html#5809" class="Bound">m</a>  <a id="5847" class="Comment">-- move to library LessThan</a>
<a id="5875" href="Chapter.Imp.HoareLogicExample.html#5794" class="Function">succ-le</a> <a id="5883" class="Symbol">(</a><a id="5884" href="Library.LessThan.html#271" class="InductiveConstructor">le-succ</a> <a id="5892" href="Chapter.Imp.HoareLogicExample.html#5892" class="Bound">hyp</a><a id="5895" class="Symbol">)</a> <a id="5897" class="Symbol">=</a> <a id="5899" href="Chapter.Imp.HoareLogicExample.html#5892" class="Bound">hyp</a>

<a id="+-1-succ"></a><a id="5904" href="Chapter.Imp.HoareLogicExample.html#5904" class="Function">+-1-succ</a> <a id="5913" class="Symbol">:</a> <a id="5915" class="Symbol">∀</a> <a id="5917" href="Chapter.Imp.HoareLogicExample.html#5917" class="Bound">n</a> <a id="5919" class="Symbol">-&gt;</a> <a id="5922" href="Chapter.Imp.HoareLogicExample.html#5917" class="Bound">n</a> <a id="5924" href="Library.Nat.html#145" class="Function Operator">+</a> <a id="5926" class="Number">1</a> <a id="5928" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="5931" href="Library.Nat.html#59" class="InductiveConstructor">succ</a> <a id="5936" href="Chapter.Imp.HoareLogicExample.html#5917" class="Bound">n</a>
<a id="5938" href="Chapter.Imp.HoareLogicExample.html#5904" class="Function">+-1-succ</a> <a id="5947" href="Library.Nat.html#48" class="InductiveConstructor">zero</a> <a id="5952" class="Symbol">=</a> <a id="5954" href="Library.Equality.html#125" class="InductiveConstructor">refl</a>
<a id="5959" href="Chapter.Imp.HoareLogicExample.html#5904" class="Function">+-1-succ</a> <a id="5968" class="Symbol">(</a><a id="5969" href="Library.Nat.html#59" class="InductiveConstructor">succ</a> <a id="5974" href="Chapter.Imp.HoareLogicExample.html#5974" class="Bound">n</a><a id="5975" class="Symbol">)</a> <a id="5977" class="Symbol">=</a> <a id="5979" href="Library.Equality.html#373" class="Function">cong</a> <a id="5984" href="Library.Nat.html#59" class="InductiveConstructor">succ</a> <a id="5989" class="Symbol">(</a><a id="5990" href="Chapter.Imp.HoareLogicExample.html#5904" class="Function">+-1-succ</a> <a id="5999" href="Chapter.Imp.HoareLogicExample.html#5974" class="Bound">n</a><a id="6000" class="Symbol">)</a>

<a id="lt-succ"></a><a id="6003" href="Chapter.Imp.HoareLogicExample.html#6003" class="Function">lt-succ</a> <a id="6011" class="Symbol">:</a> <a id="6013" class="Symbol">∀</a> <a id="6015" class="Symbol">{</a><a id="6016" href="Chapter.Imp.HoareLogicExample.html#6016" class="Bound">x</a> <a id="6018" href="Chapter.Imp.HoareLogicExample.html#6018" class="Bound">y</a> <a id="6020" class="Symbol">:</a> <a id="6022" href="Library.Nat.html#32" class="Datatype">ℕ</a><a id="6023" class="Symbol">}</a> <a id="6025" class="Symbol">-&gt;</a> <a id="6028" href="Chapter.Imp.HoareLogicExample.html#6016" class="Bound">x</a> <a id="6030" href="Library.LessThan.html#2054" class="Function Operator">&lt;</a> <a id="6032" href="Chapter.Imp.HoareLogicExample.html#6018" class="Bound">y</a> <a id="6034" class="Symbol">-&gt;</a> <a id="6037" href="Library.Nat.html#59" class="InductiveConstructor">succ</a> <a id="6042" href="Chapter.Imp.HoareLogicExample.html#6016" class="Bound">x</a> <a id="6044" href="Library.LessThan.html#2054" class="Function Operator">&lt;</a> <a id="6046" href="Library.Nat.html#59" class="InductiveConstructor">succ</a> <a id="6051" href="Chapter.Imp.HoareLogicExample.html#6018" class="Bound">y</a>
<a id="6053" href="Chapter.Imp.HoareLogicExample.html#6003" class="Function">lt-succ</a> <a id="6061" class="Symbol">{</a><a id="6062" href="Chapter.Imp.HoareLogicExample.html#6062" class="Bound">x</a><a id="6063" class="Symbol">}</a> <a id="6065" class="Symbol">{</a><a id="6066" href="Chapter.Imp.HoareLogicExample.html#6066" class="Bound">y</a><a id="6067" class="Symbol">}</a> <a id="6069" href="Chapter.Imp.HoareLogicExample.html#6069" class="Bound">hyp</a> <a id="6073" class="Symbol">=</a> <a id="6075" href="Library.LessThan.html#271" class="InductiveConstructor">le-succ</a> <a id="6083" href="Chapter.Imp.HoareLogicExample.html#6069" class="Bound">hyp</a>

<a id="lemma-&lt;-+-1-&gt;&lt;="></a><a id="6088" href="Chapter.Imp.HoareLogicExample.html#6088" class="Function">lemma-&lt;-+-1-&gt;&lt;=</a> <a id="6104" class="Symbol">:</a> <a id="6106" class="Symbol">∀</a> <a id="6108" class="Symbol">{</a><a id="6109" href="Chapter.Imp.HoareLogicExample.html#6109" class="Bound">n</a> <a id="6111" href="Chapter.Imp.HoareLogicExample.html#6111" class="Bound">m</a> <a id="6113" class="Symbol">:</a> <a id="6115" href="Library.Nat.html#32" class="Datatype">ℕ</a><a id="6116" class="Symbol">}</a> <a id="6118" class="Symbol">-&gt;</a> <a id="6121" href="Chapter.Imp.HoareLogicExample.html#6109" class="Bound">n</a> <a id="6123" href="Library.LessThan.html#2054" class="Function Operator">&lt;</a> <a id="6125" href="Chapter.Imp.HoareLogicExample.html#6111" class="Bound">m</a> <a id="6127" href="Library.Nat.html#145" class="Function Operator">+</a> <a id="6129" class="Number">1</a> <a id="6131" class="Symbol">-&gt;</a> <a id="6134" href="Chapter.Imp.HoareLogicExample.html#6109" class="Bound">n</a> <a id="6136" href="Library.LessThan.html#210" class="Datatype Operator">&lt;=</a> <a id="6139" href="Chapter.Imp.HoareLogicExample.html#6111" class="Bound">m</a>
<a id="6141" href="Chapter.Imp.HoareLogicExample.html#6088" class="Function">lemma-&lt;-+-1-&gt;&lt;=</a> <a id="6157" class="Symbol">{</a><a id="6158" href="Chapter.Imp.HoareLogicExample.html#6158" class="Bound">n</a><a id="6159" class="Symbol">}</a> <a id="6161" class="Symbol">{</a><a id="6162" href="Chapter.Imp.HoareLogicExample.html#6162" class="Bound">m</a><a id="6163" class="Symbol">}</a> <a id="6165" href="Chapter.Imp.HoareLogicExample.html#6165" class="Bound">hyp</a> <a id="6169" class="Symbol">=</a> <a id="6171" href="Chapter.Imp.HoareLogicExample.html#5794" class="Function">succ-le</a> <a id="6179" href="Chapter.Imp.HoareLogicExample.html#6237" class="Function">q</a>
  <a id="6183" class="Keyword">where</a>
    <a id="6193" href="Chapter.Imp.HoareLogicExample.html#6193" class="Function">p</a> <a id="6195" class="Symbol">:</a> <a id="6197" href="Chapter.Imp.HoareLogicExample.html#6162" class="Bound">m</a> <a id="6199" href="Library.Nat.html#145" class="Function Operator">+</a> <a id="6201" class="Number">1</a> <a id="6203" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="6206" href="Library.Nat.html#59" class="InductiveConstructor">succ</a> <a id="6211" href="Chapter.Imp.HoareLogicExample.html#6162" class="Bound">m</a>
    <a id="6217" href="Chapter.Imp.HoareLogicExample.html#6193" class="Function">p</a> <a id="6219" class="Symbol">=</a> <a id="6221" href="Chapter.Imp.HoareLogicExample.html#5904" class="Function">+-1-succ</a> <a id="6230" href="Chapter.Imp.HoareLogicExample.html#6162" class="Bound">m</a>

    <a id="6237" href="Chapter.Imp.HoareLogicExample.html#6237" class="Function">q</a> <a id="6239" class="Symbol">:</a> <a id="6241" href="Chapter.Imp.HoareLogicExample.html#6158" class="Bound">n</a> <a id="6243" href="Library.LessThan.html#2054" class="Function Operator">&lt;</a> <a id="6245" href="Library.Nat.html#59" class="InductiveConstructor">succ</a> <a id="6250" href="Chapter.Imp.HoareLogicExample.html#6162" class="Bound">m</a>  <a id="6253" class="Comment">-- i.e. succ n &lt;= succ m</a>
    <a id="6282" href="Chapter.Imp.HoareLogicExample.html#6237" class="Function">q</a> <a id="6284" class="Symbol">=</a> <a id="6286" href="Library.Equality.html#583" class="Function">subst</a> <a id="6292" class="Symbol">(λ</a> <a id="6295" href="Chapter.Imp.HoareLogicExample.html#6295" class="Bound">z</a> <a id="6297" class="Symbol">-&gt;</a> <a id="6300" href="Chapter.Imp.HoareLogicExample.html#6158" class="Bound">n</a> <a id="6302" href="Library.LessThan.html#2054" class="Function Operator">&lt;</a> <a id="6304" href="Chapter.Imp.HoareLogicExample.html#6295" class="Bound">z</a><a id="6305" class="Symbol">)</a> <a id="6307" href="Chapter.Imp.HoareLogicExample.html#6193" class="Function">p</a> <a id="6309" href="Chapter.Imp.HoareLogicExample.html#6165" class="Bound">hyp</a>
</pre>
<p>Also, we have to establish that the predicate <code class="language-plaintext highlighter-rouge">n &lt; m</code> is equivalent to
<code class="language-plaintext highlighter-rouge">n &lt;ℕ m  == true</code>:</p>
<pre class="Agda"><a id="lemma-&lt;ℕ-&lt;"></a><a id="6411" href="Chapter.Imp.HoareLogicExample.html#6411" class="Function">lemma-&lt;ℕ-&lt;</a> <a id="6422" class="Symbol">:</a> <a id="6424" class="Symbol">∀</a> <a id="6426" class="Symbol">{</a><a id="6427" href="Chapter.Imp.HoareLogicExample.html#6427" class="Bound">n</a> <a id="6429" href="Chapter.Imp.HoareLogicExample.html#6429" class="Bound">m</a> <a id="6431" class="Symbol">:</a> <a id="6433" href="Library.Nat.html#32" class="Datatype">ℕ</a><a id="6434" class="Symbol">}</a> <a id="6436" class="Symbol">-&gt;</a> <a id="6439" href="Chapter.Imp.HoareLogicExample.html#6427" class="Bound">n</a> <a id="6441" href="Chapter.Imp.AexpBexp.html#10049" class="Function Operator">&lt;ℕ</a> <a id="6444" href="Chapter.Imp.HoareLogicExample.html#6429" class="Bound">m</a> <a id="6446" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="6449" href="Library.Bool.html#52" class="InductiveConstructor">true</a> <a id="6454" class="Symbol">-&gt;</a> <a id="6457" href="Chapter.Imp.HoareLogicExample.html#6427" class="Bound">n</a> <a id="6459" href="Library.LessThan.html#2054" class="Function Operator">&lt;</a> <a id="6461" href="Chapter.Imp.HoareLogicExample.html#6429" class="Bound">m</a>
<a id="6463" href="Chapter.Imp.HoareLogicExample.html#6411" class="Function">lemma-&lt;ℕ-&lt;</a> <a id="6474" class="Symbol">{</a><a id="6475" href="Library.Nat.html#48" class="InductiveConstructor">zero</a><a id="6479" class="Symbol">}</a> <a id="6481" class="Symbol">{</a><a id="6482" href="Library.Nat.html#59" class="InductiveConstructor">succ</a> <a id="6487" href="Chapter.Imp.HoareLogicExample.html#6487" class="Bound">m</a><a id="6488" class="Symbol">}</a> <a id="6490" class="Symbol">_</a> <a id="6492" class="Symbol">=</a> <a id="6494" href="Library.LessThan.html#271" class="InductiveConstructor">le-succ</a> <a id="6502" class="Symbol">{</a><a id="6503" class="Number">0</a><a id="6504" class="Symbol">}</a> <a id="6506" class="Symbol">{</a><a id="6507" href="Chapter.Imp.HoareLogicExample.html#6487" class="Bound">m</a><a id="6508" class="Symbol">}</a> <a id="6510" class="Symbol">(</a><a id="6511" href="Library.LessThan.html#239" class="InductiveConstructor">le-zero</a> <a id="6519" class="Symbol">{</a><a id="6520" href="Chapter.Imp.HoareLogicExample.html#6487" class="Bound">m</a><a id="6521" class="Symbol">})</a>
<a id="6524" href="Chapter.Imp.HoareLogicExample.html#6411" class="Function">lemma-&lt;ℕ-&lt;</a> <a id="6535" class="Symbol">{</a><a id="6536" href="Library.Nat.html#59" class="InductiveConstructor">succ</a> <a id="6541" href="Chapter.Imp.HoareLogicExample.html#6541" class="Bound">n</a><a id="6542" class="Symbol">}</a> <a id="6544" class="Symbol">{</a><a id="6545" href="Library.Nat.html#59" class="InductiveConstructor">succ</a> <a id="6550" href="Chapter.Imp.HoareLogicExample.html#6550" class="Bound">m</a><a id="6551" class="Symbol">}</a> <a id="6553" href="Chapter.Imp.HoareLogicExample.html#6553" class="Bound">hyp</a> <a id="6557" class="Symbol">=</a> <a id="6559" href="Library.LessThan.html#271" class="InductiveConstructor">le-succ</a> <a id="6567" class="Symbol">{</a><a id="6568" href="Library.Nat.html#59" class="InductiveConstructor">succ</a> <a id="6573" href="Chapter.Imp.HoareLogicExample.html#6541" class="Bound">n</a><a id="6574" class="Symbol">}</a> <a id="6576" class="Symbol">{</a><a id="6577" href="Chapter.Imp.HoareLogicExample.html#6550" class="Bound">m</a><a id="6578" class="Symbol">}</a> <a id="6580" href="Chapter.Imp.HoareLogicExample.html#6595" class="Function">IH</a>
  <a id="6585" class="Keyword">where</a>
    <a id="6595" href="Chapter.Imp.HoareLogicExample.html#6595" class="Function">IH</a> <a id="6598" class="Symbol">:</a> <a id="6600" href="Chapter.Imp.HoareLogicExample.html#6541" class="Bound">n</a> <a id="6602" href="Library.LessThan.html#2054" class="Function Operator">&lt;</a> <a id="6604" href="Chapter.Imp.HoareLogicExample.html#6550" class="Bound">m</a>  <a id="6607" class="Comment">-- i.e. succ n &lt;= m</a>
    <a id="6631" href="Chapter.Imp.HoareLogicExample.html#6595" class="Function">IH</a> <a id="6634" class="Symbol">=</a> <a id="6636" href="Chapter.Imp.HoareLogicExample.html#6411" class="Function">lemma-&lt;ℕ-&lt;</a> <a id="6647" class="Symbol">{</a><a id="6648" href="Chapter.Imp.HoareLogicExample.html#6541" class="Bound">n</a><a id="6649" class="Symbol">}</a> <a id="6651" class="Symbol">{</a><a id="6652" href="Chapter.Imp.HoareLogicExample.html#6550" class="Bound">m</a><a id="6653" class="Symbol">}</a> <a id="6655" href="Chapter.Imp.HoareLogicExample.html#6553" class="Bound">hyp</a>

<a id="lemma-&lt;-&lt;ℕ"></a><a id="6660" href="Chapter.Imp.HoareLogicExample.html#6660" class="Function">lemma-&lt;-&lt;ℕ</a> <a id="6671" class="Symbol">:</a> <a id="6673" class="Symbol">∀</a> <a id="6675" class="Symbol">{</a><a id="6676" href="Chapter.Imp.HoareLogicExample.html#6676" class="Bound">n</a> <a id="6678" href="Chapter.Imp.HoareLogicExample.html#6678" class="Bound">m</a> <a id="6680" class="Symbol">:</a> <a id="6682" href="Library.Nat.html#32" class="Datatype">ℕ</a><a id="6683" class="Symbol">}</a> <a id="6685" class="Symbol">-&gt;</a> <a id="6688" href="Chapter.Imp.HoareLogicExample.html#6676" class="Bound">n</a> <a id="6690" href="Library.LessThan.html#2054" class="Function Operator">&lt;</a> <a id="6692" href="Chapter.Imp.HoareLogicExample.html#6678" class="Bound">m</a> <a id="6694" class="Symbol">-&gt;</a> <a id="6697" href="Chapter.Imp.HoareLogicExample.html#6676" class="Bound">n</a> <a id="6699" href="Chapter.Imp.AexpBexp.html#10049" class="Function Operator">&lt;ℕ</a> <a id="6702" href="Chapter.Imp.HoareLogicExample.html#6678" class="Bound">m</a> <a id="6704" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="6707" href="Library.Bool.html#52" class="InductiveConstructor">true</a>
<a id="6712" href="Chapter.Imp.HoareLogicExample.html#6660" class="Function">lemma-&lt;-&lt;ℕ</a> <a id="6723" class="Symbol">{</a><a id="6724" href="Library.Nat.html#48" class="InductiveConstructor">zero</a><a id="6728" class="Symbol">}</a> <a id="6730" class="Symbol">{</a><a id="6731" href="Library.Nat.html#59" class="InductiveConstructor">succ</a> <a id="6736" href="Chapter.Imp.HoareLogicExample.html#6736" class="Bound">m</a><a id="6737" class="Symbol">}</a> <a id="6739" href="Chapter.Imp.HoareLogicExample.html#6739" class="Bound">hyp</a> <a id="6743" class="Symbol">=</a> <a id="6745" href="Library.Equality.html#125" class="InductiveConstructor">refl</a>
<a id="6750" href="Chapter.Imp.HoareLogicExample.html#6660" class="Function">lemma-&lt;-&lt;ℕ</a> <a id="6761" class="Symbol">{</a><a id="6762" href="Library.Nat.html#59" class="InductiveConstructor">succ</a> <a id="6767" href="Chapter.Imp.HoareLogicExample.html#6767" class="Bound">n</a><a id="6768" class="Symbol">}</a> <a id="6770" class="Symbol">{</a><a id="6771" href="Library.Nat.html#59" class="InductiveConstructor">succ</a> <a id="6776" href="Chapter.Imp.HoareLogicExample.html#6776" class="Bound">m</a><a id="6777" class="Symbol">}</a> <a id="6779" href="Chapter.Imp.HoareLogicExample.html#6779" class="Bound">hyp</a> <a id="6783" class="Symbol">=</a>
           <a id="6796" href="Chapter.Imp.HoareLogicExample.html#6660" class="Function">lemma-&lt;-&lt;ℕ</a> <a id="6807" class="Symbol">{</a><a id="6808" href="Chapter.Imp.HoareLogicExample.html#6767" class="Bound">n</a><a id="6809" class="Symbol">}</a> <a id="6811" class="Symbol">{</a><a id="6812" href="Chapter.Imp.HoareLogicExample.html#6776" class="Bound">m</a><a id="6813" class="Symbol">}</a> <a id="6815" class="Symbol">(</a><a id="6816" href="Chapter.Imp.HoareLogicExample.html#5794" class="Function">succ-le</a> <a id="6824" class="Symbol">{</a><a id="6825" href="Library.Nat.html#59" class="InductiveConstructor">succ</a> <a id="6830" href="Chapter.Imp.HoareLogicExample.html#6767" class="Bound">n</a><a id="6831" class="Symbol">}</a> <a id="6833" class="Symbol">{</a><a id="6834" href="Chapter.Imp.HoareLogicExample.html#6776" class="Bound">m</a><a id="6835" class="Symbol">}</a> <a id="6837" href="Chapter.Imp.HoareLogicExample.html#6779" class="Bound">hyp</a><a id="6840" class="Symbol">)</a>
</pre>
<p>Now, we are in place to prove the required implications:</p>
<pre class="Agda"><a id="Z=X+I-&gt;Z+1=X+I+1"></a><a id="6907" href="Chapter.Imp.HoareLogicExample.html#6907" class="Function">Z=X+I-&gt;Z+1=X+I+1</a> <a id="6924" class="Symbol">:</a> <a id="6926" class="Symbol">∀</a> <a id="6928" href="Chapter.Imp.HoareLogicExample.html#6928" class="Bound">s</a> <a id="6930" class="Symbol">-&gt;</a> <a id="6933" href="Chapter.Imp.HoareLogicExample.html#4215" class="Function">Z=X+I</a> <a id="6939" href="Chapter.Imp.HoareLogicExample.html#6928" class="Bound">s</a> <a id="6941" class="Symbol">-&gt;</a> <a id="6944" href="Chapter.Imp.HoareLogicExample.html#4679" class="Function">Z+1=X+I+1</a> <a id="6954" href="Chapter.Imp.HoareLogicExample.html#6928" class="Bound">s</a>
<a id="6956" href="Chapter.Imp.HoareLogicExample.html#6907" class="Function">Z=X+I-&gt;Z+1=X+I+1</a> <a id="6973" href="Chapter.Imp.HoareLogicExample.html#6973" class="Bound">s</a> <a id="6975" href="Chapter.Imp.HoareLogicExample.html#6975" class="Bound">hyp</a> <a id="6979" class="Symbol">=</a> 
    <a id="6986" href="Library.Equality.Reasoning.html#142" class="Function Operator">begin</a>
      <a id="6998" class="Symbol">(</a><a id="6999" href="Chapter.Imp.AexpBexp.html#3910" class="Function">aval</a> <a id="7004" class="Symbol">(</a><a id="7005" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="7007" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a><a id="7008" class="Symbol">)</a> <a id="7010" href="Chapter.Imp.HoareLogicExample.html#6973" class="Bound">s</a><a id="7011" class="Symbol">)</a> <a id="7013" href="Library.Nat.html#145" class="Function Operator">+</a> <a id="7015" class="Number">1</a>           <a id="7027" href="Library.Equality.Reasoning.html#255" class="Function Operator">==⟨</a> <a id="7031" href="Library.Equality.html#373" class="Function">cong</a> <a id="7036" class="Symbol">(λ</a> <a id="7039" href="Chapter.Imp.HoareLogicExample.html#7039" class="Bound">z</a> <a id="7041" class="Symbol">-&gt;</a> <a id="7044" href="Chapter.Imp.HoareLogicExample.html#7039" class="Bound">z</a> <a id="7046" href="Library.Nat.html#145" class="Function Operator">+</a> <a id="7048" class="Number">1</a><a id="7049" class="Symbol">)</a> <a id="7051" href="Chapter.Imp.HoareLogicExample.html#6975" class="Bound">hyp</a> <a id="7055" href="Library.Equality.Reasoning.html#255" class="Function Operator">⟩</a>       
      <a id="7070" class="Symbol">(</a><a id="7071" href="Chapter.Imp.HoareLogicExample.html#6973" class="Bound">s</a> <a id="7073" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a> <a id="7075" href="Library.Nat.html#145" class="Function Operator">+</a> <a id="7077" href="Chapter.Imp.HoareLogicExample.html#6973" class="Bound">s</a> <a id="7079" href="Chapter.Imp.HoareLogicExample.html#1855" class="Function">I</a><a id="7080" class="Symbol">)</a> <a id="7082" href="Library.Nat.html#145" class="Function Operator">+</a> <a id="7084" class="Number">1</a>              <a id="7099" href="Library.Equality.Reasoning.html#255" class="Function Operator">==⟨</a> <a id="7103" href="Library.Equality.html#226" class="Function">symm</a> <a id="7108" class="Symbol">(</a><a id="7109" href="Library.Nat.Properties.html#243" class="Function">+-assoc</a> <a id="7117" class="Symbol">(</a><a id="7118" href="Chapter.Imp.HoareLogicExample.html#6973" class="Bound">s</a> <a id="7120" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a><a id="7121" class="Symbol">)</a> <a id="7123" class="Symbol">(</a><a id="7124" href="Chapter.Imp.HoareLogicExample.html#6973" class="Bound">s</a> <a id="7126" href="Chapter.Imp.HoareLogicExample.html#1855" class="Function">I</a><a id="7127" class="Symbol">)</a> <a id="7129" class="Number">1</a><a id="7130" class="Symbol">)</a> <a id="7132" href="Library.Equality.Reasoning.html#255" class="Function Operator">⟩</a>
       <a id="7141" href="Chapter.Imp.HoareLogicExample.html#6973" class="Bound">s</a> <a id="7143" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a> <a id="7145" href="Library.Nat.html#145" class="Function Operator">+</a> <a id="7147" class="Symbol">(</a><a id="7148" href="Chapter.Imp.HoareLogicExample.html#6973" class="Bound">s</a> <a id="7150" href="Chapter.Imp.HoareLogicExample.html#1855" class="Function">I</a> <a id="7152" href="Library.Nat.html#145" class="Function Operator">+</a> <a id="7154" class="Number">1</a><a id="7155" class="Symbol">)</a>
    <a id="7161" href="Library.Equality.Reasoning.html#205" class="Function Operator">end</a>
    
<a id="I&lt;Y-&gt;I+1&lt;Y+1"></a><a id="7170" href="Chapter.Imp.HoareLogicExample.html#7170" class="Function">I&lt;Y-&gt;I+1&lt;Y+1</a> <a id="7183" class="Symbol">:</a> <a id="7185" class="Symbol">∀</a> <a id="7187" href="Chapter.Imp.HoareLogicExample.html#7187" class="Bound">s</a> <a id="7189" class="Symbol">-&gt;</a> <a id="7192" href="Chapter.Imp.HoareLogicExample.html#4581" class="Function">I&lt;Y</a> <a id="7196" href="Chapter.Imp.HoareLogicExample.html#7187" class="Bound">s</a> <a id="7198" class="Symbol">-&gt;</a> <a id="7201" href="Chapter.Imp.HoareLogicExample.html#4822" class="Function">I+1&lt;Y+1</a> <a id="7209" href="Chapter.Imp.HoareLogicExample.html#7187" class="Bound">s</a>
<a id="7211" href="Chapter.Imp.HoareLogicExample.html#7170" class="Function">I&lt;Y-&gt;I+1&lt;Y+1</a> <a id="7224" href="Chapter.Imp.HoareLogicExample.html#7224" class="Bound">s</a> <a id="7226" href="Chapter.Imp.HoareLogicExample.html#7226" class="Bound">hyp</a> <a id="7230" class="Symbol">=</a> <a id="7232" href="Chapter.Imp.HoareLogicExample.html#6660" class="Function">lemma-&lt;-&lt;ℕ</a> <a id="7243" class="Symbol">{</a><a id="7244" href="Chapter.Imp.HoareLogicExample.html#7274" class="Function">n</a> <a id="7246" href="Library.Nat.html#145" class="Function Operator">+</a> <a id="7248" class="Number">1</a><a id="7249" class="Symbol">}</a> <a id="7251" class="Symbol">{</a><a id="7252" href="Chapter.Imp.HoareLogicExample.html#7295" class="Function">m</a> <a id="7254" href="Library.Nat.html#145" class="Function Operator">+</a> <a id="7256" class="Number">1</a><a id="7257" class="Symbol">}</a> <a id="7259" href="Chapter.Imp.HoareLogicExample.html#7564" class="Function">c&#39;</a>
  <a id="7264" class="Keyword">where</a>
    <a id="7274" href="Chapter.Imp.HoareLogicExample.html#7274" class="Function">n</a> <a id="7276" class="Symbol">=</a> <a id="7278" href="Chapter.Imp.AexpBexp.html#3910" class="Function">aval</a> <a id="7283" class="Symbol">(</a><a id="7284" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="7286" href="Chapter.Imp.HoareLogicExample.html#1855" class="Function">I</a><a id="7287" class="Symbol">)</a> <a id="7289" href="Chapter.Imp.HoareLogicExample.html#7224" class="Bound">s</a>
    <a id="7295" href="Chapter.Imp.HoareLogicExample.html#7295" class="Function">m</a> <a id="7297" class="Symbol">=</a> <a id="7299" href="Chapter.Imp.AexpBexp.html#3910" class="Function">aval</a> <a id="7304" class="Symbol">(</a><a id="7305" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="7307" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a><a id="7308" class="Symbol">)</a> <a id="7310" href="Chapter.Imp.HoareLogicExample.html#7224" class="Bound">s</a>
    
    <a id="7321" href="Chapter.Imp.HoareLogicExample.html#7321" class="Function">a&#39;</a> <a id="7324" class="Symbol">:</a> <a id="7326" href="Library.Nat.html#59" class="InductiveConstructor">succ</a> <a id="7331" href="Chapter.Imp.HoareLogicExample.html#7274" class="Function">n</a> <a id="7333" href="Library.LessThan.html#2054" class="Function Operator">&lt;</a> <a id="7335" href="Library.Nat.html#59" class="InductiveConstructor">succ</a> <a id="7340" href="Chapter.Imp.HoareLogicExample.html#7295" class="Function">m</a>
    <a id="7346" href="Chapter.Imp.HoareLogicExample.html#7321" class="Function">a&#39;</a> <a id="7349" class="Symbol">=</a> <a id="7351" href="Chapter.Imp.HoareLogicExample.html#6003" class="Function">lt-succ</a> <a id="7359" class="Symbol">{</a><a id="7360" href="Chapter.Imp.HoareLogicExample.html#7274" class="Function">n</a><a id="7361" class="Symbol">}</a> <a id="7363" class="Symbol">{</a><a id="7364" href="Chapter.Imp.HoareLogicExample.html#7295" class="Function">m</a><a id="7365" class="Symbol">}</a> <a id="7367" class="Symbol">(</a><a id="7368" href="Chapter.Imp.HoareLogicExample.html#6411" class="Function">lemma-&lt;ℕ-&lt;</a> <a id="7379" href="Chapter.Imp.HoareLogicExample.html#7226" class="Bound">hyp</a><a id="7382" class="Symbol">)</a>

    <a id="7389" href="Chapter.Imp.HoareLogicExample.html#7389" class="Function">a&#39;&#39;</a> <a id="7393" class="Symbol">:</a> <a id="7395" href="Library.Nat.html#59" class="InductiveConstructor">succ</a> <a id="7400" href="Chapter.Imp.HoareLogicExample.html#7274" class="Function">n</a> <a id="7402" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="7405" href="Chapter.Imp.HoareLogicExample.html#7274" class="Function">n</a> <a id="7407" href="Library.Nat.html#145" class="Function Operator">+</a> <a id="7409" class="Number">1</a>
    <a id="7415" href="Chapter.Imp.HoareLogicExample.html#7389" class="Function">a&#39;&#39;</a> <a id="7419" class="Symbol">=</a> <a id="7421" href="Library.Equality.html#226" class="Function">symm</a> <a id="7426" class="Symbol">(</a><a id="7427" href="Chapter.Imp.HoareLogicExample.html#5904" class="Function">+-1-succ</a> <a id="7436" href="Chapter.Imp.HoareLogicExample.html#7274" class="Function">n</a><a id="7437" class="Symbol">)</a>

    <a id="7444" href="Chapter.Imp.HoareLogicExample.html#7444" class="Function">b&#39;</a> <a id="7447" class="Symbol">:</a> <a id="7449" href="Chapter.Imp.HoareLogicExample.html#7274" class="Function">n</a> <a id="7451" href="Library.Nat.html#145" class="Function Operator">+</a> <a id="7453" class="Number">1</a> <a id="7455" href="Library.LessThan.html#2054" class="Function Operator">&lt;</a> <a id="7457" href="Library.Nat.html#59" class="InductiveConstructor">succ</a> <a id="7462" href="Chapter.Imp.HoareLogicExample.html#7295" class="Function">m</a>
    <a id="7468" href="Chapter.Imp.HoareLogicExample.html#7444" class="Function">b&#39;</a> <a id="7471" class="Symbol">=</a> <a id="7473" href="Library.Equality.html#583" class="Function">subst</a> <a id="7479" class="Symbol">(λ</a> <a id="7482" href="Chapter.Imp.HoareLogicExample.html#7482" class="Bound">z</a> <a id="7484" class="Symbol">-&gt;</a> <a id="7487" href="Chapter.Imp.HoareLogicExample.html#7482" class="Bound">z</a> <a id="7489" href="Library.LessThan.html#2054" class="Function Operator">&lt;</a> <a id="7491" href="Library.Nat.html#59" class="InductiveConstructor">succ</a> <a id="7496" href="Chapter.Imp.HoareLogicExample.html#7295" class="Function">m</a><a id="7497" class="Symbol">)</a> <a id="7499" href="Chapter.Imp.HoareLogicExample.html#7389" class="Function">a&#39;&#39;</a> <a id="7503" href="Chapter.Imp.HoareLogicExample.html#7321" class="Function">a&#39;</a>

    <a id="7511" href="Chapter.Imp.HoareLogicExample.html#7511" class="Function">d&#39;</a> <a id="7514" class="Symbol">:</a> <a id="7516" href="Library.Nat.html#59" class="InductiveConstructor">succ</a> <a id="7521" href="Chapter.Imp.HoareLogicExample.html#7295" class="Function">m</a> <a id="7523" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="7526" href="Chapter.Imp.HoareLogicExample.html#7295" class="Function">m</a> <a id="7528" href="Library.Nat.html#145" class="Function Operator">+</a> <a id="7530" class="Number">1</a>
    <a id="7536" href="Chapter.Imp.HoareLogicExample.html#7511" class="Function">d&#39;</a> <a id="7539" class="Symbol">=</a> <a id="7541" href="Library.Equality.html#226" class="Function">symm</a> <a id="7546" class="Symbol">(</a><a id="7547" href="Chapter.Imp.HoareLogicExample.html#5904" class="Function">+-1-succ</a> <a id="7556" href="Chapter.Imp.HoareLogicExample.html#7295" class="Function">m</a><a id="7557" class="Symbol">)</a>

    <a id="7564" href="Chapter.Imp.HoareLogicExample.html#7564" class="Function">c&#39;</a> <a id="7567" class="Symbol">:</a> <a id="7569" href="Chapter.Imp.HoareLogicExample.html#7274" class="Function">n</a> <a id="7571" href="Library.Nat.html#145" class="Function Operator">+</a> <a id="7573" class="Number">1</a> <a id="7575" href="Library.LessThan.html#2054" class="Function Operator">&lt;</a> <a id="7577" href="Chapter.Imp.HoareLogicExample.html#7295" class="Function">m</a> <a id="7579" href="Library.Nat.html#145" class="Function Operator">+</a> <a id="7581" class="Number">1</a>
    <a id="7587" href="Chapter.Imp.HoareLogicExample.html#7564" class="Function">c&#39;</a> <a id="7590" class="Symbol">=</a> <a id="7592" href="Library.Equality.html#583" class="Function">subst</a> <a id="7598" class="Symbol">(λ</a> <a id="7601" href="Chapter.Imp.HoareLogicExample.html#7601" class="Bound">z</a> <a id="7603" class="Symbol">-&gt;</a> <a id="7606" href="Chapter.Imp.HoareLogicExample.html#7274" class="Function">n</a> <a id="7608" href="Library.Nat.html#145" class="Function Operator">+</a> <a id="7610" class="Number">1</a> <a id="7612" href="Library.LessThan.html#2054" class="Function Operator">&lt;</a> <a id="7614" href="Chapter.Imp.HoareLogicExample.html#7601" class="Bound">z</a><a id="7615" class="Symbol">)</a> <a id="7617" href="Chapter.Imp.HoareLogicExample.html#7511" class="Function">d&#39;</a> <a id="7620" href="Chapter.Imp.HoareLogicExample.html#7444" class="Function">b&#39;</a>

<a id="Z=X+I∧I&lt;=Y∧I&lt;Y-&gt;Z+1=X+I+1∧I+1&lt;Y+1"></a><a id="7624" href="Chapter.Imp.HoareLogicExample.html#7624" class="Function">Z=X+I∧I&lt;=Y∧I&lt;Y-&gt;Z+1=X+I+1∧I+1&lt;Y+1</a> <a id="7658" class="Symbol">:</a>
       <a id="7667" class="Symbol">∀</a> <a id="7669" href="Chapter.Imp.HoareLogicExample.html#7669" class="Bound">s</a> <a id="7671" class="Symbol">-&gt;</a> <a id="7674" class="Symbol">((</a><a id="7676" href="Chapter.Imp.HoareLogicExample.html#4215" class="Function">Z=X+I</a> <a id="7682" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="7685" href="Chapter.Imp.HoareLogicExample.html#4261" class="Function">I&lt;=Y</a><a id="7689" class="Symbol">)</a> <a id="7691" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="7694" href="Chapter.Imp.HoareLogicExample.html#4581" class="Function">I&lt;Y</a><a id="7697" class="Symbol">)</a> <a id="7699" href="Chapter.Imp.HoareLogicExample.html#7669" class="Bound">s</a> <a id="7701" class="Symbol">-&gt;</a> <a id="7704" class="Symbol">(</a><a id="7705" href="Chapter.Imp.HoareLogicExample.html#4679" class="Function">Z+1=X+I+1</a> <a id="7715" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="7718" href="Chapter.Imp.HoareLogicExample.html#4822" class="Function">I+1&lt;Y+1</a><a id="7725" class="Symbol">)</a> <a id="7727" href="Chapter.Imp.HoareLogicExample.html#7669" class="Bound">s</a>
       
<a id="7737" href="Chapter.Imp.HoareLogicExample.html#7624" class="Function">Z=X+I∧I&lt;=Y∧I&lt;Y-&gt;Z+1=X+I+1∧I+1&lt;Y+1</a> <a id="7771" href="Chapter.Imp.HoareLogicExample.html#7771" class="Bound">s</a> <a id="7773" class="Symbol">((</a><a id="7775" href="Chapter.Imp.HoareLogicExample.html#7775" class="Bound">x</a> <a id="7777" href="Library.Logic.html#271" class="InductiveConstructor Operator">,</a> <a id="7779" href="Chapter.Imp.HoareLogicExample.html#7779" class="Bound">y</a><a id="7780" class="Symbol">)</a> <a id="7782" href="Library.Logic.html#271" class="InductiveConstructor Operator">,</a> <a id="7784" href="Chapter.Imp.HoareLogicExample.html#7784" class="Bound">z</a><a id="7785" class="Symbol">)</a> <a id="7787" class="Symbol">=</a> <a id="7789" href="Chapter.Imp.HoareLogicExample.html#7809" class="Function">a&#39;</a> <a id="7792" href="Library.Logic.html#271" class="InductiveConstructor Operator">,</a> <a id="7794" href="Chapter.Imp.HoareLogicExample.html#7862" class="Function">b&#39;</a>
  <a id="7799" class="Keyword">where</a>
    <a id="7809" href="Chapter.Imp.HoareLogicExample.html#7809" class="Function">a&#39;</a> <a id="7812" class="Symbol">:</a> <a id="7814" href="Chapter.Imp.HoareLogicExample.html#4679" class="Function">Z+1=X+I+1</a> <a id="7824" href="Chapter.Imp.HoareLogicExample.html#7771" class="Bound">s</a> 
    <a id="7831" href="Chapter.Imp.HoareLogicExample.html#7809" class="Function">a&#39;</a> <a id="7834" class="Symbol">=</a> <a id="7836" href="Chapter.Imp.HoareLogicExample.html#6907" class="Function">Z=X+I-&gt;Z+1=X+I+1</a> <a id="7853" href="Chapter.Imp.HoareLogicExample.html#7771" class="Bound">s</a> <a id="7855" href="Chapter.Imp.HoareLogicExample.html#7775" class="Bound">x</a>

    <a id="7862" href="Chapter.Imp.HoareLogicExample.html#7862" class="Function">b&#39;</a> <a id="7865" class="Symbol">:</a> <a id="7867" href="Chapter.Imp.HoareLogicExample.html#4822" class="Function">I+1&lt;Y+1</a> <a id="7875" href="Chapter.Imp.HoareLogicExample.html#7771" class="Bound">s</a> 
    <a id="7882" href="Chapter.Imp.HoareLogicExample.html#7862" class="Function">b&#39;</a> <a id="7885" class="Symbol">=</a> <a id="7887" href="Chapter.Imp.HoareLogicExample.html#7170" class="Function">I&lt;Y-&gt;I+1&lt;Y+1</a> <a id="7900" href="Chapter.Imp.HoareLogicExample.html#7771" class="Bound">s</a> <a id="7902" href="Chapter.Imp.HoareLogicExample.html#7784" class="Bound">z</a>

<a id="Z=X+I∧I&lt;Y+1-&gt;Z=X+I∧I&lt;=Y"></a><a id="7905" href="Chapter.Imp.HoareLogicExample.html#7905" class="Function">Z=X+I∧I&lt;Y+1-&gt;Z=X+I∧I&lt;=Y</a> <a id="7929" class="Symbol">:</a> <a id="7931" class="Symbol">∀</a> <a id="7933" href="Chapter.Imp.HoareLogicExample.html#7933" class="Bound">s</a> <a id="7935" class="Symbol">-&gt;</a> <a id="7938" class="Symbol">(</a><a id="7939" href="Chapter.Imp.HoareLogicExample.html#4215" class="Function">Z=X+I</a> <a id="7945" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="7948" href="Chapter.Imp.HoareLogicExample.html#4889" class="Function">I&lt;Y+1</a><a id="7953" class="Symbol">)</a> <a id="7955" href="Chapter.Imp.HoareLogicExample.html#7933" class="Bound">s</a> <a id="7957" class="Symbol">-&gt;</a> <a id="7960" class="Symbol">(</a><a id="7961" href="Chapter.Imp.HoareLogicExample.html#4215" class="Function">Z=X+I</a> <a id="7967" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="7970" href="Chapter.Imp.HoareLogicExample.html#4261" class="Function">I&lt;=Y</a><a id="7974" class="Symbol">)</a> <a id="7976" href="Chapter.Imp.HoareLogicExample.html#7933" class="Bound">s</a>
<a id="7978" href="Chapter.Imp.HoareLogicExample.html#7905" class="Function">Z=X+I∧I&lt;Y+1-&gt;Z=X+I∧I&lt;=Y</a> <a id="8002" href="Chapter.Imp.HoareLogicExample.html#8002" class="Bound">s</a> <a id="8004" class="Symbol">(</a><a id="8005" href="Chapter.Imp.HoareLogicExample.html#8005" class="Bound">x</a> <a id="8007" href="Library.Logic.html#271" class="InductiveConstructor Operator">,</a> <a id="8009" href="Chapter.Imp.HoareLogicExample.html#8009" class="Bound">y</a><a id="8010" class="Symbol">)</a> <a id="8012" class="Symbol">=</a> <a id="8014" href="Chapter.Imp.HoareLogicExample.html#8005" class="Bound">x</a> <a id="8016" href="Library.Logic.html#271" class="InductiveConstructor Operator">,</a> <a id="8018" href="Chapter.Imp.HoareLogicExample.html#8079" class="Function">h2</a>
  <a id="8023" class="Keyword">where</a>
    <a id="8033" href="Chapter.Imp.HoareLogicExample.html#8033" class="Function">h1</a> <a id="8036" class="Symbol">:</a> <a id="8038" href="Chapter.Imp.HoareLogicExample.html#8002" class="Bound">s</a> <a id="8040" href="Chapter.Imp.HoareLogicExample.html#1855" class="Function">I</a> <a id="8042" href="Library.LessThan.html#2054" class="Function Operator">&lt;</a> <a id="8044" href="Chapter.Imp.HoareLogicExample.html#8002" class="Bound">s</a> <a id="8046" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a> <a id="8048" href="Library.Nat.html#145" class="Function Operator">+</a> <a id="8050" class="Number">1</a>
    <a id="8056" href="Chapter.Imp.HoareLogicExample.html#8033" class="Function">h1</a> <a id="8059" class="Symbol">=</a> <a id="8061" href="Chapter.Imp.HoareLogicExample.html#6411" class="Function">lemma-&lt;ℕ-&lt;</a> <a id="8072" href="Chapter.Imp.HoareLogicExample.html#8009" class="Bound">y</a>

    <a id="8079" href="Chapter.Imp.HoareLogicExample.html#8079" class="Function">h2</a> <a id="8082" class="Symbol">:</a> <a id="8084" href="Chapter.Imp.HoareLogicExample.html#8002" class="Bound">s</a> <a id="8086" href="Chapter.Imp.HoareLogicExample.html#1855" class="Function">I</a> <a id="8088" href="Library.LessThan.html#210" class="Datatype Operator">&lt;=</a> <a id="8091" href="Chapter.Imp.HoareLogicExample.html#8002" class="Bound">s</a> <a id="8093" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a>
    <a id="8099" href="Chapter.Imp.HoareLogicExample.html#8079" class="Function">h2</a> <a id="8102" class="Symbol">=</a> <a id="8104" href="Chapter.Imp.HoareLogicExample.html#6088" class="Function">lemma-&lt;-+-1-&gt;&lt;=</a> <a id="8120" href="Chapter.Imp.HoareLogicExample.html#8033" class="Function">h1</a>
</pre>
<p>Putting all together, we obtain:</p>
<pre class="Agda"><a id="pr2-7"></a><a id="8165" href="Chapter.Imp.HoareLogicExample.html#8165" class="Function">pr2-7</a> <a id="8171" class="Symbol">:</a> <a id="8173" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="8176" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="8178" class="Symbol">(</a><a id="8179" href="Chapter.Imp.HoareLogicExample.html#4215" class="Function">Z=X+I</a> <a id="8185" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="8188" href="Chapter.Imp.HoareLogicExample.html#4261" class="Function">I&lt;=Y</a><a id="8192" class="Symbol">)</a> <a id="8194" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="8197" href="Chapter.Imp.HoareLogicExample.html#4581" class="Function">I&lt;Y</a> <a id="8201" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
            <a id="8215" href="Chapter.Imp.HoareLogicExample.html#2017" class="Function">sum-prog-body</a>
           <a id="8240" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="8242" class="Symbol">(</a><a id="8243" href="Chapter.Imp.HoareLogicExample.html#4215" class="Function">Z=X+I</a> <a id="8249" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="8252" href="Chapter.Imp.HoareLogicExample.html#4261" class="Function">I&lt;=Y</a><a id="8256" class="Symbol">)</a> <a id="8258" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
           
<a id="8272" href="Chapter.Imp.HoareLogicExample.html#8165" class="Function">pr2-7</a> <a id="8278" class="Symbol">=</a> <a id="8280" href="Chapter.Imp.HoareLogic.html#4958" class="InductiveConstructor">H-Conseq</a> <a id="8289" href="Chapter.Imp.HoareLogicExample.html#7624" class="Function">Z=X+I∧I&lt;=Y∧I&lt;Y-&gt;Z+1=X+I+1∧I+1&lt;Y+1</a>
                 <a id="8340" href="Chapter.Imp.HoareLogicExample.html#5336" class="Function">pr2-6</a>
                 <a id="8363" href="Chapter.Imp.HoareLogicExample.html#7905" class="Function">Z=X+I∧I&lt;Y+1-&gt;Z=X+I∧I&lt;=Y</a>

<a id="¬I&lt;Y"></a><a id="8388" href="Chapter.Imp.HoareLogicExample.html#8388" class="Function">¬I&lt;Y</a> <a id="8393" class="Symbol">:</a> <a id="8395" href="Chapter.Imp.HoareLogic.html#2499" class="Function">Assn</a>
<a id="8400" href="Chapter.Imp.HoareLogicExample.html#8388" class="Function">¬I&lt;Y</a> <a id="8405" class="Symbol">=</a> <a id="8407" class="Symbol">λ</a> <a id="8409" href="Chapter.Imp.HoareLogicExample.html#8409" class="Bound">s</a> <a id="8411" class="Symbol">-&gt;</a> <a id="8414" href="Chapter.Imp.HoareLogicExample.html#8409" class="Bound">s</a> <a id="8416" href="Chapter.Imp.HoareLogicExample.html#1855" class="Function">I</a> <a id="8418" href="Chapter.Imp.AexpBexp.html#10049" class="Function Operator">&lt;ℕ</a> <a id="8421" href="Chapter.Imp.HoareLogicExample.html#8409" class="Bound">s</a> <a id="8423" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a> <a id="8425" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="8428" href="Library.Bool.html#57" class="InductiveConstructor">false</a>

<a id="pr2-8"></a><a id="8435" href="Chapter.Imp.HoareLogicExample.html#8435" class="Function">pr2-8</a> <a id="8441" class="Symbol">:</a> <a id="8443" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="8446" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="8448" href="Chapter.Imp.HoareLogicExample.html#4215" class="Function">Z=X+I</a> <a id="8454" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="8457" href="Chapter.Imp.HoareLogicExample.html#4261" class="Function">I&lt;=Y</a> <a id="8462" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
            <a id="8476" class="Symbol">(</a><a id="8477" href="Chapter.Imp.BigStep.html#1738" class="InductiveConstructor Operator">WHILE</a> <a id="8483" class="Symbol">(</a><a id="8484" href="Chapter.Imp.AexpBexp.html#9458" class="InductiveConstructor">Less</a> <a id="8489" class="Symbol">(</a><a id="8490" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="8492" href="Chapter.Imp.HoareLogicExample.html#1855" class="Function">I</a><a id="8493" class="Symbol">)</a> <a id="8495" class="Symbol">(</a><a id="8496" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="8498" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a><a id="8499" class="Symbol">))</a> <a id="8502" href="Chapter.Imp.BigStep.html#1738" class="InductiveConstructor Operator">DO</a>
                 <a id="8522" href="Chapter.Imp.HoareLogicExample.html#2017" class="Function">sum-prog-body</a><a id="8535" class="Symbol">)</a>
            <a id="8549" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="8551" class="Symbol">(</a><a id="8552" href="Chapter.Imp.HoareLogicExample.html#4215" class="Function">Z=X+I</a> <a id="8558" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="8561" href="Chapter.Imp.HoareLogicExample.html#4261" class="Function">I&lt;=Y</a><a id="8565" class="Symbol">)</a> <a id="8567" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="8570" href="Chapter.Imp.HoareLogicExample.html#8388" class="Function">¬I&lt;Y</a> <a id="8575" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>

<a id="8578" href="Chapter.Imp.HoareLogicExample.html#8435" class="Function">pr2-8</a> <a id="8584" class="Symbol">=</a> <a id="8586" href="Chapter.Imp.HoareLogic.html#4726" class="InductiveConstructor">H-While</a> <a id="8594" href="Chapter.Imp.HoareLogicExample.html#8165" class="Function">pr2-7</a>
</pre>
<p>In summary we have proved</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pr2-3 : |- [ ⊤' ]
       (Z := V X) :: (I := N 0)
       [ Z=X ∧' I=0 ]

and

pr2-8 : |- [ Z=X+I ∧' I&lt;=Y ]
        (WHILE (Less (V I) (V Y)) DO
             sum-prog-body)
        [ (Z=X+I ∧' I&lt;=Y) ∧' ¬I&lt;Y ]
</code></pre></div></div>

<p>It remains to show that</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Z=X ∧' I=0 ==&gt; Z=X+I ∧' I&lt;=Y
</code></pre></div></div>

<p>to link <code class="language-plaintext highlighter-rouge">pr2-3</code> and <code class="language-plaintext highlighter-rouge">pr2-8</code></p>
<pre class="Agda"><a id="Z=X∧I=0-&gt;Z=X+I"></a><a id="8964" href="Chapter.Imp.HoareLogicExample.html#8964" class="Function">Z=X∧I=0-&gt;Z=X+I</a> <a id="8979" class="Symbol">:</a> <a id="8981" class="Symbol">∀</a> <a id="8983" href="Chapter.Imp.HoareLogicExample.html#8983" class="Bound">s</a> <a id="8985" class="Symbol">-&gt;</a> <a id="8988" class="Symbol">(</a><a id="8989" href="Chapter.Imp.HoareLogicExample.html#2481" class="Function">Z=X</a> <a id="8993" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="8996" href="Chapter.Imp.HoareLogicExample.html#2513" class="Function">I=0</a><a id="8999" class="Symbol">)</a> <a id="9001" href="Chapter.Imp.HoareLogicExample.html#8983" class="Bound">s</a> <a id="9003" class="Symbol">-&gt;</a> <a id="9006" class="Symbol">(</a><a id="9007" href="Chapter.Imp.HoareLogicExample.html#4215" class="Function">Z=X+I</a> <a id="9013" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="9016" href="Chapter.Imp.HoareLogicExample.html#4261" class="Function">I&lt;=Y</a><a id="9020" class="Symbol">)</a> <a id="9022" href="Chapter.Imp.HoareLogicExample.html#8983" class="Bound">s</a>
<a id="9024" href="Chapter.Imp.HoareLogicExample.html#8964" class="Function">Z=X∧I=0-&gt;Z=X+I</a> <a id="9039" href="Chapter.Imp.HoareLogicExample.html#9039" class="Bound">s</a> <a id="9041" class="Symbol">(</a><a id="9042" href="Chapter.Imp.HoareLogicExample.html#9042" class="Bound">x</a> <a id="9044" href="Library.Logic.html#271" class="InductiveConstructor Operator">,</a> <a id="9046" href="Chapter.Imp.HoareLogicExample.html#9046" class="Bound">y</a><a id="9047" class="Symbol">)</a> <a id="9049" class="Symbol">=</a> <a id="9051" href="Chapter.Imp.HoareLogicExample.html#9074" class="Function">eq1</a> <a id="9055" href="Library.Logic.html#271" class="InductiveConstructor Operator">,</a> <a id="9057" href="Chapter.Imp.HoareLogicExample.html#9306" class="Function">eq2</a>
  <a id="9063" class="Keyword">where</a>

    <a id="9074" href="Chapter.Imp.HoareLogicExample.html#9074" class="Function">eq1</a> <a id="9078" class="Symbol">:</a> <a id="9080" href="Chapter.Imp.HoareLogicExample.html#9039" class="Bound">s</a> <a id="9082" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a> <a id="9084" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="9087" href="Chapter.Imp.HoareLogicExample.html#9039" class="Bound">s</a> <a id="9089" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a> <a id="9091" href="Library.Nat.html#145" class="Function Operator">+</a> <a id="9093" href="Chapter.Imp.HoareLogicExample.html#9039" class="Bound">s</a> <a id="9095" href="Chapter.Imp.HoareLogicExample.html#1855" class="Function">I</a>
    <a id="9101" href="Chapter.Imp.HoareLogicExample.html#9074" class="Function">eq1</a> <a id="9105" class="Symbol">=</a> <a id="9107" href="Library.Equality.Reasoning.html#142" class="Function Operator">begin</a>
             <a id="9126" href="Chapter.Imp.HoareLogicExample.html#9039" class="Bound">s</a> <a id="9128" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a>          <a id="9139" href="Library.Equality.Reasoning.html#255" class="Function Operator">==⟨</a> <a id="9143" href="Chapter.Imp.HoareLogicExample.html#9042" class="Bound">x</a> <a id="9145" href="Library.Equality.Reasoning.html#255" class="Function Operator">⟩</a>
             <a id="9160" href="Chapter.Imp.HoareLogicExample.html#9039" class="Bound">s</a> <a id="9162" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a>          <a id="9173" href="Library.Equality.Reasoning.html#255" class="Function Operator">==⟨</a> <a id="9177" href="Library.Equality.html#226" class="Function">symm</a> <a id="9182" class="Symbol">(</a><a id="9183" href="Library.Nat.Properties.html#536" class="Function">+-unit-r</a> <a id="9192" class="Symbol">(</a><a id="9193" href="Chapter.Imp.HoareLogicExample.html#9039" class="Bound">s</a> <a id="9195" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a><a id="9196" class="Symbol">))</a> <a id="9199" href="Library.Equality.Reasoning.html#255" class="Function Operator">⟩</a>
             <a id="9214" href="Chapter.Imp.HoareLogicExample.html#9039" class="Bound">s</a> <a id="9216" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a> <a id="9218" href="Library.Nat.html#145" class="Function Operator">+</a> <a id="9220" class="Number">0</a>      <a id="9227" href="Library.Equality.Reasoning.html#255" class="Function Operator">==⟨</a> <a id="9231" href="Library.Equality.html#373" class="Function">cong</a> <a id="9236" class="Symbol">(λ</a> <a id="9239" href="Chapter.Imp.HoareLogicExample.html#9239" class="Bound">z</a> <a id="9241" class="Symbol">-&gt;</a> <a id="9244" href="Chapter.Imp.HoareLogicExample.html#9039" class="Bound">s</a> <a id="9246" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a> <a id="9248" href="Library.Nat.html#145" class="Function Operator">+</a> <a id="9250" href="Chapter.Imp.HoareLogicExample.html#9239" class="Bound">z</a><a id="9251" class="Symbol">)</a> <a id="9253" class="Symbol">(</a><a id="9254" href="Library.Equality.html#226" class="Function">symm</a> <a id="9259" href="Chapter.Imp.HoareLogicExample.html#9046" class="Bound">y</a><a id="9260" class="Symbol">)</a> <a id="9262" href="Library.Equality.Reasoning.html#255" class="Function Operator">⟩</a>
             <a id="9277" href="Chapter.Imp.HoareLogicExample.html#9039" class="Bound">s</a> <a id="9279" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a> <a id="9281" href="Library.Nat.html#145" class="Function Operator">+</a> <a id="9283" href="Chapter.Imp.HoareLogicExample.html#9039" class="Bound">s</a> <a id="9285" href="Chapter.Imp.HoareLogicExample.html#1855" class="Function">I</a>
          <a id="9297" href="Library.Equality.Reasoning.html#205" class="Function Operator">end</a>

    <a id="9306" href="Chapter.Imp.HoareLogicExample.html#9306" class="Function">eq2</a> <a id="9310" class="Symbol">:</a> <a id="9312" href="Chapter.Imp.HoareLogicExample.html#9039" class="Bound">s</a> <a id="9314" href="Chapter.Imp.HoareLogicExample.html#1855" class="Function">I</a> <a id="9316" href="Library.LessThan.html#210" class="Datatype Operator">&lt;=</a> <a id="9319" href="Chapter.Imp.HoareLogicExample.html#9039" class="Bound">s</a> <a id="9321" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a>
    <a id="9327" href="Chapter.Imp.HoareLogicExample.html#9306" class="Function">eq2</a> <a id="9331" class="Symbol">=</a> <a id="9333" href="Library.Equality.html#583" class="Function">subst</a> <a id="9339" class="Symbol">(λ</a> <a id="9342" href="Chapter.Imp.HoareLogicExample.html#9342" class="Bound">z</a> <a id="9344" class="Symbol">-&gt;</a> <a id="9347" href="Chapter.Imp.HoareLogicExample.html#9342" class="Bound">z</a> <a id="9349" href="Library.LessThan.html#210" class="Datatype Operator">&lt;=</a> <a id="9352" href="Chapter.Imp.HoareLogicExample.html#9039" class="Bound">s</a> <a id="9354" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a><a id="9355" class="Symbol">)</a> <a id="9357" class="Symbol">(</a><a id="9358" href="Library.Equality.html#226" class="Function">symm</a> <a id="9363" href="Chapter.Imp.HoareLogicExample.html#9046" class="Bound">y</a><a id="9364" class="Symbol">)</a> <a id="9366" class="Symbol">(</a><a id="9367" href="Library.LessThan.html#239" class="InductiveConstructor">le-zero</a> <a id="9375" class="Symbol">{</a><a id="9376" href="Chapter.Imp.HoareLogicExample.html#9039" class="Bound">s</a> <a id="9378" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a><a id="9379" class="Symbol">})</a>

</pre>
<p>and to show that</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(Z=X+I ∧' I&lt;=Y) ∧' ¬I&lt;Y ==&gt; Z=X+Y
</code></pre></div></div>

<p>to get the desired post-condition</p>
<pre class="Agda"><a id="leq-not-le"></a><a id="9483" href="Chapter.Imp.HoareLogicExample.html#9483" class="Function">leq-not-le</a> <a id="9494" class="Symbol">:</a>  <a id="9497" class="Symbol">∀</a> <a id="9499" class="Symbol">(</a><a id="9500" href="Chapter.Imp.HoareLogicExample.html#9500" class="Bound">n</a> <a id="9502" href="Chapter.Imp.HoareLogicExample.html#9502" class="Bound">m</a> <a id="9504" class="Symbol">:</a> <a id="9506" href="Library.Nat.html#32" class="Datatype">ℕ</a><a id="9507" class="Symbol">)</a> <a id="9509" class="Symbol">-&gt;</a> <a id="9512" href="Chapter.Imp.HoareLogicExample.html#9500" class="Bound">n</a> <a id="9514" href="Library.LessThan.html#210" class="Datatype Operator">&lt;=</a> <a id="9517" href="Chapter.Imp.HoareLogicExample.html#9502" class="Bound">m</a> <a id="9519" class="Symbol">-&gt;</a> <a id="9522" href="Chapter.Imp.HoareLogicExample.html#9500" class="Bound">n</a> <a id="9524" href="Chapter.Imp.AexpBexp.html#10049" class="Function Operator">&lt;ℕ</a> <a id="9527" href="Chapter.Imp.HoareLogicExample.html#9502" class="Bound">m</a> <a id="9529" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="9532" href="Library.Bool.html#57" class="InductiveConstructor">false</a> <a id="9538" class="Symbol">-&gt;</a> <a id="9541" href="Chapter.Imp.HoareLogicExample.html#9500" class="Bound">n</a> <a id="9543" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="9546" href="Chapter.Imp.HoareLogicExample.html#9502" class="Bound">m</a>

<a id="9549" href="Chapter.Imp.HoareLogicExample.html#9483" class="Function">leq-not-le</a> <a id="9560" href="Library.Nat.html#48" class="InductiveConstructor">zero</a> <a id="9565" href="Library.Nat.html#48" class="InductiveConstructor">zero</a> <a id="9570" href="Chapter.Imp.HoareLogicExample.html#9570" class="Bound">hyp1</a> <a id="9575" href="Chapter.Imp.HoareLogicExample.html#9575" class="Bound">hyp2</a> <a id="9580" class="Symbol">=</a> <a id="9582" href="Library.Equality.html#125" class="InductiveConstructor">refl</a>
<a id="9587" href="Chapter.Imp.HoareLogicExample.html#9483" class="Function">leq-not-le</a> <a id="9598" class="Symbol">(</a><a id="9599" href="Library.Nat.html#59" class="InductiveConstructor">succ</a> <a id="9604" href="Chapter.Imp.HoareLogicExample.html#9604" class="Bound">n</a><a id="9605" class="Symbol">)</a> <a id="9607" class="Symbol">(</a><a id="9608" href="Library.Nat.html#59" class="InductiveConstructor">succ</a> <a id="9613" href="Chapter.Imp.HoareLogicExample.html#9613" class="Bound">m</a> <a id="9615" class="Symbol">)</a> <a id="9617" class="Symbol">(</a><a id="9618" href="Library.LessThan.html#271" class="InductiveConstructor">le-succ</a> <a id="9626" href="Chapter.Imp.HoareLogicExample.html#9626" class="Bound">hyp1</a><a id="9630" class="Symbol">)</a> <a id="9632" href="Chapter.Imp.HoareLogicExample.html#9632" class="Bound">hyp2</a> <a id="9637" class="Symbol">=</a>
                             <a id="9668" href="Library.Equality.html#373" class="Function">cong</a> <a id="9673" href="Library.Nat.html#59" class="InductiveConstructor">succ</a> <a id="9678" class="Symbol">(</a><a id="9679" href="Chapter.Imp.HoareLogicExample.html#9483" class="Function">leq-not-le</a> <a id="9690" href="Chapter.Imp.HoareLogicExample.html#9604" class="Bound">n</a> <a id="9692" href="Chapter.Imp.HoareLogicExample.html#9613" class="Bound">m</a> <a id="9694" href="Chapter.Imp.HoareLogicExample.html#9626" class="Bound">hyp1</a> <a id="9699" href="Chapter.Imp.HoareLogicExample.html#9632" class="Bound">hyp2</a><a id="9703" class="Symbol">)</a>

<a id="leq-not-le&#39;"></a><a id="9706" href="Chapter.Imp.HoareLogicExample.html#9706" class="Function">leq-not-le&#39;</a> <a id="9718" class="Symbol">:</a> <a id="9720" class="Symbol">∀(</a><a id="9722" href="Chapter.Imp.HoareLogicExample.html#9722" class="Bound">a</a> <a id="9724" href="Chapter.Imp.HoareLogicExample.html#9724" class="Bound">a&#39;</a> <a id="9727" class="Symbol">:</a> <a id="9729" href="Chapter.Imp.AexpBexp.html#1770" class="Datatype">Aexp</a><a id="9733" class="Symbol">)</a> <a id="9735" class="Symbol">(</a><a id="9736" href="Chapter.Imp.HoareLogicExample.html#9736" class="Bound">s</a> <a id="9738" class="Symbol">:</a> <a id="9740" href="Chapter.Imp.AexpBexp.html#2404" class="Function">State</a><a id="9745" class="Symbol">)</a>
            <a id="9759" class="Symbol">-&gt;</a> <a id="9762" class="Symbol">(</a><a id="9763" href="Chapter.Imp.HoareLogicExample.html#9722" class="Bound">a</a> <a id="9765" href="Chapter.Imp.HoareLogicExample.html#4033" class="Function Operator">&lt;=&#39;</a> <a id="9769" href="Chapter.Imp.HoareLogicExample.html#9724" class="Bound">a&#39;</a><a id="9771" class="Symbol">)</a> <a id="9773" href="Chapter.Imp.HoareLogicExample.html#9736" class="Bound">s</a> <a id="9775" class="Comment">-- aval a s &lt;= aval a&#39; s</a>
            <a id="9812" class="Symbol">-&gt;</a> <a id="9815" href="Chapter.Imp.AexpBexp.html#10249" class="Function">bval</a> <a id="9820" class="Symbol">(</a><a id="9821" href="Chapter.Imp.AexpBexp.html#9458" class="InductiveConstructor">Less</a> <a id="9826" href="Chapter.Imp.HoareLogicExample.html#9722" class="Bound">a</a> <a id="9828" href="Chapter.Imp.HoareLogicExample.html#9724" class="Bound">a&#39;</a><a id="9830" class="Symbol">)</a> <a id="9832" href="Chapter.Imp.HoareLogicExample.html#9736" class="Bound">s</a> <a id="9834" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="9837" href="Library.Bool.html#57" class="InductiveConstructor">false</a>
            <a id="9855" class="Symbol">-&gt;</a> <a id="9858" class="Symbol">(</a><a id="9859" href="Chapter.Imp.HoareLogicExample.html#9722" class="Bound">a</a> <a id="9861" href="Chapter.Imp.HoareLogic.html#8152" class="Function Operator">==&#39;</a> <a id="9865" href="Chapter.Imp.HoareLogicExample.html#9724" class="Bound">a&#39;</a><a id="9867" class="Symbol">)</a> <a id="9869" href="Chapter.Imp.HoareLogicExample.html#9736" class="Bound">s</a> <a id="9871" class="Comment">-- aval a s == aval a&#39; s</a>
            
<a id="9909" href="Chapter.Imp.HoareLogicExample.html#9706" class="Function">leq-not-le&#39;</a> <a id="9921" href="Chapter.Imp.HoareLogicExample.html#9921" class="Bound">a</a> <a id="9923" href="Chapter.Imp.HoareLogicExample.html#9923" class="Bound">a&#39;</a> <a id="9926" href="Chapter.Imp.HoareLogicExample.html#9926" class="Bound">s</a> <a id="9928" href="Chapter.Imp.HoareLogicExample.html#9928" class="Bound">hyp1</a> <a id="9933" href="Chapter.Imp.HoareLogicExample.html#9933" class="Bound">hyp2</a> <a id="9938" class="Symbol">=</a>
            <a id="9952" href="Chapter.Imp.HoareLogicExample.html#9483" class="Function">leq-not-le</a> <a id="9963" class="Symbol">(</a><a id="9964" href="Chapter.Imp.AexpBexp.html#3910" class="Function">aval</a> <a id="9969" href="Chapter.Imp.HoareLogicExample.html#9921" class="Bound">a</a> <a id="9971" href="Chapter.Imp.HoareLogicExample.html#9926" class="Bound">s</a><a id="9972" class="Symbol">)</a> <a id="9974" class="Symbol">(</a><a id="9975" href="Chapter.Imp.AexpBexp.html#3910" class="Function">aval</a> <a id="9980" href="Chapter.Imp.HoareLogicExample.html#9923" class="Bound">a&#39;</a> <a id="9983" href="Chapter.Imp.HoareLogicExample.html#9926" class="Bound">s</a><a id="9984" class="Symbol">)</a> <a id="9986" href="Chapter.Imp.HoareLogicExample.html#9928" class="Bound">hyp1</a> <a id="9991" href="Chapter.Imp.HoareLogicExample.html#9933" class="Bound">hyp2</a>

<a id="Z=X+Y"></a><a id="9997" href="Chapter.Imp.HoareLogicExample.html#9997" class="Function">Z=X+Y</a> <a id="10003" class="Symbol">:</a> <a id="10005" href="Chapter.Imp.HoareLogic.html#2499" class="Function">Assn</a>
<a id="10010" href="Chapter.Imp.HoareLogicExample.html#9997" class="Function">Z=X+Y</a> <a id="10016" class="Symbol">=</a> <a id="10018" href="Chapter.Imp.HoareLogicExample.html#3930" class="Function">Plus&#39;</a> <a id="10024" class="Symbol">(</a><a id="10025" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="10027" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a><a id="10028" class="Symbol">)</a> <a id="10030" class="Symbol">(</a><a id="10031" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="10033" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a><a id="10034" class="Symbol">)</a> <a id="10036" class="Symbol">(</a><a id="10037" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="10039" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a><a id="10040" class="Symbol">)</a>

<a id="Z=X+I∧I&lt;=Y∧¬I&lt;Y-&gt;Z=X+Y"></a><a id="10043" href="Chapter.Imp.HoareLogicExample.html#10043" class="Function">Z=X+I∧I&lt;=Y∧¬I&lt;Y-&gt;Z=X+Y</a> <a id="10066" class="Symbol">:</a> <a id="10068" class="Symbol">∀</a> <a id="10070" href="Chapter.Imp.HoareLogicExample.html#10070" class="Bound">s</a> <a id="10072" class="Symbol">-&gt;</a> <a id="10075" class="Symbol">((</a><a id="10077" href="Chapter.Imp.HoareLogicExample.html#4215" class="Function">Z=X+I</a> <a id="10083" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="10086" href="Chapter.Imp.HoareLogicExample.html#4261" class="Function">I&lt;=Y</a><a id="10090" class="Symbol">)</a> <a id="10092" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="10095" href="Chapter.Imp.HoareLogicExample.html#8388" class="Function">¬I&lt;Y</a><a id="10099" class="Symbol">)</a> <a id="10101" href="Chapter.Imp.HoareLogicExample.html#10070" class="Bound">s</a> <a id="10103" class="Symbol">-&gt;</a> <a id="10106" href="Chapter.Imp.HoareLogicExample.html#9997" class="Function">Z=X+Y</a> <a id="10112" href="Chapter.Imp.HoareLogicExample.html#10070" class="Bound">s</a>
<a id="10114" href="Chapter.Imp.HoareLogicExample.html#10043" class="Function">Z=X+I∧I&lt;=Y∧¬I&lt;Y-&gt;Z=X+Y</a> <a id="10137" href="Chapter.Imp.HoareLogicExample.html#10137" class="Bound">s</a> <a id="10139" class="Symbol">((</a><a id="10141" href="Chapter.Imp.HoareLogicExample.html#10141" class="Bound">x</a> <a id="10143" href="Library.Logic.html#271" class="InductiveConstructor Operator">,</a> <a id="10145" href="Chapter.Imp.HoareLogicExample.html#10145" class="Bound">y</a><a id="10146" class="Symbol">)</a> <a id="10148" href="Library.Logic.html#271" class="InductiveConstructor Operator">,</a> <a id="10150" href="Chapter.Imp.HoareLogicExample.html#10150" class="Bound">z</a><a id="10151" class="Symbol">)</a> <a id="10153" class="Symbol">=</a> <a id="10155" href="Chapter.Imp.HoareLogicExample.html#10232" class="Function">ths</a>
  <a id="10161" class="Keyword">where</a>
    <a id="10171" href="Chapter.Imp.HoareLogicExample.html#10171" class="Function">eq</a> <a id="10174" class="Symbol">:</a> <a id="10176" href="Chapter.Imp.HoareLogicExample.html#10137" class="Bound">s</a> <a id="10178" href="Chapter.Imp.HoareLogicExample.html#1855" class="Function">I</a> <a id="10180" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="10183" href="Chapter.Imp.HoareLogicExample.html#10137" class="Bound">s</a> <a id="10185" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a> 
    <a id="10192" href="Chapter.Imp.HoareLogicExample.html#10171" class="Function">eq</a> <a id="10195" class="Symbol">=</a> <a id="10197" href="Chapter.Imp.HoareLogicExample.html#9706" class="Function">leq-not-le&#39;</a> <a id="10209" class="Symbol">(</a><a id="10210" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="10212" href="Chapter.Imp.HoareLogicExample.html#1855" class="Function">I</a><a id="10213" class="Symbol">)</a> <a id="10215" class="Symbol">(</a><a id="10216" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="10218" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a><a id="10219" class="Symbol">)</a> <a id="10221" href="Chapter.Imp.HoareLogicExample.html#10137" class="Bound">s</a> <a id="10223" href="Chapter.Imp.HoareLogicExample.html#10145" class="Bound">y</a> <a id="10225" href="Chapter.Imp.HoareLogicExample.html#10150" class="Bound">z</a>

    <a id="10232" href="Chapter.Imp.HoareLogicExample.html#10232" class="Function">ths</a> <a id="10236" class="Symbol">:</a> <a id="10238" href="Chapter.Imp.HoareLogicExample.html#9997" class="Function">Z=X+Y</a> <a id="10244" href="Chapter.Imp.HoareLogicExample.html#10137" class="Bound">s</a>
    <a id="10250" href="Chapter.Imp.HoareLogicExample.html#10232" class="Function">ths</a> <a id="10254" class="Symbol">=</a> <a id="10256" href="Library.Equality.html#583" class="Function">subst</a> <a id="10262" class="Symbol">(λ</a> <a id="10265" href="Chapter.Imp.HoareLogicExample.html#10265" class="Bound">z</a> <a id="10267" class="Symbol">-&gt;</a> <a id="10270" href="Chapter.Imp.HoareLogicExample.html#10137" class="Bound">s</a> <a id="10272" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a> <a id="10274" href="Library.Equality.html#83" class="Datatype Operator">==</a> <a id="10277" href="Chapter.Imp.HoareLogicExample.html#10137" class="Bound">s</a> <a id="10279" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a> <a id="10281" href="Library.Nat.html#145" class="Function Operator">+</a> <a id="10283" href="Chapter.Imp.HoareLogicExample.html#10265" class="Bound">z</a><a id="10284" class="Symbol">)</a> <a id="10286" href="Chapter.Imp.HoareLogicExample.html#10171" class="Function">eq</a> <a id="10289" href="Chapter.Imp.HoareLogicExample.html#10141" class="Bound">x</a>

<a id="pr2-9"></a><a id="10292" href="Chapter.Imp.HoareLogicExample.html#10292" class="Function">pr2-9</a> <a id="10298" class="Symbol">:</a> <a id="10300" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="10303" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="10305" href="Chapter.Imp.HoareLogicExample.html#4215" class="Function">Z=X+I</a> <a id="10311" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="10314" href="Chapter.Imp.HoareLogicExample.html#4261" class="Function">I&lt;=Y</a> <a id="10319" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
            <a id="10333" class="Symbol">(</a><a id="10334" href="Chapter.Imp.BigStep.html#1738" class="InductiveConstructor Operator">WHILE</a> <a id="10340" class="Symbol">(</a><a id="10341" href="Chapter.Imp.AexpBexp.html#9458" class="InductiveConstructor">Less</a> <a id="10346" class="Symbol">(</a><a id="10347" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="10349" href="Chapter.Imp.HoareLogicExample.html#1855" class="Function">I</a><a id="10350" class="Symbol">)</a> <a id="10352" class="Symbol">(</a><a id="10353" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="10355" href="Chapter.Imp.AexpBexp.html#926" class="Function">Y</a><a id="10356" class="Symbol">))</a> <a id="10359" href="Chapter.Imp.BigStep.html#1738" class="InductiveConstructor Operator">DO</a>
                 <a id="10379" href="Chapter.Imp.HoareLogicExample.html#2017" class="Function">sum-prog-body</a><a id="10392" class="Symbol">)</a>
            <a id="10406" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="10408" href="Chapter.Imp.HoareLogicExample.html#9997" class="Function">Z=X+Y</a> <a id="10414" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
            
<a id="10429" href="Chapter.Imp.HoareLogicExample.html#10292" class="Function">pr2-9</a> <a id="10435" class="Symbol">=</a> <a id="10437" href="Chapter.Imp.HoareLogic.html#7611" class="Function">H-While&#39;</a> <a id="10446" href="Chapter.Imp.HoareLogicExample.html#8165" class="Function">pr2-7</a> <a id="10452" href="Chapter.Imp.HoareLogicExample.html#10043" class="Function">Z=X+I∧I&lt;=Y∧¬I&lt;Y-&gt;Z=X+Y</a>
</pre>
<p>Eventually we put all together:</p>
<pre class="Agda"><a id="pr2-3&#39;"></a><a id="10516" href="Chapter.Imp.HoareLogicExample.html#10516" class="Function">pr2-3&#39;</a> <a id="10523" class="Symbol">:</a> <a id="10525" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="10528" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="10530" href="Chapter.Imp.HoareLogic.html#9895" class="Function">⊤&#39;</a> <a id="10533" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
           <a id="10546" class="Symbol">((</a><a id="10548" href="Chapter.Imp.AexpBexp.html#946" class="Function">Z</a> <a id="10550" href="Chapter.Imp.BigStep.html#1571" class="InductiveConstructor Operator">:=</a> <a id="10553" href="Chapter.Imp.AexpBexp.html#1836" class="InductiveConstructor">V</a> <a id="10555" href="Chapter.Imp.AexpBexp.html#906" class="Function">X</a><a id="10556" class="Symbol">)</a> <a id="10558" href="Chapter.Imp.BigStep.html#1627" class="InductiveConstructor Operator">::</a> <a id="10561" class="Symbol">(</a><a id="10562" href="Chapter.Imp.HoareLogicExample.html#1855" class="Function">I</a> <a id="10564" href="Chapter.Imp.BigStep.html#1571" class="InductiveConstructor Operator">:=</a> <a id="10567" href="Chapter.Imp.AexpBexp.html#1790" class="InductiveConstructor">N</a> <a id="10569" class="Number">0</a><a id="10570" class="Symbol">))</a>
           <a id="10584" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="10586" href="Chapter.Imp.HoareLogicExample.html#4215" class="Function">Z=X+I</a> <a id="10592" href="Chapter.Imp.HoareLogic.html#13401" class="Function Operator">∧&#39;</a> <a id="10595" href="Chapter.Imp.HoareLogicExample.html#4261" class="Function">I&lt;=Y</a> <a id="10600" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>

<a id="10603" href="Chapter.Imp.HoareLogicExample.html#10516" class="Function">pr2-3&#39;</a> <a id="10610" class="Symbol">=</a> <a id="10612" href="Chapter.Imp.HoareLogic.html#7346" class="Function">H-Weak</a> <a id="10619" href="Chapter.Imp.HoareLogicExample.html#3387" class="Function">pr2-3</a> <a id="10625" href="Chapter.Imp.HoareLogicExample.html#8964" class="Function">Z=X∧I=0-&gt;Z=X+I</a>

<a id="pr2-10"></a><a id="10641" href="Chapter.Imp.HoareLogicExample.html#10641" class="Function">pr2-10</a> <a id="10648" class="Symbol">:</a> <a id="10650" href="Chapter.Imp.HoareLogic.html#4019" class="Datatype Operator">|-</a> <a id="10653" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="10655" href="Chapter.Imp.HoareLogic.html#9895" class="Function">⊤&#39;</a> <a id="10658" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>
            <a id="10672" href="Chapter.Imp.HoareLogicExample.html#2189" class="Function">sum-prog</a>
            <a id="10693" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">[</a> <a id="10695" href="Chapter.Imp.HoareLogicExample.html#9997" class="Function">Z=X+Y</a> <a id="10701" href="Chapter.Imp.HoareLogic.html#2550" class="InductiveConstructor Operator">]</a>

<a id="10704" href="Chapter.Imp.HoareLogicExample.html#10641" class="Function">pr2-10</a> <a id="10711" class="Symbol">=</a> <a id="10713" href="Chapter.Imp.HoareLogic.html#4297" class="InductiveConstructor">H-Comp</a> <a id="10720" href="Chapter.Imp.HoareLogicExample.html#10516" class="Function">pr2-3&#39;</a> <a id="10727" href="Chapter.Imp.HoareLogicExample.html#10292" class="Function">pr2-9</a>
</pre>

  </div>
  <ul class="menu">
  <li>
    <a href="Chapter.Imp.HoareLogic.html">‹ Hoare Logic for verification of IMP programs</a></li>
  <li>
    <a href="Chapter.Imp.HoareLogicSoundness.html">Soundness of Hoare Logic ›</a></li>
</ul>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>
  <div class="wrapper">
    <!-- <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/"> -->
    <!--   <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/4.0/88x31.png"/> -->
    <!-- </a> -->
    2022-2023
    <a href="https://boystrange.github.io">Luca Padovani</a>
    and <a href="http://www.di.unito.it/~deligu/">Ugo de'Liguoro</a>.
    Page generated on 20 Sep 2023.
  </div>
</footer>
</body>

</html>
